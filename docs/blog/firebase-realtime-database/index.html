<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="/favicon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
        rel="stylesheet"
    />

    <title>
        Firebase Realtime Database - Nushan Kodikara
    </title>
    <meta
        name="description"
        content="Complete Guide on Firebase Realtime Database"
    /><meta name="generator" content="Hugo 0.90.0" /><link
        rel="stylesheet"
        href="https://www.nushankodikara.com/css/styles.min.9eb1933d74bc51f90a99828e3b839009c326aa4d8dd5ec0ac6168f963105e957.css"
        integrity="sha256-nrGTPXS8UfkKmYKOO4OQCcMmqk2N1ewKxhaPljEF6Vc="
    />
    
     <meta property="og:title" content="Firebase Realtime Database" />
<meta property="og:description" content="Complete Guide on Firebase Realtime Database" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.nushankodikara.com/blog/firebase-realtime-database/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2020-08-05T06:00:00+05:30" />
<meta property="article:modified_time" content="2020-08-05T06:00:00+05:30" />

 <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Firebase Realtime Database"/>
<meta name="twitter:description" content="Complete Guide on Firebase Realtime Database"/>
 <meta itemprop="name" content="Firebase Realtime Database">
<meta itemprop="description" content="Complete Guide on Firebase Realtime Database"><meta itemprop="datePublished" content="2020-08-05T06:00:00+05:30" />
<meta itemprop="dateModified" content="2020-08-05T06:00:00+05:30" />
<meta itemprop="wordCount" content="5105">
<meta itemprop="keywords" content="Mobile Development,web Development,Firebase," />
</head>
<body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-around md:justify-between gap-4 flex-wrap p-6 mx-auto">
  <a href="https://www.nushankodikara.com/" class="capitalize font-extrabold text-2xl">
    Nushan Kodikara
  </a>
  <ul class="flex items-center gap-4 lg:gap-6">

    
    <li><a href="/blog">Blog</a></li>
    
    <li><a href="https://td.hackgence.com/">Team Drive</a></li>
    

    

    
    <li class="grid place-items-center">
      <span class="open-search inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="10" cy="10" r="7" />
          <line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      </span>
    </li>
    

    
    <li class="grid place-items-center">
      <span class="toggle-dark-mode inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="3" />
          <line x1="12" y1="5" x2="12" y2="5.01" />
          <line x1="17" y1="7" x2="17" y2="7.01" />
          <line x1="19" y1="12" x2="19" y2="12.01" />
          <line x1="17" y1="17" x2="17" y2="17.01" />
          <line x1="12" y1="19" x2="12" y2="19.01" />
          <line x1="7" y1="17" x2="7" y2="17.01" />
          <line x1="5" y1="12" x2="5" y2="12.01" />
          <line x1="7" y1="7" x2="7" y2="7.01" />
        </svg>
      </span>
    </li>
    
  </ul>
</header><main class="flex-1">
  
  

  
  <div class="relative max-w-5xl mx-auto px-4">
    <img src="https://unsplash.com/photos/JKUTrJ4vK00/download?force=true&amp;w=640" class="rounded-lg shadow-sm w-full object-contain" />
    <div class="absolute top-4 right-8 rounded shadow bg-white text-gray-900 dark:bg-gray-900 dark:text-white px-2 py-0.5">
      
  
    August 5, 2020
  


    </div>
  </div>
  

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">Firebase Realtime Database</h1>
    <h5 class="text-sm flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      Posted on 
  
    August 5, 2020
  


      
        &nbsp;&bull;&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
      24&nbsp;minutes
      &nbsp;&bull;
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <line x1="3" y1="6" x2="3" y2="19" />
        <line x1="12" y1="6" x2="12" y2="19" />
        <line x1="21" y1="6" x2="21" y2="19" />
      </svg>
      5105&nbsp;words
      
    </h5>

    <h2 id="introduction">Introduction</h2>
<p>Okay, Let&rsquo;s do some database actions, But without SQL or any of those table based old style databases, We&rsquo;re learning how to use Firebase Realtime database with a web application, but also the codes are the same for mobile applications, so it won&rsquo;t make much difference at all, And in the end of this series, After we covered Authentication, We&rsquo;re creating a fully fledged Chat application and maybe a social media application to test our knowledge.</p>
<h2 id="environmental-setup">Environmental Setup</h2>
<p>First you need to have a firebase project settled up, We&rsquo;re starting the firebase database section without any security rules at first, then we&rsquo;re doing it with rules. First, let&rsquo;s explore the possibilities of Firebase Database</p>
<p>Key capabilities</p>
<table>
<thead>
<tr>
<th style="text-align:left">Capability</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Realtime</td>
<td style="text-align:left">Instead of typical HTTP requests, the Firebase Realtime Database uses data synchronization—every time data changes, any connected device receives that update within milliseconds. Provide collaborative and immersive experiences without thinking about networking code.</td>
</tr>
<tr>
<td style="text-align:left">Offline</td>
<td style="text-align:left">Firebase apps remain responsive even when offline because the Firebase Realtime Database SDK persists your data to disk. Once connectivity is reestablished, the client device receives any changes it missed, synchronizing it with the current server state.</td>
</tr>
<tr>
<td style="text-align:left">Accessible from Client Devices</td>
<td style="text-align:left">The Firebase Realtime Database can be accessed directly from a mobile device or web browser; there’s no need for an application server. Security and data validation are available through the Firebase Realtime Database Security Rules, expression-based rules that are executed when data is read or written.</td>
</tr>
<tr>
<td style="text-align:left">Scale across multiple databases</td>
<td style="text-align:left">With Firebase Realtime Database on the Blaze pricing plan, you can support your app&rsquo;s data needs at scale by splitting your data across multiple database instances in the same Firebase project. Streamline authentication with Firebase Authentication on your project and authenticate users across your database instances. Control access to the data in each database with custom Firebase Realtime Database Rules for each database instance.</td>
</tr>
</tbody>
</table>
<h2 id="how-does-it-work">How does it work</h2>
<p>The Firebase Realtime Database lets you build rich, collaborative applications by allowing secure access to the database directly from client-side code. Data is persisted locally, and even while offline, realtime events continue to fire, giving the end user a responsive experience. When the device regains connection, the Realtime Database synchronizes the local data changes with the remote updates that occurred while the client was offline, merging any conflicts automatically.</p>
<p>The Realtime Database provides a flexible, expression-based rules language, called Firebase Realtime Database Security Rules, to define how your data should be structured and when data can be read from or written to. When integrated with Firebase Authentication, developers can define who has access to what data, and how they can access it.</p>
<p>The Realtime Database is a NoSQL database and as such has different optimizations and functionality compared to a relational database. The Realtime Database API is designed to only allow operations that can be executed quickly. This enables you to build a great realtime experience that can serve millions of users without compromising on responsiveness. Because of this, it is important to think about how users need to access your data and then structure it accordingly.</p>
<h2 id="choose-a-database-cloud-firestore-or-realtime-database">Choose a Database: Cloud Firestore or Realtime Database</h2>
<p>Firebase offers two cloud-based, client-accessible database solutions that support realtime data syncing:</p>
<ul>
<li>
<p><strong>Cloud Firestore</strong> is Firebase&rsquo;s newest database for app development. It builds on the successes of the Realtime Database with a new, more intuitive data model. Cloud Firestore also features richer, faster queries and scales further than the Realtime Database.</p>
</li>
<li>
<p><strong>Realtime Database</strong> is Firebase&rsquo;s original database. It&rsquo;s an efficient, low-latency solution for apps that require synced states across clients in realtime.</p>
</li>
</ul>
<p>We&rsquo;re looking into the Realtime Database solution Today. It&rsquo;s a key:value paired database solution with directories and easy operations. We need a clear data modal before starting a project of two reasons.</p>
<ol>
<li>Firebase Realtime database doesn&rsquo;t have a pre-defined Data structure</li>
<li>Security Purposes (We&rsquo;ll Discuss later)</li>
</ol>
<p>Also Realtime database Stores data as one large JSON tree.</p>
<ul>
<li>Simple data is very easy to store.</li>
<li>Complex, hierarchical data is harder to organize at scale.</li>
</ul>
<p>Otherhand in Cloud Firestore
Stores data as collections of documents.</p>
<ul>
<li>Simple data is easy to store in documents, which are very similar to JSON.</li>
<li>Complex, hierarchical data is easier to organize at scale, using subcollections within documents.</li>
<li>Requires less denormalization and data flattening.</li>
</ul>
<p>Keep that in mind for a bit. And again, We&rsquo;re using the web SDK for this project with Javascript because we&rsquo;re doing JAMStack development from here on. It&rsquo;s the same for all of the SDKs so don&rsquo;t get panicked.</p>
<h2 id="installation--setup-in-javascript">Installation &amp; Setup in JavaScript</h2>
<p>I&rsquo;m creating a simple html document with HTML, CSS and JS also linking them all, as always you can download the project <a href="/zip/FirebaseAssestPack1.zip">HERE</a>. Also if you&rsquo;re using Visual Studio code as I do, Go ahead and install <a href="https://marketplace.visualstudio.com/items?itemName=jsayol.firebase-explorer">Firebase Explorer Extension</a> To view your project right in VSCode (It Helps Allot!).</p>
<p>The Firebase Realtime Database is a cloud-hosted database. Data is stored as JSON and synchronized in realtime to every connected client. When you build cross-platform apps with our Android, iOS, and JavaScript SDKs, all of your clients share one Realtime Database instance and automatically receive updates with the newest data.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>Let&rsquo;s add firebase to our project. in order to do this, you have to implement links to these files in your HTML page. These versions could be changed so go to this site <a href="https://firebase.google.com/docs/web/setup">https://firebase.google.com/docs/web/setup</a> to get the latest</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#6272a4">&lt;!-- This is the main JS file to implement Firebase --&gt;</span>
&lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
<span style="color:#6272a4">&lt;!-- Now you can add any modular firebase services in this case Realtime Database --&gt;</span>
&lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
</code></pre></div><p>It&rsquo;s simple as that!. And now that out to the way, we have to initialize your Firebase project. To do this you have to goto <a href="https://console.firebase.google.com/">https://console.firebase.google.com/</a> And create a new project.</p>
<p><img src="/uploads/20200805_01.gif" alt="Creating a firebase project"></p>
<p>Now you have to add the initialization code from the project. Doing this is simple, go to your project and copy the web SDK code And put in right below the Firebase implementation service. This code is okay to be exposed and you can add security rules to make sure no one&rsquo;s going to peek into your database in unwanted ways.</p>
<p><img src="/uploads/20200805_02.gif" alt="Creating a firebase project">
<img src="/uploads/20200805_03.gif" alt="Creating a firebase project"></p>
<p>If you&rsquo;re using the firebase explorer plugin, now you can see the database in the left hand corner of your VSCode editor. This is a nice addition for quick exploration.</p>
<p><img src="/uploads/20200805_04.gif" alt="Creating a firebase project"></p>
<p>Alright Now Let&rsquo;s make a demo application and Start working out! I&rsquo;m creating a quick HTML document and adding a text input bar to it along with a button, so I can get data from the element and write it to the database! Before that, Let&rsquo;s explore how the data stored in this database type.</p>
<h2 id="structure-your-database">Structure Your Database</h2>
<p>This guide covers some of the key concepts in data architecture and best practices for structuring the JSON data in your Firebase Realtime Database.</p>
<p>Building a properly structured database requires quite a bit of forethought. Most importantly, you need to plan for how data is going to be saved and later retrieved to make that process as easy as possible.</p>
<h3 id="how-data-is-structured-its-a-json-tree">How data is structured: it&rsquo;s a JSON tree</h3>
<p>All Firebase Realtime Database data is stored as JSON objects. You can think of the database as a cloud-hosted JSON tree. Unlike a SQL database, there are no tables or records. When you add data to the JSON tree, it becomes a node in the existing JSON structure with an associated key. You can provide your own keys, such as user IDs or semantic names, or they can be provided for you using <code>push()</code>.</p>
<p>For example, consider a chat application that allows users to store a basic profile and contact list. A typical user profile is located at a path, such as /users/$uid. The user alovelace might have a database entry that looks something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#ff79c6">&#34;users&#34;</span>: {
    <span style="color:#ff79c6">&#34;alovelace&#34;</span>: {
      <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;Ada Lovelace&#34;</span>,
      <span style="color:#ff79c6">&#34;contacts&#34;</span>: { <span style="color:#ff79c6">&#34;ghopper&#34;</span>: <span style="color:#ff79c6">true</span> },
    },
    <span style="color:#ff79c6">&#34;ghopper&#34;</span>: { ... },
    <span style="color:#ff79c6">&#34;eclarke&#34;</span>: { ... }
  }
}
</code></pre></div><p>Although the database uses a JSON tree, data stored in the database can be represented as certain native types that correspond to available JSON types to help you write more maintainable code.</p>
<h2 id="read-and-write-data-on-the-web">Read and Write Data on the Web</h2>
<p>Alright Before starting, Let&rsquo;s go to the firebase and remove security from security rules. In order to do this, we have to set read and write permission to true. So anyone can read and write from the database.</p>
<p><img src="/uploads/20200805_05.gif" alt="Creating a firebase project"></p>
<h2 id="get-a-database-reference">Get a database reference</h2>
<p>To read or write data from the database, you need an instance of firebase.database.Reference, in order to do this we use the following code in our main JS file, I like to make this into a constant variable,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> database <span style="color:#ff79c6">=</span> firebase.database();
</code></pre></div><p>Now we can use this database variable to do anything with our Database, Let&rsquo;s start with basic operations.</p>
<h2 id="basic-writing-operation">Basic Writing Operation</h2>
<p>For basic write operations, you can use <code>set()</code> to save data to a specified reference, replacing any existing data at that path. For example a social blogging application might add a user with <code>set()</code> as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">writeUserData <span style="color:#ff79c6">=</span> (userId, name, email, imageUrl) =&gt; {
  firebase.database().ref(<span style="color:#f1fa8c">&#39;users/&#39;</span> <span style="color:#ff79c6">+</span> userId).set({
    username<span style="color:#ff79c6">:</span> name,
    email<span style="color:#ff79c6">:</span> email,
    profile_picture <span style="color:#ff79c6">:</span> imageUrl
  });
}
</code></pre></div><p>This function passes 4 variables, userID, name, email and imageUrl to the firebase database reference set function, and from there it&rsquo;s writing to <code>users/*UserID</code> directory where the UserID is the user&rsquo;s unique ID, and setting username variable to padded name, email variable to passed email and profile picture to the passed URL. you can use <code>database</code> variable instead of <code>firebase.database()</code>, however I like to set the whole reference point into a constant variable so I just have to use the set function on it.</p>
<p>But with this set function, if there are data in that specific location it would be overwritten.</p>
<h2 id="listen-for-value-events-basic-read-operations">Listen for value events (Basic Read Operations)</h2>
<p>To read data at a path and listen for changes, use the <code>on()</code> or <code>once()</code> methods of <code>firebase.database.Reference</code> to observe events. As is says, <code>once()</code> is for reading data only once, and <code>on()</code> is to listen for data in realtime.</p>
<p>now let&rsquo;s see how we can listen to data in realtime</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> starCountRef <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;posts/&#39;</span> <span style="color:#ff79c6">+</span> postId <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;/starCount&#39;</span>);
starCountRef.on(<span style="color:#f1fa8c">&#39;value&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(snapshot) {
  updateStarCount(postElement, snapshot.val());
});
</code></pre></div><p>Now with his piece of code, It&rsquo;s listening to the <code>post/*postID/starCount</code> in realtime, and the postID is dynamic as you can see. From this code the SDK is always listening to the starCount of the specific post and once it&rsquo;s been updated, Fires the updateStarCount() function every time with the updated value of the <code>post/*postID/starCount</code> directory. It&rsquo;s that simple to use. ah also the value can be retrieved using <code>snapshot.val()</code> function. Data would be returned as a string.</p>
<p>now let&rsquo;s read the data once. It&rsquo;s the same as the above function, But it&rsquo;s only firing the function, when we define the variable, or you can use it to manually fetch data from the database.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> userId <span style="color:#ff79c6">=</span> firebase.auth().currentUser.uid;
<span style="color:#ff79c6">return</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;/users/&#39;</span> <span style="color:#ff79c6">+</span> userId).once(<span style="color:#f1fa8c">&#39;value&#39;</span>).then(<span style="color:#8be9fd;font-style:italic">function</span>(snapshot) {
  <span style="color:#8be9fd;font-style:italic">let</span> username <span style="color:#ff79c6">=</span> (snapshot.val() <span style="color:#ff79c6">&amp;&amp;</span> snapshot.val().username) <span style="color:#ff79c6">||</span> <span style="color:#f1fa8c">&#39;Anonymous&#39;</span>;
  <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>});
</code></pre></div><p>Consider this piece of code as a snippet from a function to get the username from a user. here, first we set the authentication reference to userID variable. then using <code>once()</code> function, we&rsquo;re retrieving data from <code>/users/*userID/</code> path, then what is that on the returning section you may ask, it&rsquo;s checking for is there any has been returned, this is false if you&rsquo;re using Anonymous authentication, and we&rsquo;re discussing about authentication in a while so be patient. And if the function returns a value, we&rsquo;re using it as the username, otherwise we&rsquo;re putting Anonymous as the username.</p>
<h2 id="updating-or-deleting-data">Updating or deleting data</h2>
<h3 id="update-specific-fields">Update specific fields</h3>
<p>To simultaneously write to specific children of a node without overwriting other child nodes, use the <code>update()</code> method.</p>
<p>When calling <code>update()</code>, you can update lower-level child values by specifying a path for the key. If data is stored in multiple locations to scale better, you can update all instances of that data using data fan-out.</p>
<p>For example, a social blogging app might create a post and simultaneously update it to the recent activity feed and the posting user&rsquo;s activity feed using code like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">writeNewPost <span style="color:#ff79c6">=</span> (uid, username, picture, title, body) =&gt; {
  <span style="color:#6272a4">// A post entry.
</span><span style="color:#6272a4"></span>  <span style="color:#8be9fd;font-style:italic">let</span> postData <span style="color:#ff79c6">=</span> {
    author<span style="color:#ff79c6">:</span> username,
    uid<span style="color:#ff79c6">:</span> uid,
    body<span style="color:#ff79c6">:</span> body,
    title<span style="color:#ff79c6">:</span> title,
    starCount<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span>,
    authorPic<span style="color:#ff79c6">:</span> picture
  };

  <span style="color:#6272a4">// Get a key for a new Post.
</span><span style="color:#6272a4"></span>  <span style="color:#8be9fd;font-style:italic">let</span> newPostKey <span style="color:#ff79c6">=</span> firebase.database().ref().child(<span style="color:#f1fa8c">&#39;posts&#39;</span>).push().key;

  <span style="color:#6272a4">// Write the new post&#39;s data simultaneously in the posts list and the user&#39;s post list.
</span><span style="color:#6272a4"></span>  <span style="color:#8be9fd;font-style:italic">let</span> updates <span style="color:#ff79c6">=</span> {};
  updates[<span style="color:#f1fa8c">&#39;/posts/&#39;</span> <span style="color:#ff79c6">+</span> newPostKey] <span style="color:#ff79c6">=</span> postData;
  updates[<span style="color:#f1fa8c">&#39;/user-posts/&#39;</span> <span style="color:#ff79c6">+</span> uid <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;/&#39;</span> <span style="color:#ff79c6">+</span> newPostKey] <span style="color:#ff79c6">=</span> postData;

  <span style="color:#ff79c6">return</span> firebase.database().ref().update(updates);
}
</code></pre></div><p>Let me explain what this does. we have the <code>writeNewPost()</code> function passing uid, username, picture, title and body variables and assigning them to an array in postData. you can get a unique key for a data set using the <code>push()</code> function and we&rsquo;re going to update two directories simultaneously. You can see the update array has two directories with the same dataset, <code>/post/*newPostKey</code> and <code>/user-posts/uid/newpostkey/</code> are getting updated the same time, This can be an example of think like facebook or instagram managing a bigger feed and personal feed with same post data. (There are more efficent ways to do this)</p>
<p>Using these paths, you can perform simultaneous updates to multiple locations in the JSON tree with a single call to update(), such as how this example creates the new post in both locations. Simultaneous updates made this way are atomic: either all updates succeed or all updates fail.</p>
<h2 id="add-a-completion-callback">Add a Completion Callback</h2>
<p>If you want to know when your data has been committed, you can add a completion callback. Both set() and update() take an optional completion callback that is called when the write has been committed to the database. If the call was unsuccessful, the callback is passed an error object indicating why the failure occurred.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">firebase.database().ref(<span style="color:#f1fa8c">&#39;users/&#39;</span> <span style="color:#ff79c6">+</span> userId).set({
    username<span style="color:#ff79c6">:</span> name,
    email<span style="color:#ff79c6">:</span> email,
    profile_picture <span style="color:#ff79c6">:</span> imageUrl
}, <span style="color:#8be9fd;font-style:italic">function</span>(error) {
    <span style="color:#ff79c6">if</span> (error) {
      <span style="color:#6272a4">// The write failed...
</span><span style="color:#6272a4"></span>    } <span style="color:#ff79c6">else</span> {
      <span style="color:#6272a4">// Data saved successfully!
</span><span style="color:#6272a4"></span>    }
  });
}
</code></pre></div><h2 id="delete-data">Delete data</h2>
<p>The simplest way to delete data is to call remove() on a reference to the location of that data.</p>
<p>You can also delete by specifying null as the value for another write operation such as set() or update(). You can use this technique with update() to delete multiple children in a single API call.</p>
<h2 id="receive-a-promise">Receive a Promise</h2>
<p>To know when your data is committed to the Firebase Realtime Database server, you can use a Promise. Both set() and update() can return a Promise you can use to know when the write is committed to the database.</p>
<h2 id="detach-listeners">Detach listeners</h2>
<p>Callbacks are removed by calling the off() method on your Firebase database reference.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">firebase.database().ref(<span style="color:#f1fa8c">&#39;users/&#39;</span> <span style="color:#ff79c6">+</span> userId).off()
</code></pre></div><p>You can remove a single listener by passing it as a parameter to off(). Calling off() on the location with no arguments removes all listeners at that location.</p>
<p>Calling off() on a parent listener does not automatically remove listeners registered on its child nodes; off() must also be called on any child listeners to remove the callback.</p>
<h2 id="save-data-as-transactions">Save data as transactions</h2>
<p>When working with data that could be corrupted by concurrent modifications, such as incremental counters, you can use a transaction operation. You can give this operation an update function and an optional completion callback. The update function takes the current state of the data as an argument and returns the new desired state you would like to write. If another client writes to the location before your new value is successfully written, your update function is called again with the new current value, and the write is retried.</p>
<p>For instance, in the example social blogging app, you could allow users to star and unstar posts and keep track of how many stars a post has received as follows:</p>
<p>function toggleStar(postRef, uid) {
postRef.transaction(function(post) {
if (post) {
if (post.stars &amp;&amp; post.stars[uid]) {
post.starCount&ndash;;
post.stars[uid] = null;
} else {
post.starCount++;
if (!post.stars) {
post.stars = {};
}
post.stars[uid] = true;
}
}
return post;
});
}</p>
<p>Using a transaction prevents star counts from being incorrect if multiple users star the same post at the same time or the client had stale data. If the transaction is rejected, the server returns the current value to the client, which runs the transaction again with the updated value. This repeats until the transaction is accepted or you abort the transaction.</p>
<h2 id="write-data-offline">Write data offline</h2>
<p>If a client loses its network connection, your app will continue functioning correctly.</p>
<p>Every client connected to a Firebase database maintains its own internal version of any active data. When data is written, it&rsquo;s written to this local version first. The Firebase client then synchronizes that data with the remote database servers and with other clients on a &ldquo;best-effort&rdquo; basis.</p>
<p>As a result, all writes to the database trigger local events immediately, before any data is written to the server. This means your app remains responsive regardless of network latency or connectivity.</p>
<p>Once connectivity is reestablished, your app receives the appropriate set of events so that the client syncs with the current server state, without having to write any custom code.</p>
<h2 id="work-with-lists-of-data-on-the-web">Work with Lists of Data on the Web</h2>
<p>Here we&rsquo;re discussing about how to manage data lists, for an instance, imagine of a chat in a chat application, it&rsquo;s a list of messages, of facebook&rsquo;s post data, it&rsquo;s a list of posts etc etc&hellip;</p>
<h3 id="get-a-reference-of-the-database">Get a reference of the database</h3>
<p>To read or write data from the database, you need an instance of firebase.database.Reference:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// Get a reference to the database service
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> database <span style="color:#ff79c6">=</span> firebase.database();
</code></pre></div><h3 id="reading-and-writing-lists">Reading and writing lists</h3>
<h4 id="append-to-a-list-of-data">Append to a list of data</h4>
<p>Use the <code>push()</code> method to append data to a list in multiuser applications. The push() method generates a unique key every time a new child is added to the specified Firebase reference. By using these auto-generated keys for each new element in the list, several clients can add children to the same location at the same time without write conflicts. The unique key generated by push() is based on a timestamp, so list items are automatically ordered chronologically.</p>
<p>You can use the reference to the new data returned by the push() method to get the value of the child&rsquo;s auto-generated key or set data for the child. The .key property of a push() reference contains the auto-generated key.</p>
<p>You can use these auto-generated keys to simplify flattening your data structure. For more information, see the data fan-out example.</p>
<p>For example, push() could be used to add a new post to a list of posts in a social application:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// Create a new post reference with an auto-generated id
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> newPostRef <span style="color:#ff79c6">=</span> postListRef.push();
newPostRef.set({
    <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>});
</code></pre></div><h3 id="listen-for-child-events">Listen for child events</h3>
<p>Child events are triggered in response to specific operations that happen to the children of a node from an operation such as a new child added through the push() method or a child being updated through the update() method.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Event</th>
<th style="text-align:left">Typical usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">child_added</td>
<td style="text-align:left">Retrieve lists of items or listen for additions to a list of items. This event is triggered once for each existing child and then again every time a new child is added to the specified path. The listener is passed a snapshot containing the new child&rsquo;s data.</td>
</tr>
<tr>
<td style="text-align:left">child_changed</td>
<td style="text-align:left">Listen for changes to the items in a list. This event is triggered any time a child node is modified. This includes any modifications to descendants of the child node. The snapshot passed to the event listener contains the updated data for the child.</td>
</tr>
<tr>
<td style="text-align:left">child_removed</td>
<td style="text-align:left">Listen for items being removed from a list. This event is triggered when an immediate child is removed.The snapshot passed to the callback block contains the data for the removed child.</td>
</tr>
<tr>
<td style="text-align:left">child_moved</td>
<td style="text-align:left">Listen for changes to the order of items in an ordered list. child_moved events always follow the child_changed event that caused the item&rsquo;s order to change (based on your current order-by method).</td>
</tr>
</tbody>
</table>
<p>Each of these together can be useful for listening to changes to a specific node in a database. For example, a social blogging app might use these methods together to monitor activity in the comments of a post, as shown below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> commentsRef <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;post-comments/&#39;</span> <span style="color:#ff79c6">+</span> postId);
commentsRef.on(<span style="color:#f1fa8c">&#39;child_added&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(data) {
  addCommentElement(postElement, data.key, data.val().text, data.val().author);
});

commentsRef.on(<span style="color:#f1fa8c">&#39;child_changed&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(data) {
  setCommentValues(postElement, data.key, data.val().text, data.val().author);
});

commentsRef.on(<span style="color:#f1fa8c">&#39;child_removed&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(data) {
  deleteComment(postElement, data.key);
});
</code></pre></div><h3 id="listen-for-value-events">Listen for value events</h3>
<p>While listening for child events is the recommended way to read lists of data, there are situations listening for value events on a list reference is useful.</p>
<p>Attaching a value observer to a list of data will return the entire list of data as a single snapshot which you can then loop over to access individual children.</p>
<p>Even when there is only a single match for the query, the snapshot is still a list; it just contains a single item. To access the item, you need to loop over the result:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">ref.once(<span style="color:#f1fa8c">&#39;value&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(snapshot) {
  snapshot.forEach(<span style="color:#8be9fd;font-style:italic">function</span>(childSnapshot) {
    <span style="color:#8be9fd;font-style:italic">var</span> childKey <span style="color:#ff79c6">=</span> childSnapshot.key;
    <span style="color:#8be9fd;font-style:italic">var</span> childData <span style="color:#ff79c6">=</span> childSnapshot.val();
    <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>  });
});
</code></pre></div><p>This pattern can be useful when you want to fetch all children of a list in a single operation, rather than listening for additional child added events.</p>
<h3 id="sorting-and-filtering-data">Sorting and filtering data</h3>
<p>You can use the Realtime Database Query class to retrieve data sorted by key, by value, or by value of a child. You can also filter the sorted result to a specific number of results or a range of keys or values.</p>
<h3 id="sort-data">Sort data</h3>
<p>To retrieve sorted data, start by specifying one of the order-by methods to determine how results are ordered:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">orderByChild()</td>
<td style="text-align:left">Order results by the value of a specified child key or nested child path.</td>
</tr>
<tr>
<td style="text-align:left">orderByKey()</td>
<td style="text-align:left">Order results by child keys.</td>
</tr>
<tr>
<td style="text-align:left">orderByValue()</td>
<td style="text-align:left">Order results by child values.</td>
</tr>
</tbody>
</table>
<p>You can only use one order-by method at a time. Calling an order-by method multiple times in the same query throws an error.</p>
<p>The following example demonstrates how you could retrieve a list of a user&rsquo;s top posts sorted by their star count:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> myUserId <span style="color:#ff79c6">=</span> firebase.auth().currentUser.uid;
<span style="color:#8be9fd;font-style:italic">let</span> topUserPostsRef <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;user-posts/&#39;</span> <span style="color:#ff79c6">+</span> myUserId).orderByChild(<span style="color:#f1fa8c">&#39;starCount&#39;</span>);
</code></pre></div><p>This defines a query that when combined with a child listener synchronizes the client with the user&rsquo;s posts from the path in the database based on their user ID, ordered by the number of stars each post has received. This technique of using IDs as index keys is called data fan out, you can read more about it in Structure Your Database.</p>
<p>The call to the <code>orderByChild()</code> method specifies the child key to order the results by. In this case, posts are sorted by the value of their respective &ldquo;starCount&rdquo; child. Queries can also be ordered by nested children, in case you have data that looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f1fa8c">&#34;posts&#34;</span><span style="color:#ff79c6">:</span> {
  <span style="color:#f1fa8c">&#34;ts-functions&#34;</span><span style="color:#ff79c6">:</span> {
    <span style="color:#f1fa8c">&#34;metrics&#34;</span><span style="color:#ff79c6">:</span> {
      <span style="color:#f1fa8c">&#34;views&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1200000</span>,
      <span style="color:#f1fa8c">&#34;likes&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">251000</span>,
      <span style="color:#f1fa8c">&#34;shares&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1200</span>,
    },
    <span style="color:#f1fa8c">&#34;title&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Why you should use TypeScript for writing Cloud Functions&#34;</span>,
    <span style="color:#f1fa8c">&#34;author&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Doug&#34;</span>,
  },
  <span style="color:#f1fa8c">&#34;android-arch-3&#34;</span><span style="color:#ff79c6">:</span> {
    <span style="color:#f1fa8c">&#34;metrics&#34;</span><span style="color:#ff79c6">:</span> {
      <span style="color:#f1fa8c">&#34;views&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">900000</span>,
      <span style="color:#f1fa8c">&#34;likes&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">117000</span>,
      <span style="color:#f1fa8c">&#34;shares&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">144</span>,
    },
    <span style="color:#f1fa8c">&#34;title&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Using Android Architecture Components with Firebase Realtime Database (Part 3)&#34;</span>,
    <span style="color:#f1fa8c">&#34;author&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Doug&#34;</span>,
  }
}
</code></pre></div><p>In this case, we can order our list elements by values nested under the metrics key by specifying the relative path to the nested child in our orderByChild() call.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">var</span> mostViewedPosts <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;posts&#39;</span>).orderByChild(<span style="color:#f1fa8c">&#39;metrics/views&#39;</span>);
</code></pre></div><p>For more information on how other data types are ordered, see How query data is ordered.</p>
<h3 id="filtering-data">Filtering data</h3>
<p>To filter data, you can combine any of the limit or range methods with an order-by method when constructing a query.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">limitToFirst()</td>
<td style="text-align:left">Sets the maximum number of items to return from the beginning of the ordered list of results.</td>
</tr>
<tr>
<td style="text-align:left">limitToLast()</td>
<td style="text-align:left">Sets the maximum number of items to return from the end of the ordered list of results.</td>
</tr>
<tr>
<td style="text-align:left">startAt()</td>
<td style="text-align:left">Return items greater than or equal to the specified key or value, depending on the order-by method chosen.</td>
</tr>
<tr>
<td style="text-align:left">endAt()</td>
<td style="text-align:left">Return items less than or equal to the specified key or value, depending on the order-by method chosen.</td>
</tr>
<tr>
<td style="text-align:left">equalTo()</td>
<td style="text-align:left">Return items equal to the specified key or value, depending on the order-by method chosen.</td>
</tr>
</tbody>
</table>
<p>Unlike the order-by methods, you can combine multiple limit or range functions. For example, you can combine the startAt() and endAt() methods to limit the results to a specified range of values.</p>
<h3 id="limit-the-number-of-results">Limit the number of results</h3>
<p>You can use the limitToFirst() and limitToLast() methods to set a maximum number of children to be synced for a given event. For example, if you use limitToFirst() to set a limit of 100, you initially only receive up to 100 child_added events. If you have fewer than 100 items stored in your Firebase database, a child_added event fires for each item.</p>
<p>As items change, you receive child_added events for items that enter the query and child_removed events for items that drop out of it so that the total number stays at 100.</p>
<p>The following example demonstrates how example blogging app defines a query to retrieve a list of the 100 most recent posts by all users:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> recentPostsRef <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;posts&#39;</span>).limitToLast(<span style="color:#bd93f9">100</span>);
</code></pre></div><p>This example only defines a query, to actually synchronize data it needs to have an attached listener.</p>
<h3 id="filter-by-key-or-value">Filter by key or value</h3>
<p>You can use startAt(), endAt(), and equalTo() to choose arbitrary starting, ending, and equivalence points for queries. This can be useful for paginating data or finding items with children that have a specific value.</p>
<h3 id="how-query-data-is-ordered">How query data is ordered</h3>
<p>This section explains how data is sorted by each of the order-by methods in the Query class.</p>
<h4 id="orderbychild">orderByChild</h4>
<p>When using orderByChild(), data that contains the specified child key is ordered as follows:</p>
<ol>
<li>Children with a null value for the specified child key come first.</li>
<li>Children with a value of false for the specified child key come next. If multiple children have a value of false, they are sorted lexicographically by key.</li>
<li>Children with a value of true for the specified child key come next. If multiple children have a value of true, they are sorted lexicographically by key.</li>
<li>Children with a numeric value come next, sorted in ascending order. If multiple children have the same numerical value for the specified child node, they are sorted by key.</li>
<li>Strings come after numbers and are sorted lexicographically in ascending order. If multiple children have the same value for the specified child node, they are ordered lexicographically by key.</li>
<li>Objects come last and are sorted lexicographically by key in ascending order.</li>
</ol>
<h4 id="orderbykey">orderByKey</h4>
<p>When using orderByKey() to sort your data, data is returned in ascending order by key.</p>
<ol>
<li>Children with a key that can be parsed as a 32-bit integer come first, sorted in ascending order.</li>
<li>Children with a string value as their key come next, sorted lexicographically in ascending order.</li>
</ol>
<h4 id="orderbyvalue">orderByValue</h4>
<p>When using orderByValue(), children are ordered by their value. The ordering criteria are the same as in orderByChild(), except the value of the node is used instead of the value of a specified child key.</p>
<h4 id="detach-listeners-for-lists">Detach listeners for lists</h4>
<p>Callbacks are removed by calling the off() method on your Firebase database reference.</p>
<p>You can remove a single listener by passing it as a parameter to off(). Calling off() on the location with no arguments removes all listeners at that location.</p>
<p>Calling off() on a parent listener does not automatically remove listeners registered on its child nodes; off() must also be called on any child listeners to remove the callback.</p>
<h2 id="so-lets-put-our-knowledge-to-the-test">So let&rsquo;s put our knowledge to the test</h2>
<p>We can create a simple application of a public grocery list. to demonstrate the usage of firebase realtime database. This is the simplest as it can gets with all the functionalities. So let&rsquo;s see how I did it</p>
<p><img src="/uploads/20200805_06.gif" alt="Grocery list"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#ff79c6">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#ff79c6">html</span> <span style="color:#50fa7b">lang</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;en&#34;</span>&gt;

&lt;<span style="color:#ff79c6">head</span>&gt;
    &lt;<span style="color:#ff79c6">meta</span> <span style="color:#50fa7b">charset</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#ff79c6">meta</span> <span style="color:#50fa7b">name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;viewport&#34;</span> <span style="color:#50fa7b">content</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
    &lt;<span style="color:#ff79c6">link</span> <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;stylesheet&#34;</span> <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;style.css&#34;</span>&gt;
    &lt;<span style="color:#ff79c6">title</span>&gt;Firebase Demo - Realtime Database&lt;/<span style="color:#ff79c6">title</span>&gt;
&lt;/<span style="color:#ff79c6">head</span>&gt;

&lt;<span style="color:#ff79c6">body</span>&gt;
    <span style="color:#6272a4">&lt;!-- Nothing Advanced But I Always Use a Content Section for Content --&gt;</span>
    &lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;content&#34;</span>&gt;
        &lt;<span style="color:#ff79c6">h1</span>&gt;-------------------------------------&lt;/<span style="color:#ff79c6">h1</span>&gt;
        &lt;<span style="color:#ff79c6">h2</span>&gt;Simple Grocery List&lt;/<span style="color:#ff79c6">h2</span>&gt;
        &lt;<span style="color:#ff79c6">h1</span>&gt;-------------------------------------&lt;/<span style="color:#ff79c6">h1</span>&gt;
        <span style="color:#6272a4">&lt;!-- A Simple Form to add items--&gt;</span>
        &lt;<span style="color:#ff79c6">form</span>&gt;
            &lt;<span style="color:#ff79c6">h4</span>&gt;Items&lt;/<span style="color:#ff79c6">h4</span>&gt;
            &lt;<span style="color:#ff79c6">input</span> <span style="color:#50fa7b">type</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;text&#34;</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Grocery&#34;</span> <span style="color:#50fa7b">name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Grocery&#34;</span> <span style="color:#50fa7b">placeholder</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Item&#34;</span> /&gt;
            &lt;<span style="color:#ff79c6">h4</span>&gt;Quantity&lt;/<span style="color:#ff79c6">h4</span>&gt;
            &lt;<span style="color:#ff79c6">input</span> <span style="color:#50fa7b">type</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;number&#34;</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;QTY&#34;</span> <span style="color:#50fa7b">name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;QTY&#34;</span> /&gt;
            &lt;<span style="color:#ff79c6">button</span> <span style="color:#50fa7b">onclick</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;postData();return false&#34;</span>&gt;Add item&lt;/<span style="color:#ff79c6">button</span>&gt;
        &lt;/<span style="color:#ff79c6">form</span>&gt;
        &lt;<span style="color:#ff79c6">h1</span>&gt;-------------------------------------&lt;/<span style="color:#ff79c6">h1</span>&gt;
        &lt;<span style="color:#ff79c6">h2</span>&gt;
            Grocery List
        &lt;/<span style="color:#ff79c6">h2</span>&gt;
        <span style="color:#6272a4">&lt;!-- This would hold our Data and data would be added Programmatically--&gt;</span>
        &lt;<span style="color:#ff79c6">table</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;table&#34;</span>&gt;

        &lt;/<span style="color:#ff79c6">table</span>&gt;
        &lt;<span style="color:#ff79c6">h1</span>&gt;-------------------------------------&lt;/<span style="color:#ff79c6">h1</span>&gt;
        &lt;<span style="color:#ff79c6">h2</span>&gt;
            Completed List
        &lt;/<span style="color:#ff79c6">h2</span>&gt;
        <span style="color:#6272a4">&lt;!-- This would hold our Data and data would be added Programmatically--&gt;</span>
        &lt;<span style="color:#ff79c6">table</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;table2&#34;</span>&gt;

        &lt;/<span style="color:#ff79c6">table</span>&gt;
    &lt;/<span style="color:#ff79c6">div</span>&gt;

    <span style="color:#6272a4">&lt;!-- This is the main JS file to implement Firebase --&gt;</span>
    &lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
    <span style="color:#6272a4">&lt;!-- Now you can add any modular firebase services in this case Realtime Database --&gt;</span>
    &lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;

    <span style="color:#6272a4">&lt;!-- TODO: Add SDKs for Firebase products that you want to use
</span><span style="color:#6272a4">     https://firebase.google.com/docs/web/setup#available-libraries --&gt;</span>
    &lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://www.gstatic.com/firebasejs/7.17.1/firebase-analytics.js&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;

    &lt;<span style="color:#ff79c6">script</span>&gt;
        <span style="color:#6272a4">// Your web app&#39;s Firebase configuration Should Be added Here
</span><span style="color:#6272a4"></span>        <span style="color:#8be9fd;font-style:italic">var</span> firebaseConfig <span style="color:#ff79c6">=</span> {
            apiKey<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;AIzaSyDOMUpm4WNldKOVuQCeizCTZAUdSRLqAeU&#34;</span>,
            authDomain<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;tecinpact-demo.firebaseapp.com&#34;</span>,
            databaseURL<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;https://tecinpact-demo.firebaseio.com&#34;</span>,
            projectId<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;tecinpact-demo&#34;</span>,
            storageBucket<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;tecinpact-demo.appspot.com&#34;</span>,
            messagingSenderId<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;977048224763&#34;</span>,
            appId<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;1:977048224763:web:4891159dda17b97eb8c15e&#34;</span>,
            measurementId<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;G-RZPCV71CCZ&#34;</span>
        };
        <span style="color:#6272a4">// Initialize Firebase
</span><span style="color:#6272a4"></span>        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    &lt;/<span style="color:#ff79c6">script</span>&gt;
    &lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;app.js&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
&lt;/<span style="color:#ff79c6">body</span>&gt;

&lt;/<span style="color:#ff79c6">html</span>&gt;
</code></pre></div><p>I Added comments Explaining the HTML code and it&rsquo;s self explainatory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scss" data-lang="scss"><span style="color:#ff79c6">*</span> {
    <span style="color:#50fa7b">font-family</span><span style="color:#ff79c6">:</span> monospace;
}

<span style="color:#50fa7b">.content</span> {
    <span style="color:#50fa7b">display</span><span style="color:#ff79c6">:</span> grid;
    <span style="color:#50fa7b">place-items</span><span style="color:#ff79c6">:</span> center;

    <span style="color:#ff79c6">form</span> {
        <span style="color:#ff79c6">@extend</span> <span style="color:#50fa7b">.content</span>;

        <span style="color:#ff79c6">input</span> {
            <span style="color:#50fa7b">padding</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">10</span><span style="color:#8be9fd">px</span> <span style="color:#bd93f9">35</span><span style="color:#8be9fd">px</span>;
            <span style="color:#50fa7b">margin</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">5</span><span style="color:#8be9fd">px</span>;
        }
    }

    <span style="color:#ff79c6">table</span> {
        <span style="color:#50fa7b">width</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">100</span><span style="color:#8be9fd">%</span>;
        <span style="color:#50fa7b">max-width</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">350</span><span style="color:#8be9fd">px</span>;
        <span style="color:#50fa7b">text-align</span><span style="color:#ff79c6">:</span> left;
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">/* A Simple Function to push new data */</span>
postData <span style="color:#ff79c6">=</span> () =&gt; {
    <span style="color:#8be9fd;font-style:italic">let</span> gitem <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#34;Grocery&#34;</span>).value
    <span style="color:#8be9fd;font-style:italic">let</span> gqty <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#34;QTY&#34;</span>).value
    <span style="color:#6272a4">/* Resetting Input Boxes after submission */</span>
    <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#34;Grocery&#34;</span>).value <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;&#34;</span>
    <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#34;QTY&#34;</span>).value <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>
    <span style="color:#6272a4">/* Pushing data to the Database&#39;s GroceryList Directory */</span>
    <span style="color:#8be9fd;font-style:italic">let</span> newItem <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;/GroceryList/&#39;</span>).push();
    newItem.set({
        item<span style="color:#ff79c6">:</span> gitem,
        qty<span style="color:#ff79c6">:</span> gqty
    });
}

<span style="color:#6272a4">/* Listner to get data from the Database As soon as it&#39;s added */</span>
<span style="color:#8be9fd;font-style:italic">let</span> items <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;GroceryList/&#39;</span>);
items.on(<span style="color:#f1fa8c">&#39;value&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span> (recivedItems) {
    <span style="color:#6272a4">/* Appends data to an array and then we can set the whole array to the table */</span>
    <span style="color:#8be9fd;font-style:italic">let</span> htmlArray <span style="color:#ff79c6">=</span> [<span style="color:#f1fa8c">`&lt;tr&gt;&lt;th&gt;Items&lt;/th&gt;&lt;th&gt;QTY&lt;/th&gt;&lt;th&gt;Got It?&lt;/th&gt;&lt;/tr&gt;`</span>]
    recivedItems.forEach(item =&gt; {
        <span style="color:#6272a4">/* Formatting Received Data */</span>
        htmlArray.push(<span style="color:#f1fa8c">`&lt;tr&gt;&lt;td&gt;</span><span style="color:#f1fa8c">${</span>item.val()[<span style="color:#f1fa8c">&#34;item&#34;</span>]<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&lt;/td&gt;&lt;td&gt;</span><span style="color:#f1fa8c">${</span>item.val()[<span style="color:#f1fa8c">&#34;qty&#34;</span>]<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&lt;/td&gt;&lt;td&gt;&lt;button onclick=&#34;removedList(&#39;</span><span style="color:#f1fa8c">${</span>item.key<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#39;)&#34;&gt;✔️&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;`</span>)
    });
    <span style="color:#6272a4">/* Setting Data to table */</span>
    <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#39;table&#39;</span>).innerHTML <span style="color:#ff79c6">=</span> htmlArray.join(<span style="color:#f1fa8c">&#39;&#39;</span>)
});

<span style="color:#6272a4">/* Adding data to another list when completed */</span>
removedList <span style="color:#ff79c6">=</span> (id) =&gt; {
    <span style="color:#8be9fd;font-style:italic">let</span> item <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">`GroceryList/</span><span style="color:#f1fa8c">${</span>id<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>)
    item.on(<span style="color:#f1fa8c">&#39;value&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span> (snapshot) {
        <span style="color:#6272a4">/* Getting data and submitting it to Removed List */</span>
        <span style="color:#8be9fd;font-style:italic">let</span> newCompletedItem <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;/GroceryRemovedList/&#39;</span>).push();
        newCompletedItem.set(snapshot.val());
    });
    <span style="color:#6272a4">/* Removing from the first list */</span>
    removeEntity(<span style="color:#f1fa8c">&#34;GroceryList&#34;</span>, <span style="color:#f1fa8c">`</span><span style="color:#f1fa8c">${</span>id<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>)
}

<span style="color:#6272a4">/* Listner for the completed List */</span>
<span style="color:#8be9fd;font-style:italic">let</span> ritems <span style="color:#ff79c6">=</span> firebase.database().ref(<span style="color:#f1fa8c">&#39;GroceryRemovedList/&#39;</span>);
ritems.on(<span style="color:#f1fa8c">&#39;value&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span> (recivedItems) {
    <span style="color:#8be9fd;font-style:italic">let</span> htmlArray <span style="color:#ff79c6">=</span> [<span style="color:#f1fa8c">`&lt;tr&gt;&lt;th&gt;Items&lt;/th&gt;&lt;th&gt;QTY&lt;/th&gt;&lt;th&gt;Remove It?&lt;/th&gt;&lt;/tr&gt;`</span>]
    recivedItems.forEach(item =&gt; {
        htmlArray.push(<span style="color:#f1fa8c">`&lt;tr&gt;&lt;td style=&#34;text-decoration: line-through;&#34;&gt;</span><span style="color:#f1fa8c">${</span>item.val()[<span style="color:#f1fa8c">&#34;item&#34;</span>]<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&lt;/td&gt;&lt;td&gt;</span><span style="color:#f1fa8c">${</span>item.val()[<span style="color:#f1fa8c">&#34;qty&#34;</span>]<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&lt;/td&gt;&lt;td&gt;&lt;button onclick=&#34;removeEntity(&#39;GroceryRemovedList&#39;,&#39;</span><span style="color:#f1fa8c">${</span>item.key<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#39;)&#34;&gt;❌&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;`</span>)
    });
    <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#39;table2&#39;</span>).innerHTML <span style="color:#ff79c6">=</span> htmlArray.join(<span style="color:#f1fa8c">&#39;&#39;</span>)
});

<span style="color:#6272a4">/* This can delete items from the database */</span>
removeEntity <span style="color:#ff79c6">=</span> (list, id) =&gt; {
    firebase.database().ref(<span style="color:#f1fa8c">`</span><span style="color:#f1fa8c">${</span>list<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/</span><span style="color:#f1fa8c">${</span>id<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>).remove()
}
</code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>Well well well, Here we are at the end of another guide, Firebase realtime database is suitable for many applications, after most of these guides have been overed, We&rsquo;re going to make some sample applications to demonstrate the usages of the applications. So stay tuned and don&rsquo;t be shy to ask anything you get doubts on, You are here to learn, so take the advantage.</p>

  </article><div class="bg-blue-100 dark:bg-gray-900">
  <div class="container px-6 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
    <div>
      <div class="text-2xl font-bold mb-2">Follow me</div>
      <p class="opacity-60">I work on everything coding. Check out my blog and other projects.</p>
    </div>
    <ul class="flex justify-center gap-4">
      
      
      
      <li>
        <a
          href="https://github.com/nushankodikara"
          target="_blank"
          rel="noopener"
          aria-label="GitHub"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/github--v1.png"/>
        </a>
      </li>
      
      
      
      <li>
        <a
          href="https://www.instagram.com/____nushan_/"
          target="_blank"
          rel="noopener"
          aria-label="Instagram"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/instagram-new.png"/>
        </a>
      </li>
      
      
      <li>
        <a
          href="https://www.facebook.com/kodikara.nushan"
          target="_blank"
          rel="noopener"
          aria-label="Facebook"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/facebook-new.png"/>
        </a>
      </li>
      
      
      <li>
        <a
          href="https://t.me/nushan_kodikara"
          target="_blank"
          rel="noopener"
          aria-label="telegram"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/telegram-app.png"/>
        </a>
      </li>
      
      
      <li>
        <a
          href="https://www.tiktok.com/@nushan.kodikara"
          target="_blank"
          rel="noopener"
          aria-label="tiktok"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/tiktok.png"/>
        </a>
      </li>
      
    </ul>
  </div>
</div>
    </main><footer class="container p-6 mx-auto flex justify-between items-center">
  <span class="text-sm font-light">
    
    Copyright © 2022 - Nushan Kodikara · All rights reserved
    
  </span>
  <span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-1 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 15l-6 -6l-6 6h12" />
    </svg>
  </span>
</footer>

<div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden">
  <div class="container max-w-3xl mx-auto p-12">
    <div class="relative">
      <div class="my-4 text-center text-2xl font-bold">Search</div>

      <span class="p-2 absolute right-0 top-0 cursor-pointer close-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <input type="search" class="py-2 px-3 w-full dark:text-black border rounded-lg dark:border-transparent"
      placeholder="Enter search query" />

    <div class="search-results text-lg font-medium my-4 hidden">Results</div>
    <ul class="search-list my-2">

    </ul>

    <div class="no-results text-center my-8 hidden">
      <div class="text-xl font-semibold mb-2">No results found</div>
      <p class="font-light text-sm">Try adjusting your search query</p>
    </div>
  </div>
</div>





<script src="https://www.nushankodikara.com/js/scripts.min.js"></script>






<script>
  
  const darkmode = document.querySelector('.toggle-dark-mode');
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('darkmode', 'light')
    } else {
      document.documentElement.classList.add('dark')
      localStorage.setItem('darkmode', 'dark')
    }
  }
  if (darkmode) {
    darkmode.addEventListener('click', toggleDarkMode);
  }

  const isDark = localStorage.getItem('darkmode');
  if (isDark && isDark === 'dark') {
    toggleDarkMode();
  }
</script>
</body>
</html>
