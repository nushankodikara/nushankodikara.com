<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="/favicon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
        rel="stylesheet"
    />

    <title>
        Js for Modern Web Development (Part 1) - Nushan Kodikara
    </title>
    <meta
        name="description"
        content="JS For modern web development"
    /><meta name="generator" content="Hugo 0.92.2" /><link
        rel="stylesheet"
        href="https://www.nushankodikara.com/css/styles.min.9eb1933d74bc51f90a99828e3b839009c326aa4d8dd5ec0ac6168f963105e957.css"
        integrity="sha256-nrGTPXS8UfkKmYKOO4OQCcMmqk2N1ewKxhaPljEF6Vc="
    />
    
     <meta property="og:title" content="Js for Modern Web Development (Part 1)" />
<meta property="og:description" content="JS For modern web development" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.nushankodikara.com/blog/js-for-modern-web-development/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2020-07-23T11:52:24+05:30" />
<meta property="article:modified_time" content="2020-07-23T11:52:24+05:30" />

 <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Js for Modern Web Development (Part 1)"/>
<meta name="twitter:description" content="JS For modern web development"/>
 <meta itemprop="name" content="Js for Modern Web Development (Part 1)">
<meta itemprop="description" content="JS For modern web development"><meta itemprop="datePublished" content="2020-07-23T11:52:24+05:30" />
<meta itemprop="dateModified" content="2020-07-23T11:52:24+05:30" />
<meta itemprop="wordCount" content="31676">
<meta itemprop="keywords" content="web development,Javascript,Zero To Hero,Crash Course," />
</head>
<body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-around md:justify-between gap-4 flex-wrap p-6 mx-auto">
  <a href="https://www.nushankodikara.com/" class="capitalize font-extrabold text-2xl">
    Nushan Kodikara
  </a>
  <ul class="flex items-center gap-4 lg:gap-6">

    
    <li><a href="/blog">Blog</a></li>
    

    

    
    <li class="grid place-items-center">
      <span class="open-search inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="10" cy="10" r="7" />
          <line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      </span>
    </li>
    

    
    <li class="grid place-items-center">
      <span class="toggle-dark-mode inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="3" />
          <line x1="12" y1="5" x2="12" y2="5.01" />
          <line x1="17" y1="7" x2="17" y2="7.01" />
          <line x1="19" y1="12" x2="19" y2="12.01" />
          <line x1="17" y1="17" x2="17" y2="17.01" />
          <line x1="12" y1="19" x2="12" y2="19.01" />
          <line x1="7" y1="17" x2="7" y2="17.01" />
          <line x1="5" y1="12" x2="5" y2="12.01" />
          <line x1="7" y1="7" x2="7" y2="7.01" />
        </svg>
      </span>
    </li>
    
  </ul>
</header><main class="flex-1">
  
  

  
  <div class="relative max-w-5xl mx-auto px-4">
    <img src="https://unsplash.com/photos/i25aqE_YUZs/download?ixid=MnwxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNjM5NTkyMjY1&amp;force=true&amp;w=640" class="rounded-lg shadow-sm w-full object-contain" />
    <div class="absolute top-4 right-8 rounded shadow bg-white text-gray-900 dark:bg-gray-900 dark:text-white px-2 py-0.5">
      
  
    July 23, 2020
  


    </div>
  </div>
  

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">Js for Modern Web Development (Part 1)</h1>
    <h5 class="text-sm flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      Posted on 
  
    July 23, 2020
  


      
        &nbsp;&bull;&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
      149&nbsp;minutes
      &nbsp;&bull;
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <line x1="3" y1="6" x2="3" y2="19" />
        <line x1="12" y1="6" x2="12" y2="19" />
        <line x1="21" y1="6" x2="21" y2="19" />
      </svg>
      31676&nbsp;words
      
    </h5>

    <h2 id="introduction">Introduction</h2>
<p>Here we are at the end of the modern web development course, At the right basics of the language which make the web interactive and functional. JS Is the back-born of the modern Internet, Why do I say so? Because we can do literally Anything you imagine. Without further explanation, Let&rsquo;s start with the course. Before getting here, Please follow <a href="/post/html-for-modern-web-development/">HTML</a> <a href="/post/css-for-modern-web-development/">CSS</a> and <a href="/post/scss-for-modern-web-development/">SCSS</a> guides.</p>
<h2 id="hello-world">Hello, world!</h2>
<p>Javascript is fully functional with HTML and CSS, so first, Let&rsquo;s create our demo document with HTML CSS And JS. I&rsquo;m creating 3 files in the root folder. index.html, style.css, style.scss and index.js And linking the css in the head, and the JS in the bottom of the body. pro tip Always link your js in the end of the body tag, so the JS would be load after the HTML elements and you won&rsquo;t face any DOM issues regarding load time or so, I&rsquo;ll explain later and also you can link JS in head but I don&rsquo;t recommend it. Let&rsquo;s do it in the ways of modern web development.</p>
<p>Now, Javascript files can be linked using script element and using a src attribute. Now that out to the way</p>
<p><img src="/uploads/20200723_01.png" alt="Root">
<img src="/uploads/20200723_02.png" alt="Root"></p>
<p>Let&rsquo;s start with our first code. Remember we don&rsquo;t have a specific curve to learn JS so we burst in. Hold tight and let&rsquo;s explore.</p>
<p>I&rsquo;m placing an empty h1 element in the HTML page with the id of hello</p>
<blockquote>
<pre><code>  &lt;!DOCTYPE html&gt;
  &lt;html lang=&quot;en&quot;&gt;
  
  &lt;head&gt;
      &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
      &lt;title&gt;JS Document&lt;/title&gt;
  &lt;/head&gt;
  
  &lt;body&gt;
      &lt;h1 id=&quot;hello&quot;&gt;&lt;/h1&gt;
      &lt;script src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
  
  &lt;/html&gt;
</code></pre>
</blockquote>
<p>Using SCSS I&rsquo;m giving the body a grid display and item alignment of center</p>
<blockquote>
<pre><code>  body {
      display: grid;
      place-items: center;
  }
</code></pre>
</blockquote>
<p>Now for our JS file, I&rsquo;m placing down a function which can find elements by ID and using that I&rsquo;m changing the inner HTML of that element to Hello World</p>
<blockquote>
<pre><code>  document.getElementById(&quot;hello&quot;).innerHTML = &quot;Hello World&quot;;
</code></pre>
</blockquote>
<p>Now you should get something like this as the output</p>
<p><img src="/uploads/20200723_03.png" alt="Root"></p>
<p>That&rsquo;s All for the hello world! And Welcome to the Javascript community.</p>
<h2 id="before-coding">Before coding</h2>
<p>JS has some limitations and node.js makes those limitations go away, with that we&rsquo;re using JS as a full fledge programming language and we&rsquo;ll explore the possibilities in another tutorial.</p>
<h2 id="code-structure">Code structure</h2>
<p>The first thing we&rsquo;ll study is the building blocks of code.</p>
<h3 id="statements">Statements</h3>
<p>Statements are syntax constructs and commands that perform actions.</p>
<p>We&rsquo;ve already seen a statement, <code>alert('Hello, world!')</code>, which shows the message &ldquo;Hello, world!&rdquo;.</p>
<p>We can have as many statements in our code as we want. Statements can be separated with a semicolon.</p>
<p>For example, here we split &ldquo;Hello World&rdquo; into two alerts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>); alert(<span style="color:#f1fa8c">&#39;World&#39;</span>);
</code></pre></div><p>Usually, statements are written on separate lines to make the code more readable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>);
alert(<span style="color:#f1fa8c">&#39;World&#39;</span>);
</code></pre></div><h3 id="semicolons-semicolon">Semicolons [#semicolon]</h3>
<p>A semicolon may be omitted in most cases when a line break exists.</p>
<p>This would also work:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>)
alert(<span style="color:#f1fa8c">&#39;World&#39;</span>)
</code></pre></div><p>Here, JavaScript interprets the line break as an &ldquo;implicit&rdquo; semicolon. This is called an <a href="https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion">automatic semicolon insertion</a>.</p>
<p><strong>In most cases, a newline implies a semicolon. But &ldquo;in most cases&rdquo; does not mean &ldquo;always&rdquo;!</strong></p>
<p>There are cases when a newline does not mean a semicolon. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#bd93f9">3</span> <span style="color:#ff79c6">+</span>
<span style="color:#bd93f9">1</span>
<span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>);
</code></pre></div><p>The code outputs <code>6</code> because JavaScript does not insert semicolons here. It is intuitively obvious that if the line ends with a plus <code>&quot;+&quot;</code>, then it is an &ldquo;incomplete expression&rdquo;, so the semicolon is not required. And in this case that works as intended.</p>
<p><strong>But there are situations where JavaScript &ldquo;fails&rdquo; to assume a semicolon where it is really needed.</strong></p>
<p>Errors which occur in such cases are quite hard to find and fix.</p>
<p>If you&rsquo;re curious to see a concrete example of such an error, check this code out:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">[<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>].forEach(alert)
</code></pre></div><p>No need to think about the meaning of the brackets <code>[]</code> and <code>forEach</code> yet. We&rsquo;ll study them later. For now, just remember the result of the code: it shows <code>1</code> then <code>2</code>.</p>
<p>Now, let&rsquo;s add an <code>alert</code> before the code and <em>not</em> finish it with a semicolon:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#34;There will be an error&#34;</span>)

[<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>].forEach(alert)
</code></pre></div><p>Now if we run the code, only the first <code>alert</code> is shown and then we have an error!</p>
<p>But everything is fine again if we add a semicolon after <code>alert</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#34;All fine now&#34;</span>);

[<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>].forEach(alert)  
</code></pre></div><p>Now we have the &ldquo;All fine now&rdquo; message followed by <code>1</code> and <code>2</code>.</p>
<p>The error in the no-semicolon variant occurs because JavaScript does not assume a semicolon before square brackets <code>[...]</code>.</p>
<p>So, because the semicolon is not auto-inserted, the code in the first example is treated as a single statement. Here&rsquo;s how the engine sees it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#34;There will be an error&#34;</span>)[<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>].forEach(alert)
</code></pre></div><p>But it should be two separate statements, not one. Such a merging in this case is just wrong, hence the error. This can happen in other situations.</p>
<p>We recommend putting semicolons between statements even if they are separated by newlines. This rule is widely adopted by the community. Let&rsquo;s note once again &ndash; <em>it is possible</em> to leave out semicolons most of the time. But it&rsquo;s safer &ndash; especially for a beginner &ndash; to use them.</p>
<h3 id="comments-code-comments">Comments [#code-comments]</h3>
<p>As time goes on, programs become more and more complex. It becomes necessary to add <em>comments</em> which describe what the code does and why.</p>
<p>Comments can be put into any place of a script. They don&rsquo;t affect its execution because the engine simply ignores them.</p>
<p><strong>One-line comments start with two forward slash characters <code>//</code>.</strong></p>
<p>The rest of the line is a comment. It may occupy a full line of its own or follow a statement.</p>
<p>Like here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// This comment occupies a line of its own
</span><span style="color:#6272a4"></span>alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>);

alert(<span style="color:#f1fa8c">&#39;World&#39;</span>); <span style="color:#6272a4">// This comment follows the statement
</span></code></pre></div><p><strong>Multiline comments start with a forward slash and an asterisk <code>/*</code> and end with an asterisk and a forward slash <code>*/</code>.</strong></p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">/* An example with two messages.
</span><span style="color:#6272a4">This is a multiline comment.
</span><span style="color:#6272a4">*/</span>
alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>);
alert(<span style="color:#f1fa8c">&#39;World&#39;</span>);
</code></pre></div><p>The content of comments is ignored, so if we put code inside <code>/* &hellip; */</code>, it won&rsquo;t execute.</p>
<p>Sometimes it can be handy to temporarily disable a part of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">/* Commenting out the code
</span><span style="color:#6272a4">alert(&#39;Hello&#39;);
</span><span style="color:#6272a4">*/</span>
alert(<span style="color:#f1fa8c">&#39;World&#39;</span>);
</code></pre></div><p>In most editors, a line of code can be commented out by pressing the <code>key:Ctrl+/</code> hotkey for a single-line comment and something like <code>key:Ctrl+Shift+/</code> &ndash; for multiline comments (select a piece of code and press the hotkey). For Mac, try <code>key:Cmd</code> instead of <code>key:Ctrl</code> and <code>key:Option</code> instead of <code>key:Shift</code>.</p>
<p>There may not be <code>/*...*/</code> inside another <code>/*...*/</code>.</p>
<p>Such code will die with an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">/*
</span><span style="color:#6272a4">  /* nested comment ?!? */</span>
<span style="color:#ff79c6">*</span>/
alert( <span style="color:#f1fa8c">&#39;World&#39;</span> );
</code></pre></div><p>Please, don&rsquo;t hesitate to comment your code.</p>
<p>Comments increase the overall code footprint, but that&rsquo;s not a problem at all. There are many tools which minify code before publishing to a production server. They remove comments, so they don&rsquo;t appear in the working scripts. Therefore, comments do not have negative effects on production at all.</p>
<p>Later in the tutorial there will be a chapter <a href="info:code-quality">info:code-quality</a> that also explains how to write better comments.</p>
<h2 id="the-modern-mode-use-strict">The modern mode, &ldquo;use strict&rdquo;</h2>
<p>For a long time, JavaScript evolved without compatibility issues. New features were added to the language while old functionality didn&rsquo;t change.</p>
<p>That had the benefit of never breaking existing code. But the downside was that any mistake or an imperfect decision made by JavaScript&rsquo;s creators got stuck in the language forever.</p>
<p>This was the case until 2009 when ECMAScript 5 (ES5) appeared. It added new features to the language and modified some of the existing ones. To keep the old code working, most such modifications are off by default. You need to explicitly enable them with a special directive: <code>&quot;use strict&quot;</code>.</p>
<h3 id="use-strict">&ldquo;use strict&rdquo;</h3>
<p>The directive looks like a string: <code>&quot;use strict&quot;</code> or <code>'use strict'</code>. When it is located at the top of a script, the whole script works the &ldquo;modern&rdquo; way.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f1fa8c">&#34;use strict&#34;</span>;

<span style="color:#6272a4">// this code works the modern way
</span><span style="color:#6272a4"></span>...
</code></pre></div><p>Quite soon we&rsquo;re going to learn functions (a way to group commands), so let&rsquo;s note in advance that <code>&quot;use strict&quot;</code> can be put at the beginning of a function. Doing that enables strict mode in that function only. But usually people use it for the whole script.</p>
<p>Please make sure that <code>&quot;use strict&quot;</code> is at the top of your scripts, otherwise strict mode may not be enabled.</p>
<p>Strict mode isn&rsquo;t enabled here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#34;some code&#34;</span>);
<span style="color:#6272a4">// &#34;use strict&#34; below is ignored--it must be at the top
</span><span style="color:#6272a4"></span>
<span style="color:#f1fa8c">&#34;use strict&#34;</span>;

<span style="color:#6272a4">// strict mode is not activated
</span></code></pre></div><p>Only comments may appear above <code>&quot;use strict&quot;</code>.</p>
<p>There is no directive like <code>&quot;no use strict&quot;</code> that reverts the engine to old behavior.</p>
<p>Once we enter strict mode, there&rsquo;s no going back.</p>
<h3 id="browser-console">Browser console</h3>
<p>When you use a <a href="info:devtools">developer console</a> to run code, please note that it doesn&rsquo;t <code>use strict</code> by default.</p>
<p>Sometimes, when <code>use strict</code> makes a difference, you&rsquo;ll get incorrect results.</p>
<p>So, how to actually <code>use strict</code> in the console?</p>
<p>First, you can try to press <code>key:Shift+Enter</code> to input multiple lines, and put <code>use strict</code> on top, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f1fa8c">&#39;use strict&#39;</span>; <span style="color:#ff79c6">&lt;</span>Shift<span style="color:#ff79c6">+</span>Enter <span style="color:#ff79c6">for</span> a newline<span style="color:#ff79c6">&gt;</span>
<span style="color:#6272a4">//  ...your code
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">&lt;</span>Enter to run<span style="color:#ff79c6">&gt;</span>
</code></pre></div><p>It works in most browsers, namely Firefox and Chrome.</p>
<p>If it doesn&rsquo;t, e.g. in an old browser, there&rsquo;s an ugly, but reliable way to ensure <code>use strict</code>. Put it inside this kind of wrapper:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">(<span style="color:#8be9fd;font-style:italic">function</span>() {
  <span style="color:#f1fa8c">&#39;use strict&#39;</span>;

  <span style="color:#6272a4">// ...your code here...
</span><span style="color:#6272a4"></span>})()
</code></pre></div><h3 id="should-we-use-strict">Should we &ldquo;use strict&rdquo;?</h3>
<p>The question may sound obvious, but it&rsquo;s not so.</p>
<p>One could recommend to start scripts with <code>&quot;use strict&quot;</code>&hellip; But you know what&rsquo;s cool?</p>
<p>Modern JavaScript supports &ldquo;classes&rdquo; and &ldquo;modules&rdquo; - advanced language structures (we&rsquo;ll surely get to them), that enable <code>use strict</code> automatically. So we don&rsquo;t need to add the <code>&quot;use strict&quot;</code> directive, if we use them.</p>
<p><strong>So, for now <code>&quot;use strict&quot;;</code> is a welcome guest at the top of your scripts. Later, when your code is all in classes and modules, you may omit it.</strong></p>
<p>As of now, we&rsquo;ve got to know about <code>use strict</code> in general.</p>
<p>In the next chapters, as we learn language features, we&rsquo;ll see the differences between the strict and old modes. Luckily, there aren&rsquo;t many and they actually make our lives better.</p>
<p>All examples in this tutorial assume strict mode unless (very rarely) specified otherwise.</p>
<h2 id="variables">Variables</h2>
<p>Most of the time, a JavaScript application needs to work with information. Here are two examples:</p>
<ol>
<li>An online shop &ndash; the information might include goods being sold and a shopping cart.</li>
<li>A chat application &ndash; the information might include users, messages, and much more.</li>
</ol>
<p>Variables are used to store this information.</p>
<h3 id="a-variable">A variable</h3>
<p>A <a href="https://en.wikipedia.org/wiki/Variable_(computer_science)">variable</a> is a &ldquo;named storage&rdquo; for data. We can use variables to store goodies, visitors, and other data.</p>
<p>To create a variable in JavaScript, use the <code>let</code> keyword.</p>
<p>The statement below creates (in other words: <em>declares</em>) a variable with the name &ldquo;message&rdquo;:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message;
</code></pre></div><p>Now, we can put some data into it by using the assignment operator <code>=</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message;


message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello&#39;</span>; <span style="color:#6272a4">// store the string
</span><span style="color:#6272a4"></span>
</code></pre></div><p>The string is now saved into the memory area associated with the variable. We can access it using the variable name:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message;
message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello!&#39;</span>;


alert(message); <span style="color:#6272a4">// shows the variable content
</span><span style="color:#6272a4"></span>
</code></pre></div><p>To be concise, we can combine the variable declaration and assignment into a single line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello!&#39;</span>; <span style="color:#6272a4">// define the variable and assign the value
</span><span style="color:#6272a4"></span>
alert(message); <span style="color:#6272a4">// Hello!
</span></code></pre></div><p>We can also declare multiple variables in one line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>, age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">25</span>, message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello&#39;</span>;
</code></pre></div><p>That might seem shorter, but we don&rsquo;t recommend it. For the sake of better readability, please use a single line per variable.</p>
<p>The multiline variant is a bit longer, but easier to read:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">25</span>;
<span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello&#39;</span>;
</code></pre></div><p>Some people also define multiple variables in this multiline style:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>,
  age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">25</span>,
  message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello&#39;</span>;
</code></pre></div><p>&hellip;Or even in the &ldquo;comma-first&rdquo; style:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>
  , age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">25</span>
  , message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello&#39;</span>;
</code></pre></div><p>Technically, all these variants do the same thing. So, it&rsquo;s a matter of personal taste and aesthetics.</p>
<p>In older scripts, you may also find another keyword: <code>var</code> instead of <code>let</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">var</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello&#39;</span>;
</code></pre></div><p>The <code>var</code> keyword is <em>almost</em> the same as <code>let</code>. It also declares a variable, but in a slightly different, &ldquo;old-school&rdquo; way.</p>
<p>There are subtle differences between <code>let</code> and <code>var</code>, but they do not matter for us yet. We&rsquo;ll cover them in detail in the chapter <a href="info:var">info:var</a>.</p>
<h3 id="a-real-life-analogy">A real-life analogy</h3>
<p>We can easily grasp the concept of a &ldquo;variable&rdquo; if we imagine it as a &ldquo;box&rdquo; for data, with a uniquely-named sticker on it.</p>
<p>For instance, the variable <code>message</code> can be imagined as a box labeled <code>&quot;message&quot;</code> with the value <code>&quot;Hello!&quot;</code> in it:</p>
<p>We can put any value in the box.</p>
<p>We can also change it as many times as we want:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message;

message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello!&#39;</span>;

message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;World!&#39;</span>; <span style="color:#6272a4">// value changed
</span><span style="color:#6272a4"></span>
alert(message);
</code></pre></div><p>When the value is changed, the old data is removed from the variable:</p>
<p>We can also declare two variables and copy data from one into the other.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> hello <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello world!&#39;</span>;

<span style="color:#8be9fd;font-style:italic">let</span> message;


<span style="color:#6272a4">// copy &#39;Hello world&#39; from hello into message
</span><span style="color:#6272a4"></span>message <span style="color:#ff79c6">=</span> hello;


<span style="color:#6272a4">// now two variables hold the same data
</span><span style="color:#6272a4"></span>alert(hello); <span style="color:#6272a4">// Hello world!
</span><span style="color:#6272a4"></span>alert(message); <span style="color:#6272a4">// Hello world!
</span></code></pre></div><p>A variable should be declared only once.</p>
<p>A repeated declaration of the same variable is an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;This&#34;</span>;

<span style="color:#6272a4">// repeated &#39;let&#39; leads to an error
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;That&#34;</span>; <span style="color:#6272a4">// SyntaxError: &#39;message&#39; has already been declared
</span></code></pre></div><p>So, we should declare a variable once and then refer to it without <code>let</code>.</p>
<p>It&rsquo;s interesting to note that there exist <a href="https://en.wikipedia.org/wiki/Functional_programming">functional</a> programming languages, like <a href="http://www.scala-lang.org/">Scala</a> or <a href="http://www.erlang.org/">Erlang</a> that forbid changing variable values.</p>
<p>In such languages, once the value is stored &ldquo;in the box&rdquo;, it&rsquo;s there forever. If we need to store something else, the language forces us to create a new box (declare a new variable). We can&rsquo;t reuse the old one.</p>
<p>Though it may seem a little odd at first sight, these languages are quite capable of serious development. More than that, there are areas like parallel computations where this limitation confers certain benefits. Studying such a language (even if you&rsquo;re not planning to use it soon) is recommended to broaden the mind.</p>
<h3 id="variable-naming-variable-naming">Variable naming [#variable-naming]</h3>
<p>There are two limitations on variable names in JavaScript:</p>
<ol>
<li>The name must contain only letters, digits, or the symbols <code>$</code> and <code>_</code>.</li>
<li>The first character must not be a digit.</li>
</ol>
<p>Examples of valid names:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> userName;
<span style="color:#8be9fd;font-style:italic">let</span> test123;
</code></pre></div><p>When the name contains multiple words, <a href="https://en.wikipedia.org/wiki/CamelCase">camelCase</a> is commonly used. That is: words go one after another, each word except first starting with a capital letter: <code>myVeryLongName</code>.</p>
<p>What&rsquo;s interesting &ndash; the dollar sign <code>'$'</code> and the underscore <code>'_'</code> can also be used in names. They are regular symbols, just like letters, without any special meaning.</p>
<p>These names are valid:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> $ <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>; <span style="color:#6272a4">// declared a variable with the name &#34;$&#34;
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> _ <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>; <span style="color:#6272a4">// and now a variable with the name &#34;_&#34;
</span><span style="color:#6272a4"></span>
alert($ <span style="color:#ff79c6">+</span> _); <span style="color:#6272a4">// 3
</span></code></pre></div><p>Examples of incorrect variable names:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#bd93f9">1</span>a; <span style="color:#6272a4">// cannot start with a digit
</span><span style="color:#6272a4"></span>
<span style="color:#8be9fd;font-style:italic">let</span> my<span style="color:#ff79c6">-</span>name; <span style="color:#6272a4">// hyphens &#39;-&#39; aren&#39;t allowed in the name
</span></code></pre></div><p>Variables named <code>apple</code> and <code>AppLE</code> are two different variables.</p>
<p>It is possible to use any language, including cyrillic letters or even hieroglyphs, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> имя <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;...&#39;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> 我 <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;...&#39;</span>;
</code></pre></div><p>Technically, there is no error here. Such names are allowed, but there is an international convention to use English in variable names. Even if we&rsquo;re writing a small script, it may have a long life ahead. People from other countries may need to read it some time.</p>
<p>There is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords">list of reserved words</a>, which cannot be used as variable names because they are used by the language itself.</p>
<p>For example: <code>let</code>, <code>class</code>, <code>return</code>, and <code>function</code> are reserved.</p>
<p>The code below gives a syntax error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>; <span style="color:#6272a4">// can&#39;t name a variable &#34;let&#34;, error!
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>; <span style="color:#6272a4">// also can&#39;t name it &#34;return&#34;, error!
</span></code></pre></div><p>Normally, we need to define a variable before using it. But in the old times, it was technically possible to create a variable by a mere assignment of the value without using <code>let</code>. This still works now if we don&rsquo;t put <code>use strict</code> in our scripts to maintain compatibility with old scripts.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// note: no &#34;use strict&#34; in this example
</span><span style="color:#6272a4"></span>
num <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>; <span style="color:#6272a4">// the variable &#34;num&#34; is created if it didn&#39;t exist
</span><span style="color:#6272a4"></span>
alert(num); <span style="color:#6272a4">// 5
</span></code></pre></div><p>This is a bad practice and would cause an error in strict mode:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f1fa8c">&#34;use strict&#34;</span>;


num <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>; <span style="color:#6272a4">// error: num is not defined
</span><span style="color:#6272a4"></span>
</code></pre></div><h3 id="constants">Constants</h3>
<p>To declare a constant (unchanging) variable, use <code>const</code> instead of <code>let</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> myBirthday <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;18.04.1982&#39;</span>;
</code></pre></div><p>Variables declared using <code>const</code> are called &ldquo;constants&rdquo;. They cannot be reassigned. An attempt to do so would cause an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> myBirthday <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;18.04.1982&#39;</span>;

myBirthday <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;01.01.2001&#39;</span>; <span style="color:#6272a4">// error, can&#39;t reassign the constant!
</span></code></pre></div><p>When a programmer is sure that a variable will never change, they can declare it with <code>const</code> to guarantee and clearly communicate that fact to everyone.</p>
<h4 id="uppercase-constants">Uppercase constants</h4>
<p>There is a widespread practice to use constants as aliases for difficult-to-remember values that are known prior to execution.</p>
<p>Such constants are named using capital letters and underscores.</p>
<p>For instance, let&rsquo;s make constants for colors in so-called &ldquo;web&rdquo; (hexadecimal) format:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> COLOR_RED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;#F00&#34;</span>;
<span style="color:#ff79c6">const</span> COLOR_GREEN <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;#0F0&#34;</span>;
<span style="color:#ff79c6">const</span> COLOR_BLUE <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;#00F&#34;</span>;
<span style="color:#ff79c6">const</span> COLOR_ORANGE <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;#FF7F00&#34;</span>;

<span style="color:#6272a4">// ...when we need to pick a color
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> color <span style="color:#ff79c6">=</span> COLOR_ORANGE;
alert(color); <span style="color:#6272a4">// #FF7F00
</span></code></pre></div><p>Benefits:</p>
<ul>
<li><code>COLOR_ORANGE</code> is much easier to remember than <code>&quot;#FF7F00&quot;</code>.</li>
<li>It is much easier to mistype <code>&quot;#FF7F00&quot;</code> than <code>COLOR_ORANGE</code>.</li>
<li>When reading the code, <code>COLOR_ORANGE</code> is much more meaningful than <code>#FF7F00</code>.</li>
</ul>
<p>When should we use capitals for a constant and when should we name it normally? Let&rsquo;s make that clear.</p>
<p>Being a &ldquo;constant&rdquo; just means that a variable&rsquo;s value never changes. But there are constants that are known prior to execution (like a hexadecimal value for red) and there are constants that are <em>calculated</em> in run-time, during the execution, but do not change after their initial assignment.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> pageLoadTime <span style="color:#ff79c6">=</span> <span style="color:#6272a4">/* time taken by a webpage to load */</span>;
</code></pre></div><p>The value of <code>pageLoadTime</code> is not known prior to the page load, so it&rsquo;s named normally. But it&rsquo;s still a constant because it doesn&rsquo;t change after assignment.</p>
<p>In other words, capital-named constants are only used as aliases for &ldquo;hard-coded&rdquo; values.</p>
<h3 id="name-things-right">Name things right</h3>
<p>Talking about variables, there&rsquo;s one more extremely important thing.</p>
<p>A variable name should have a clean, obvious meaning, describing the data that it stores.</p>
<p>Variable naming is one of the most important and complex skills in programming. A quick glance at variable names can reveal which code was written by a beginner versus an experienced developer.</p>
<p>In a real project, most of the time is spent modifying and extending an existing code base rather than writing something completely separate from scratch. When we return to some code after doing something else for a while, it&rsquo;s much easier to find information that is well-labeled. Or, in other words, when the variables have good names.</p>
<p>Please spend time thinking about the right name for a variable before declaring it. Doing so will repay you handsomely.</p>
<p>Some good-to-follow rules are:</p>
<ul>
<li>Use human-readable names like <code>userName</code> or <code>shoppingCart</code>.</li>
<li>Stay away from abbreviations or short names like <code>a</code>, <code>b</code>, <code>c</code>, unless you really know what you&rsquo;re doing.</li>
<li>Make names maximally descriptive and concise. Examples of bad names are <code>data</code> and <code>value</code>. Such names say nothing. It&rsquo;s only okay to use them if the context of the code makes it exceptionally obvious which data or value the variable is referencing.</li>
<li>Agree on terms within your team and in your own mind. If a site visitor is called a &ldquo;user&rdquo; then we should name related variables <code>currentUser</code> or <code>newUser</code> instead of <code>currentVisitor</code> or <code>newManInTown</code>.</li>
</ul>
<p>Sounds simple? Indeed it is, but creating descriptive and concise variable names in practice is not. Go for it.</p>
<p>And the last note. There are some lazy programmers who, instead of declaring new variables, tend to reuse existing ones.</p>
<p>As a result, their variables are like boxes into which people throw different things without changing their stickers. What&rsquo;s inside the box now? Who knows? We need to come closer and check.</p>
<p>Such programmers save a little bit on variable declaration but lose ten times more on debugging.</p>
<p>An extra variable is good, not evil.</p>
<p>Modern JavaScript minifiers and browsers optimize code well enough, so it won&rsquo;t create performance issues. Using different variables for different values can even help the engine optimize your code.</p>
<h3 id="summary">Summary</h3>
<p>We can declare variables to store data by using the <code>var</code>, <code>let</code>, or <code>const</code> keywords.</p>
<ul>
<li><code>let</code> &ndash; is a modern variable declaration.</li>
<li><code>var</code> &ndash; is an old-school variable declaration. Normally we don&rsquo;t use it at all, but we&rsquo;ll cover subtle differences from <code>let</code> in the chapter <a href="info:var">info:var</a>, just in case you need them.</li>
<li><code>const</code> &ndash; is like <code>let</code>, but the value of the variable can&rsquo;t be changed.</li>
</ul>
<p>Variables should be named in a way that allows us to easily understand what&rsquo;s inside them.</p>
<h2 id="data-types">Data types</h2>
<p>A value in JavaScript is always of a certain type. For example, a string or a number.</p>
<p>There are eight basic data types in JavaScript. Here, we&rsquo;ll cover them in general and in the next chapters we&rsquo;ll talk about each of them in detail.</p>
<p>We can put any type in a variable. For example, a variable can at one moment be a string and then store a number:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// no error
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;hello&#34;</span>;
message <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">123456</span>;
</code></pre></div><p>Programming languages that allow such things, such as JavaScript, are called &ldquo;dynamically typed&rdquo;, meaning that there exist data types, but variables are not bound to any of them.</p>
<h3 id="number">Number</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> n <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">123</span>;
n <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">12.345</span>;
</code></pre></div><p>The <em>number</em> type represents both integer and floating point numbers.</p>
<p>There are many operations for numbers, e.g. multiplication <code>*</code>, division <code>/</code>, addition <code>+</code>, subtraction <code>-</code>, and so on.</p>
<p>Besides regular numbers, there are so-called &ldquo;special numeric values&rdquo; which also belong to this data type: <code>Infinity</code>, <code>-Infinity</code> and <code>NaN</code>.</p>
<ul>
<li>
<p><code>Infinity</code> represents the mathematical <a href="https://en.wikipedia.org/wiki/Infinity">Infinity</a> ∞. It is a special value that&rsquo;s greater than any number.</p>
<p>We can get it as a result of division by zero:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">/</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// Infinity
</span></code></pre></div><p>Or just reference it directly:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">Infinity</span> ); <span style="color:#6272a4">// Infinity
</span></code></pre></div></li>
<li>
<p><code>NaN</code> represents a computational error. It is a result of an incorrect or an undefined mathematical operation, for instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#34;not a number&#34;</span> <span style="color:#ff79c6">/</span> <span style="color:#bd93f9">2</span> ); <span style="color:#6272a4">// NaN, such division is erroneous
</span></code></pre></div><p><code>NaN</code> is sticky. Any further operation on <code>NaN</code> returns <code>NaN</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#34;not a number&#34;</span> <span style="color:#ff79c6">/</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">5</span> ); <span style="color:#6272a4">// NaN
</span></code></pre></div><p>So, if there&rsquo;s a <code>NaN</code> somewhere in a mathematical expression, it propagates to the whole result.</p>
</li>
</ul>
<p>Doing maths is &ldquo;safe&rdquo; in JavaScript. We can do anything: divide by zero, treat non-numeric strings as numbers, etc.</p>
<p>The script will never stop with a fatal error (&ldquo;die&rdquo;). At worst, we&rsquo;ll get <code>NaN</code> as the result.</p>
<p>Special numeric values formally belong to the &ldquo;number&rdquo; type. Of course they are not numbers in the common sense of this word.</p>
<p>We&rsquo;ll see more about working with numbers in the chapter <a href="info:number">info:number</a>.</p>
<h3 id="bigint">BigInt</h3>
<p>In JavaScript, the &ldquo;number&rdquo; type cannot represent integer values larger than <code>(2<sup>53</sup>-1)</code> (that&rsquo;s <code>9007199254740991</code>), or less than <code>-(2<sup>53</sup>-1)</code> for negatives. It&rsquo;s a technical limitation caused by their internal representation.</p>
<p>For most purposes that&rsquo;s quite enough, but sometimes we need really big numbers, e.g. for cryptography or microsecond-precision timestamps.</p>
<p><code>BigInt</code> type was recently added to the language to represent integers of arbitrary length.</p>
<p>A <code>BigInt</code> value is created by appending <code>n</code> to the end of an integer:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// the &#34;n&#34; at the end means it&#39;s a BigInt
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">const</span> bigInt <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1234567890123456789012345678901234567890</span>n;
</code></pre></div><p>As <code>BigInt</code> numbers are rarely needed, we don&rsquo;t cover them here, but devoted them a separate chapter <a href="info:bigint">info:bigint</a>. Read it when you need such big numbers.</p>
<p>Right now <code>BigInt</code> is supported in Firefox/Chrome/Edge, but not in Safari/IE.</p>
<h3 id="string">String</h3>
<p>A string in JavaScript must be surrounded by quotes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> str <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Hello&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> str2 <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Single quotes are ok too&#39;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> phrase <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">`can embed another </span><span style="color:#f1fa8c">${</span>str<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>;
</code></pre></div><p>In JavaScript, there are 3 types of quotes.</p>
<ol>
<li>Double quotes: <code>&quot;Hello&quot;</code>.</li>
<li>Single quotes: <code>'Hello'</code>.</li>
<li>Backticks: <code>`Hello`</code>.</li>
</ol>
<p>Double and single quotes are &ldquo;simple&rdquo; quotes. There&rsquo;s practically no difference between them in JavaScript.</p>
<p>Backticks are &ldquo;extended functionality&rdquo; quotes. They allow us to embed variables and expressions into a string by wrapping them in <code>${…}</code>, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;John&#34;</span>;

<span style="color:#6272a4">// embed a variable
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">`Hello, </span><span style="color:#f1fa8c">${</span>name<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">!`</span> ); <span style="color:#6272a4">// Hello, John!
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// embed an expression
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">`the result is </span><span style="color:#f1fa8c">${</span><span style="color:#bd93f9">1</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span> ); <span style="color:#6272a4">// the result is 3
</span></code></pre></div><p>The expression inside <code>${…}</code> is evaluated and the result becomes a part of the string. We can put anything in there: a variable like <code>name</code> or an arithmetical expression like <code>1 + 2</code> or something more complex.</p>
<p>Please note that this can only be done in backticks. Other quotes don&rsquo;t have this embedding functionality!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#34;the result is ${1 + 2}&#34;</span> ); <span style="color:#6272a4">// the result is ${1 + 2} (double quotes do nothing)
</span></code></pre></div><p>We&rsquo;ll cover strings more thoroughly in the chapter <a href="info:string">info:string</a>.</p>
<p>In some languages, there is a special &ldquo;character&rdquo; type for a single character. For example, in the C language and in Java it is called &ldquo;char&rdquo;.</p>
<p>In JavaScript, there is no such type. There&rsquo;s only one type: <code>string</code>. A string may consist of only one character or many of them.</p>
<h3 id="boolean-logical-type">Boolean (logical type)</h3>
<p>The boolean type has only two values: <code>true</code> and <code>false</code>.</p>
<p>This type is commonly used to store yes/no values: <code>true</code> means &ldquo;yes, correct&rdquo;, and <code>false</code> means &ldquo;no, incorrect&rdquo;.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> nameFieldChecked <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>; <span style="color:#6272a4">// yes, name field is checked
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> ageFieldChecked <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">false</span>; <span style="color:#6272a4">// no, age field is not checked
</span></code></pre></div><p>Boolean values also come as a result of comparisons:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> isGreater <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">4</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">1</span>;

alert( isGreater ); <span style="color:#6272a4">// true (the comparison result is &#34;yes&#34;)
</span></code></pre></div><p>We&rsquo;ll cover booleans more deeply in the chapter <a href="info:logical-operators">info:logical-operators</a>.</p>
<h3 id="the-null-value">The &ldquo;null&rdquo; value</h3>
<p>The special <code>null</code> value does not belong to any of the types described above.</p>
<p>It forms a separate type of its own which contains only the <code>null</code> value:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
</code></pre></div><p>In JavaScript, <code>null</code> is not a &ldquo;reference to a non-existing object&rdquo; or a &ldquo;null pointer&rdquo; like in some other languages.</p>
<p>It&rsquo;s just a special value which represents &ldquo;nothing&rdquo;, &ldquo;empty&rdquo; or &ldquo;value unknown&rdquo;.</p>
<p>The code above states that <code>age</code> is unknown.</p>
<h3 id="the-undefined-value">The &ldquo;undefined&rdquo; value</h3>
<p>The special value <code>undefined</code> also stands apart. It makes a type of its own, just like <code>null</code>.</p>
<p>The meaning of <code>undefined</code> is &ldquo;value is not assigned&rdquo;.</p>
<p>If a variable is declared, but not assigned, then its value is <code>undefined</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age;

alert(age); <span style="color:#6272a4">// shows &#34;undefined&#34;
</span></code></pre></div><p>Technically, it is possible to explicitly assign <code>undefined</code> to a variable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">100</span>;

<span style="color:#6272a4">// change the value to undefined
</span><span style="color:#6272a4"></span>age <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">undefined</span>;

alert(age); <span style="color:#6272a4">// &#34;undefined&#34;
</span></code></pre></div><p>&hellip;But we don&rsquo;t recommend doing that. Normally, one uses <code>null</code> to assign an &ldquo;empty&rdquo; or &ldquo;unknown&rdquo; value to a variable, while <code>undefined</code> is reserved as a default initial value for unassigned things.</p>
<h3 id="objects-and-symbols">Objects and Symbols</h3>
<p>The <code>object</code> type is special.</p>
<p>All other types are called &ldquo;primitive&rdquo; because their values can contain only a single thing (be it a string or a number or whatever). In contrast, objects are used to store collections of data and more complex entities.</p>
<p>Being that important, objects deserve a special treatment. We&rsquo;ll deal with them later in the chapter <a href="info:object">info:object</a>, after we learn more about primitives.</p>
<p>The <code>symbol</code> type is used to create unique identifiers for objects. We have to mention it here for the sake of completeness, but also postpone the details till we know objects.</p>
<h3 id="the-typeof-operator-type-typeof">The typeof operator [#type-typeof]</h3>
<p>The <code>typeof</code> operator returns the type of the argument. It&rsquo;s useful when we want to process values of different types differently or just want to do a quick check.</p>
<p>It supports two forms of syntax:</p>
<ol>
<li>As an operator: <code>typeof x</code>.</li>
<li>As a function: <code>typeof(x)</code>.</li>
</ol>
<p>In other words, it works with parentheses or without them. The result is the same.</p>
<p>The call to <code>typeof x</code> returns a string with the type name:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">typeof</span> <span style="color:#ff79c6">undefined</span> <span style="color:#6272a4">// &#34;undefined&#34;
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">typeof</span> <span style="color:#bd93f9">0</span> <span style="color:#6272a4">// &#34;number&#34;
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">typeof</span> <span style="color:#bd93f9">10</span>n <span style="color:#6272a4">// &#34;bigint&#34;
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">typeof</span> <span style="color:#ff79c6">true</span> <span style="color:#6272a4">// &#34;boolean&#34;
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">typeof</span> <span style="color:#f1fa8c">&#34;foo&#34;</span> <span style="color:#6272a4">// &#34;string&#34;
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">typeof</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>) <span style="color:#6272a4">// &#34;symbol&#34;
</span><span style="color:#6272a4"></span>

<span style="color:#ff79c6">typeof</span> <span style="color:#8be9fd;font-style:italic">Math</span> <span style="color:#6272a4">// &#34;object&#34;  (1)
</span><span style="color:#6272a4"></span>


<span style="color:#ff79c6">typeof</span> <span style="color:#ff79c6">null</span> <span style="color:#6272a4">// &#34;object&#34;  (2)
</span><span style="color:#6272a4"></span>


<span style="color:#ff79c6">typeof</span> alert <span style="color:#6272a4">// &#34;function&#34;  (3)
</span><span style="color:#6272a4"></span>
</code></pre></div><p>The last three lines may need additional explanation:</p>
<ol>
<li><code>Math</code> is a built-in object that provides mathematical operations. We will learn it in the chapter <a href="info:number">info:number</a>. Here, it serves just as an example of an object.</li>
<li>The result of <code>typeof null</code> is <code>&quot;object&quot;</code>. That&rsquo;s an officially recognized error in <code>typeof</code> behavior, coming from the early days of JavaScript and kept for compatibility. Definitely, <code>null</code> is not an object. It is a special value with a separate type of its own.</li>
<li>The result of <code>typeof alert</code> is <code>&quot;function&quot;</code>, because <code>alert</code> is a function. We&rsquo;ll study functions in the next chapters where we&rsquo;ll also see that there&rsquo;s no special &ldquo;function&rdquo; type in JavaScript. Functions belong to the object type. But <code>typeof</code> treats them differently, returning <code>&quot;function&quot;</code>. That also comes from the early days of JavaScript. Technically, such behavior isn&rsquo;t correct, but can be convenient in practice.</li>
</ol>
<h3 id="summary-1">Summary</h3>
<p>There are 8 basic data types in JavaScript.</p>
<ul>
<li><code>number</code> for numbers of any kind: integer or floating-point, integers are limited by ±2<sup>53</sup>.</li>
<li><code>bigint</code> is for integer numbers of arbitrary length.</li>
<li><code>string</code> for strings. A string may have zero or more characters, there&rsquo;s no separate single-character type.</li>
<li><code>boolean</code> for <code>true</code>/<code>false</code>.</li>
<li><code>null</code> for unknown values &ndash; a standalone type that has a single value <code>null</code>.</li>
<li><code>undefined</code> for unassigned values &ndash; a standalone type that has a single value <code>undefined</code>.</li>
<li><code>object</code> for more complex data structures.</li>
<li><code>symbol</code> for unique identifiers.</li>
</ul>
<p>The <code>typeof</code> operator allows us to see which type is stored in a variable.</p>
<ul>
<li>Two forms: <code>typeof x</code> or <code>typeof(x)</code>.</li>
<li>Returns a string with the name of the type, like <code>&quot;string&quot;</code>.</li>
<li>For <code>null</code> returns <code>&quot;object&quot;</code> &ndash; this is an error in the language, it&rsquo;s not actually an object.</li>
</ul>
<p>In the next chapters, we&rsquo;ll concentrate on primitive values and once we&rsquo;re familiar with them, we&rsquo;ll move on to objects.</p>
<h2 id="interaction-alert-prompt-confirm">Interaction: alert, prompt, confirm</h2>
<p>As we&rsquo;ll be using the browser as our demo environment, let&rsquo;s see a couple of functions to interact with the user: <code>alert</code>, <code>prompt</code> and <code>confirm</code>.</p>
<h3 id="alert">alert</h3>
<p>This one we&rsquo;ve seen already. It shows a message and waits for the user to press &ldquo;OK&rdquo;.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#34;Hello&#34;</span>);
</code></pre></div><p>The mini-window with the message is called a <em>modal window</em>. The word &ldquo;modal&rdquo; means that the visitor can&rsquo;t interact with the rest of the page, press other buttons, etc, until they have dealt with the window. In this case &ndash; until they press &ldquo;OK&rdquo;.</p>
<h3 id="prompt">prompt</h3>
<p>The function <code>prompt</code> accepts two arguments:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> prompt(title, [<span style="color:#ff79c6">default</span>]);
</code></pre></div><p>It shows a modal window with a text message, an input field for the visitor, and the buttons OK/Cancel.</p>
<dl>
<dt><code>title</code></dt>
<dd>The text to show the visitor.</dd>
<dt><code>default</code></dt>
<dd>An optional second parameter, the initial value for the input field.</dd>
</dl>
<pre tabindex="0"><code>The square brackets around `default` in the syntax above denote that the parameter as optional, not required.
</code></pre><p>The visitor can type something in the prompt input field and press OK. Then we get that text in the <code>result</code>. Or they can cancel the input by pressing Cancel or hitting the <code>key:Esc</code> key, then we get <code>null</code> as the <code>result</code>.</p>
<p>The call to <code>prompt</code> returns the text from the input field or <code>null</code> if the input was canceled.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;How old are you?&#39;</span>, <span style="color:#bd93f9">100</span>);

alert(<span style="color:#f1fa8c">`You are </span><span style="color:#f1fa8c">${</span>age<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c"> years old!`</span>); <span style="color:#6272a4">// You are 100 years old!
</span></code></pre></div><p>The second parameter is optional, but if we don&rsquo;t supply it, Internet Explorer will insert the text <code>&quot;undefined&quot;</code> into the prompt.</p>
<p>Run this code in Internet Explorer to see:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> test <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;Test&#34;</span>);
</code></pre></div><p>So, for prompts to look good in IE, we recommend always providing the second argument:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> test <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;Test&#34;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>); <span style="color:#6272a4">// &lt;-- for IE
</span></code></pre></div><h3 id="confirm">confirm</h3>
<p>The syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> confirm(question);
</code></pre></div><p>The function <code>confirm</code> shows a modal window with a <code>question</code> and two buttons: OK and Cancel.</p>
<p>The result is <code>true</code> if OK is pressed and <code>false</code> otherwise.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> isBoss <span style="color:#ff79c6">=</span> confirm(<span style="color:#f1fa8c">&#34;Are you the boss?&#34;</span>);

alert( isBoss ); <span style="color:#6272a4">// true if OK is pressed
</span></code></pre></div><h3 id="summary-2">Summary</h3>
<p>We covered 3 browser-specific functions to interact with visitors:</p>
<dl>
<dt><code>alert</code></dt>
<dd>shows a message.</dd>
<dt><code>prompt</code></dt>
<dd>shows a message asking the user to input text. It returns the text or, if Cancel button or <code>key:Esc</code> is clicked, <code>null</code>.</dd>
<dt><code>confirm</code></dt>
<dd>shows a message and waits for the user to press &ldquo;OK&rdquo; or &ldquo;Cancel&rdquo;. It returns <code>true</code> for OK and <code>false</code> for Cancel/<code>key:Esc</code>.</dd>
</dl>
<p>All these methods are modal: they pause script execution and don&rsquo;t allow the visitor to interact with the rest of the page until the window has been dismissed.</p>
<p>There are two limitations shared by all the methods above:</p>
<ol>
<li>The exact location of the modal window is determined by the browser. Usually, it&rsquo;s in the center.</li>
<li>The exact look of the window also depends on the browser. We can&rsquo;t modify it.</li>
</ol>
<p>That is the price for simplicity. There are other ways to show nicer windows and richer interaction with the visitor, but if &ldquo;bells and whistles&rdquo; do not matter much, these methods work just fine.</p>
<h2 id="type-conversions">Type Conversions</h2>
<p>Most of the time, operators and functions automatically convert the values given to them to the right type.</p>
<p>For example, <code>alert</code> automatically converts any value to a string to show it. Mathematical operations convert values to numbers.</p>
<p>There are also cases when we need to explicitly convert a value to the expected type.</p>
<p>In this chapter, we won&rsquo;t cover objects. For now we&rsquo;ll just be talking about primitives.</p>
<p>Later, after we learn about objects, in the chapter <a href="info:object-toprimitive">info:object-toprimitive</a> we&rsquo;ll see how objects fit in.</p>
<h3 id="string-conversion">String Conversion</h3>
<p>String conversion happens when we need the string form of a value.</p>
<p>For example, <code>alert(value)</code> does it to show the value.</p>
<p>We can also call the <code>String(value)</code> function to convert a value to a string:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> value <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;
alert(<span style="color:#ff79c6">typeof</span> value); <span style="color:#6272a4">// boolean
</span><span style="color:#6272a4"></span>

value <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">String</span>(value); <span style="color:#6272a4">// now value is a string &#34;true&#34;
</span><span style="color:#6272a4"></span>alert(<span style="color:#ff79c6">typeof</span> value); <span style="color:#6272a4">// string
</span><span style="color:#6272a4"></span>
</code></pre></div><p>String conversion is mostly obvious. A <code>false</code> becomes <code>&quot;false&quot;</code>, <code>null</code> becomes <code>&quot;null&quot;</code>, etc.</p>
<h3 id="numeric-conversion">Numeric Conversion</h3>
<p>Numeric conversion happens in mathematical functions and expressions automatically.</p>
<p>For example, when division <code>/</code> is applied to non-numbers:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#34;6&#34;</span> <span style="color:#ff79c6">/</span> <span style="color:#f1fa8c">&#34;2&#34;</span> ); <span style="color:#6272a4">// 3, strings are converted to numbers
</span></code></pre></div><p>We can use the <code>Number(value)</code> function to explicitly convert a <code>value</code> to a number:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> str <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;123&#34;</span>;
alert(<span style="color:#ff79c6">typeof</span> str); <span style="color:#6272a4">// string
</span><span style="color:#6272a4"></span>
<span style="color:#8be9fd;font-style:italic">let</span> num <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Number</span>(str); <span style="color:#6272a4">// becomes a number 123
</span><span style="color:#6272a4"></span>
alert(<span style="color:#ff79c6">typeof</span> num); <span style="color:#6272a4">// number
</span></code></pre></div><p>Explicit conversion is usually required when we read a value from a string-based source like a text form but expect a number to be entered.</p>
<p>If the string is not a valid number, the result of such a conversion is <code>NaN</code>. For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#f1fa8c">&#34;an arbitrary string instead of a number&#34;</span>);

alert(age); <span style="color:#6272a4">// NaN, conversion failed
</span></code></pre></div><p>Numeric conversion rules:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Becomes&hellip;</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>undefined</code></td>
<td><code>NaN</code></td>
</tr>
<tr>
<td><code>null</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>true and false</code></td>
<td><code>1</code> and <code>0</code></td>
</tr>
<tr>
<td><code>string</code></td>
<td>Whitespaces from the start and end are removed. If the remaining string is empty, the result is <code>0</code>. Otherwise, the number is &ldquo;read&rdquo; from the string. An error gives <code>NaN</code>.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#f1fa8c">&#34;   123   &#34;</span>) ); <span style="color:#6272a4">// 123
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#f1fa8c">&#34;123z&#34;</span>) );      <span style="color:#6272a4">// NaN (error reading a number at &#34;z&#34;)
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#ff79c6">true</span>) );        <span style="color:#6272a4">// 1
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#ff79c6">false</span>) );       <span style="color:#6272a4">// 0
</span></code></pre></div><p>Please note that <code>null</code> and <code>undefined</code> behave differently here: <code>null</code> becomes zero while <code>undefined</code> becomes <code>NaN</code>.</p>
<p>Most mathematical operators also perform such conversion, we&rsquo;ll see that in the next chapter.</p>
<h3 id="boolean-conversion">Boolean Conversion</h3>
<p>Boolean conversion is the simplest one.</p>
<p>It happens in logical operations (later we&rsquo;ll meet condition tests and other similar things) but can also be performed explicitly with a call to <code>Boolean(value)</code>.</p>
<p>The conversion rule:</p>
<ul>
<li>Values that are intuitively &ldquo;empty&rdquo;, like <code>0</code>, an empty string, <code>null</code>, <code>undefined</code>, and <code>NaN</code>, become <code>false</code>.</li>
<li>Other values become <code>true</code>.</li>
</ul>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#bd93f9">1</span>) ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#bd93f9">0</span>) ); <span style="color:#6272a4">// false
</span><span style="color:#6272a4"></span>
alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#f1fa8c">&#34;hello&#34;</span>) ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#f1fa8c">&#34;&#34;</span>) ); <span style="color:#6272a4">// false
</span></code></pre></div><p>Some languages (namely PHP) treat <code>&quot;0&quot;</code> as <code>false</code>. But in JavaScript, a non-empty string is always <code>true</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#f1fa8c">&#34;0&#34;</span>) ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#f1fa8c">&#34; &#34;</span>) ); <span style="color:#6272a4">// spaces, also true (any non-empty string is true)
</span></code></pre></div><h3 id="summary-3">Summary</h3>
<p>The three most widely used type conversions are to string, to number, and to boolean.</p>
<p><strong><code>String Conversion</code></strong> &ndash; Occurs when we output something. Can be performed with <code>String(value)</code>. The conversion to string is usually obvious for primitive values.</p>
<p><strong><code>Numeric Conversion</code></strong> &ndash; Occurs in math operations. Can be performed with <code>Number(value)</code>.</p>
<p>The conversion follows the rules:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Becomes&hellip;</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>undefined</code></td>
<td><code>NaN</code></td>
</tr>
<tr>
<td><code>null</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>true / false</code></td>
<td><code>1 / 0</code></td>
</tr>
<tr>
<td><code>string</code></td>
<td>The string is read &ldquo;as is&rdquo;, whitespaces from both sides are ignored. An empty string becomes <code>0</code>. An error gives <code>NaN</code>.</td>
</tr>
</tbody>
</table>
<p><strong><code>Boolean Conversion</code></strong> &ndash; Occurs in logical operations. Can be performed with <code>Boolean(value)</code>.</p>
<p>Follows the rules:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Becomes&hellip;</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code>, <code>null</code>, <code>undefined</code>, <code>NaN</code>, <code>&quot;&quot;</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>any other value</td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<p>Most of these rules are easy to understand and memorize. The notable exceptions where people usually make mistakes are:</p>
<ul>
<li><code>undefined</code> is <code>NaN</code> as a number, not <code>0</code>.</li>
<li><code>&quot;0&quot;</code> and space-only strings like <code>&quot;   &quot;</code> are true as a boolean.</li>
</ul>
<p>Objects aren&rsquo;t covered here. We&rsquo;ll return to them later in the chapter <a href="info:object-toprimitive">info:object-toprimitive</a> that is devoted exclusively to objects after we learn more basic things about JavaScript.</p>
<h2 id="basic-operators-maths">Basic operators, maths</h2>
<p>We know many operators from school. They are things like addition <code>+</code>, multiplication <code>*</code>, subtraction <code>-</code>, and so on.</p>
<p>In this chapter, we’ll start with simple operators, then concentrate on JavaScript-specific aspects, not covered by school arithmetic.</p>
<h3 id="terms-unary-binary-operand">Terms: &ldquo;unary&rdquo;, &ldquo;binary&rdquo;, &ldquo;operand&rdquo;</h3>
<p>Before we move on, let&rsquo;s grasp some common terminology.</p>
<ul>
<li>
<p><em>An operand</em> &ndash; is what operators are applied to. For instance, in the multiplication of <code>5 * 2</code> there are two operands: the left operand is <code>5</code> and the right operand is <code>2</code>. Sometimes, people call these &ldquo;arguments&rdquo; instead of &ldquo;operands&rdquo;.</p>
</li>
<li>
<p>An operator is <em>unary</em> if it has a single operand. For example, the unary negation <code>-</code> reverses the sign of a number:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;


x <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">-</span>x;

alert( x ); <span style="color:#6272a4">// -1, unary negation was applied
</span></code></pre></div></li>
<li>
<p>An operator is <em>binary</em> if it has two operands. The same minus exists in binary form as well:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>, y <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">3</span>;
alert( y <span style="color:#ff79c6">-</span> x ); <span style="color:#6272a4">// 2, binary minus subtracts values
</span></code></pre></div><p>Formally, in the examples above we have two different operators that share the same symbol: the negation operator, a unary operator that reverses the sign, and the subtraction operator, a binary operator that subtracts one number from another.</p>
</li>
</ul>
<h3 id="maths">Maths</h3>
<p>The following math operations are supported:</p>
<ul>
<li>Addition <code>+</code>,</li>
<li>Subtraction <code>-</code>,</li>
<li>Multiplication <code>*</code>,</li>
<li>Division <code>/</code>,</li>
<li>Remainder <code>%</code>,</li>
<li>Exponentiation <code>**</code>.</li>
</ul>
<p>The first four are straightforward, while <code>%</code> and <code>**</code> need a few words about them.</p>
<h4 id="remainder-">Remainder %</h4>
<p>The remainder operator <code>%</code>, despite its appearance, is not related to percents.</p>
<p>The result of <code>a % b</code> is the <a href="https://en.wikipedia.org/wiki/Remainder">remainder</a> of the integer division of <code>a</code> by <code>b</code>.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">5</span> <span style="color:#ff79c6">%</span> <span style="color:#bd93f9">2</span> ); <span style="color:#6272a4">// 1, a remainder of 5 divided by 2
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">8</span> <span style="color:#ff79c6">%</span> <span style="color:#bd93f9">3</span> ); <span style="color:#6272a4">// 2, a remainder of 8 divided by 3
</span></code></pre></div><h4 id="exponentiation-">Exponentiation **</h4>
<p>The exponentiation operator <code>a ** b</code> multiplies <code>a</code> by itself <code>b</code> times.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">**</span> <span style="color:#bd93f9">2</span> ); <span style="color:#6272a4">// 4  (2 multiplied by itself 2 times)
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">**</span> <span style="color:#bd93f9">3</span> ); <span style="color:#6272a4">// 8  (2 * 2 * 2, 3 times)
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">**</span> <span style="color:#bd93f9">4</span> ); <span style="color:#6272a4">// 16 (2 * 2 * 2 * 2, 4 times)
</span></code></pre></div><p>Mathematically, the exponentiation is defined for non-integer numbers as well. For example, a square root is an exponentiation by <code>1/2</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">4</span> <span style="color:#ff79c6">**</span> (<span style="color:#bd93f9">1</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">2</span>) ); <span style="color:#6272a4">// 2 (power of 1/2 is the same as a square root)
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">8</span> <span style="color:#ff79c6">**</span> (<span style="color:#bd93f9">1</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">3</span>) ); <span style="color:#6272a4">// 2 (power of 1/3 is the same as a cubic root)
</span></code></pre></div><h3 id="string-concatenation-with-binary-">String concatenation with binary +</h3>
<p>Let&rsquo;s meet features of JavaScript operators that are beyond school arithmetics.</p>
<p>Usually, the plus operator <code>+</code> sums numbers.</p>
<p>But, if the binary <code>+</code> is applied to strings, it merges (concatenates) them:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> s <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;my&#34;</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;string&#34;</span>;
alert(s); <span style="color:#6272a4">// mystring
</span></code></pre></div><p>Note that if any of the operands is a string, then the other one is converted to a string too.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#39;1&#39;</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span> ); <span style="color:#6272a4">// &#34;12&#34;
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;1&#39;</span> ); <span style="color:#6272a4">// &#34;21&#34;
</span></code></pre></div><p>See, it doesn&rsquo;t matter whether the first operand is a string or the second one.</p>
<p>Here&rsquo;s a more complex example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;1&#39;</span> ); <span style="color:#6272a4">// &#34;41&#34; and not &#34;221&#34;
</span></code></pre></div><p>Here, operators work one after another. The first <code>+</code> sums two numbers, so it returns <code>4</code>, then the next <code>+</code> adds the string <code>1</code> to it, so it&rsquo;s like <code>4 + '1' = 41</code>.</p>
<p>The binary <code>+</code> is the only operator that supports strings in such a way. Other arithmetic operators work only with numbers and always convert their operands to numbers.</p>
<p>Here&rsquo;s the demo for subtraction and division:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">6</span> <span style="color:#ff79c6">-</span> <span style="color:#f1fa8c">&#39;2&#39;</span> ); <span style="color:#6272a4">// 4, converts &#39;2&#39; to a number
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#39;6&#39;</span> <span style="color:#ff79c6">/</span> <span style="color:#f1fa8c">&#39;2&#39;</span> ); <span style="color:#6272a4">// 3, converts both operands to numbers
</span></code></pre></div><h3 id="numeric-conversion-unary-">Numeric conversion, unary +</h3>
<p>The plus <code>+</code> exists in two forms: the binary form that we used above and the unary form.</p>
<p>The unary plus or, in other words, the plus operator <code>+</code> applied to a single value, doesn&rsquo;t do anything to numbers. But if the operand is not a number, the unary plus converts it into a number.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// No effect on numbers
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
alert( <span style="color:#ff79c6">+</span>x ); <span style="color:#6272a4">// 1
</span><span style="color:#6272a4"></span>
<span style="color:#8be9fd;font-style:italic">let</span> y <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">-</span><span style="color:#bd93f9">2</span>;
alert( <span style="color:#ff79c6">+</span>y ); <span style="color:#6272a4">// -2
</span><span style="color:#6272a4"></span>

<span style="color:#6272a4">// Converts non-numbers
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">+</span><span style="color:#ff79c6">true</span> ); <span style="color:#6272a4">// 1
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">+</span><span style="color:#f1fa8c">&#34;&#34;</span> );   <span style="color:#6272a4">// 0
</span><span style="color:#6272a4"></span>
</code></pre></div><p>It actually does the same thing as <code>Number(...)</code>, but is shorter.</p>
<p>The need to convert strings to numbers arises very often. For example, if we are getting values from HTML form fields, they are usually strings. What if we want to sum them?</p>
<p>The binary plus would add them as strings:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> apples <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;2&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> oranges <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;3&#34;</span>;

alert( apples <span style="color:#ff79c6">+</span> oranges ); <span style="color:#6272a4">// &#34;23&#34;, the binary plus concatenates strings
</span></code></pre></div><p>If we want to treat them as numbers, we need to convert and then sum them:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> apples <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;2&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> oranges <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;3&#34;</span>;


<span style="color:#6272a4">// both values converted to numbers before the binary plus
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">+</span>apples <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">+</span>oranges ); <span style="color:#6272a4">// 5
</span><span style="color:#6272a4"></span>

<span style="color:#6272a4">// the longer variant
</span><span style="color:#6272a4">// alert( Number(apples) + Number(oranges) ); // 5
</span></code></pre></div><p>From a mathematician&rsquo;s standpoint, the abundance of pluses may seem strange. But from a programmer&rsquo;s standpoint, there&rsquo;s nothing special: unary pluses are applied first, they convert strings to numbers, and then the binary plus sums them up.</p>
<p>Why are unary pluses applied to values before the binary ones? As we&rsquo;re going to see, that&rsquo;s because of their <em>higher precedence</em>.</p>
<h3 id="operator-precedence">Operator precedence</h3>
<p>If an expression has more than one operator, the execution order is defined by their <em>precedence</em>, or, in other words, the default priority order of operators.</p>
<p>From school, we all know that the multiplication in the expression <code>1 + 2 * 2</code> should be calculated before the addition. That&rsquo;s exactly the precedence thing. The multiplication is said to have <em>a higher precedence</em> than the addition.</p>
<p>Parentheses override any precedence, so if we&rsquo;re not satisfied with the default order, we can use them to change it. For example, write <code>(1 + 2) * 2</code>.</p>
<p>There are many operators in JavaScript. Every operator has a corresponding precedence number. The one with the larger number executes first. If the precedence is the same, the execution order is from left to right.</p>
<p>Here&rsquo;s an extract from the <a href="https://developer.mozilla.org/en/JavaScript/Reference/operators/operator_precedence">precedence table</a> (you don&rsquo;t need to remember this, but note that unary operators are higher than corresponding binary ones):</p>
<table>
<thead>
<tr>
<th>Precedence</th>
<th>Name</th>
<th>Sign</th>
</tr>
</thead>
<tbody>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
<tr>
<td>17</td>
<td>unary plus</td>
<td><code>+</code></td>
</tr>
<tr>
<td>17</td>
<td>unary negation</td>
<td><code>-</code></td>
</tr>
<tr>
<td>16</td>
<td>exponentiation</td>
<td><code>**</code></td>
</tr>
<tr>
<td>15</td>
<td>multiplication</td>
<td><code>*</code></td>
</tr>
<tr>
<td>15</td>
<td>division</td>
<td><code>/</code></td>
</tr>
<tr>
<td>13</td>
<td>addition</td>
<td><code>+</code></td>
</tr>
<tr>
<td>13</td>
<td>subtraction</td>
<td><code>-</code></td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
<tr>
<td>3</td>
<td>assignment</td>
<td><code>=</code></td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
</tbody>
</table>
<p>As we can see, the &ldquo;unary plus&rdquo; has a priority of <code>17</code> which is higher than the <code>13</code> of &ldquo;addition&rdquo; (binary plus). That&rsquo;s why, in the expression <code>&quot;+apples + +oranges&quot;</code>, unary pluses work before the addition.</p>
<h3 id="assignment">Assignment</h3>
<p>Let&rsquo;s note that an assignment <code>=</code> is also an operator. It is listed in the precedence table with the very low priority of <code>3</code>.</p>
<p>That&rsquo;s why, when we assign a variable, like <code>x = 2 * 2 + 1</code>, the calculations are done first and then the <code>=</code> is evaluated, storing the result in <code>x</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">1</span>;

alert( x ); <span style="color:#6272a4">// 5
</span></code></pre></div><h4 id="assignment--returns-a-value">Assignment = returns a value</h4>
<p>The fact of <code>=</code> being an operator, not a &ldquo;magical&rdquo; language construct has an interesting implication.</p>
<p>Most operators in JavaScript return a value. That&rsquo;s obvious for <code>+</code> and <code>-</code>, but also true for <code>=</code>.</p>
<p>The call <code>x = value</code> writes the <code>value</code> into <code>x</code> <em>and then returns it</em>.</p>
<p>Here&rsquo;s a demo that uses an assignment as part of a more complex expression:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
<span style="color:#8be9fd;font-style:italic">let</span> b <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>;


<span style="color:#8be9fd;font-style:italic">let</span> c <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">-</span> (a <span style="color:#ff79c6">=</span> b <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">1</span>);


alert( a ); <span style="color:#6272a4">// 3
</span><span style="color:#6272a4"></span>alert( c ); <span style="color:#6272a4">// 0
</span></code></pre></div><p>In the example above, the result of expression <code>(a = b + 1)</code> is the value which was assigned to <code>a</code> (that is <code>3</code>). It is then used for further evaluations.</p>
<p>Funny code, isn&rsquo;t it? We should understand how it works, because sometimes we see it in JavaScript libraries.</p>
<p>Although, please don&rsquo;t write the code like that. Such tricks definitely don&rsquo;t make code clearer or readable.</p>
<h4 id="chaining-assignments">Chaining assignments</h4>
<p>Another interesting feature is the ability to chain assignments:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a, b, c;


a <span style="color:#ff79c6">=</span> b <span style="color:#ff79c6">=</span> c <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>;


alert( a ); <span style="color:#6272a4">// 4
</span><span style="color:#6272a4"></span>alert( b ); <span style="color:#6272a4">// 4
</span><span style="color:#6272a4"></span>alert( c ); <span style="color:#6272a4">// 4
</span></code></pre></div><p>Chained assignments evaluate from right to left. First, the rightmost expression <code>2 + 2</code> is evaluated and then assigned to the variables on the left: <code>c</code>, <code>b</code> and <code>a</code>. At the end, all the variables share a single value.</p>
<p>Once again, for the purposes of readability it&rsquo;s better to split such code into few lines:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">c <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>;
b <span style="color:#ff79c6">=</span> c;
a <span style="color:#ff79c6">=</span> c;
</code></pre></div><p>That&rsquo;s easier to read, especially when eye-scanning the code fast.</p>
<h3 id="modify-in-place">Modify-in-place</h3>
<p>We often need to apply an operator to a variable and store the new result in that same variable.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> n <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>;
n <span style="color:#ff79c6">=</span> n <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">5</span>;
n <span style="color:#ff79c6">=</span> n <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">2</span>;
</code></pre></div><p>This notation can be shortened using the operators <code>+=</code> and <code>*=</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> n <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>;
n <span style="color:#ff79c6">+=</span> <span style="color:#bd93f9">5</span>; <span style="color:#6272a4">// now n = 7 (same as n = n + 5)
</span><span style="color:#6272a4"></span>n <span style="color:#ff79c6">*=</span> <span style="color:#bd93f9">2</span>; <span style="color:#6272a4">// now n = 14 (same as n = n * 2)
</span><span style="color:#6272a4"></span>
alert( n ); <span style="color:#6272a4">// 14
</span></code></pre></div><p>Short &ldquo;modify-and-assign&rdquo; operators exist for all arithmetical and bitwise operators: <code>/=</code>, <code>-=</code>, etc.</p>
<p>Such operators have the same precedence as a normal assignment, so they run after most other calculations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> n <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>;

n <span style="color:#ff79c6">*=</span> <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">5</span>;

alert( n ); <span style="color:#6272a4">// 16  (right part evaluated first, same as n *= 8)
</span></code></pre></div><h3 id="incrementdecrement">Increment/decrement</h3>
<!-- Can't use -- in title, because the built-in parser turns it into a 'long dash' – -->
<p>Increasing or decreasing a number by one is among the most common numerical operations.</p>
<p>So, there are special operators for it:</p>
<ul>
<li>
<p><strong>Increment</strong> <code>++</code> increases a variable by 1:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>;
counter<span style="color:#ff79c6">++</span>;        <span style="color:#6272a4">// works the same as counter = counter + 1, but is shorter
</span><span style="color:#6272a4"></span>alert( counter ); <span style="color:#6272a4">// 3
</span></code></pre></div></li>
<li>
<p><strong>Decrement</strong> <code>--</code> decreases a variable by 1:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>;
counter<span style="color:#ff79c6">--</span>;        <span style="color:#6272a4">// works the same as counter = counter - 1, but is shorter
</span><span style="color:#6272a4"></span>alert( counter ); <span style="color:#6272a4">// 1
</span></code></pre></div></li>
</ul>
<pre tabindex="0"><code class="language-warn" data-lang="warn">Increment/decrement can only be applied to variables. Trying to use it on a value like `5++` will give an error.
</code></pre><p>The operators <code>++</code> and <code>--</code> can be placed either before or after a variable.</p>
<ul>
<li>When the operator goes after the variable, it is in &ldquo;postfix form&rdquo;: <code>counter++</code>.</li>
<li>The &ldquo;prefix form&rdquo; is when the operator goes before the variable: <code>++counter</code>.</li>
</ul>
<p>Both of these statements do the same thing: increase <code>counter</code> by <code>1</code>.</p>
<p>Is there any difference? Yes, but we can only see it if we use the returned value of <code>++/--</code>.</p>
<p>Let&rsquo;s clarify. As we know, all operators return a value. Increment/decrement is no exception. The prefix form returns the new value while the postfix form returns the old value (prior to increment/decrement).</p>
<p>To see the difference, here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
<span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">++</span>counter; <span style="color:#6272a4">// (*)
</span><span style="color:#6272a4"></span>
alert(a); <span style="color:#6272a4">// 2
</span></code></pre></div><p>In the line <code>(*)</code>, the <em>prefix</em> form <code>++counter</code> increments <code>counter</code> and returns the new value, <code>2</code>. So, the <code>alert</code> shows <code>2</code>.</p>
<p>Now, let&rsquo;s use the postfix form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
<span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> counter<span style="color:#ff79c6">++</span>; <span style="color:#6272a4">// (*) changed ++counter to counter++
</span><span style="color:#6272a4"></span>
alert(a); <span style="color:#6272a4">// 1
</span></code></pre></div><p>In the line <code>(*)</code>, the <em>postfix</em> form <code>counter++</code> also increments <code>counter</code> but returns the <em>old</em> value (prior to increment). So, the <code>alert</code> shows <code>1</code>.</p>
<p>To summarize:</p>
<ul>
<li>
<p>If the result of increment/decrement is not used, there is no difference in which form to use:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
counter<span style="color:#ff79c6">++</span>;
<span style="color:#ff79c6">++</span>counter;
alert( counter ); <span style="color:#6272a4">// 2, the lines above did the same
</span></code></pre></div></li>
<li>
<p>If we&rsquo;d like to increase a value <em>and</em> immediately use the result of the operator, we need the prefix form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
alert( <span style="color:#ff79c6">++</span>counter ); <span style="color:#6272a4">// 1
</span></code></pre></div></li>
<li>
<p>If we&rsquo;d like to increment a value but use its previous value, we need the postfix form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
alert( counter<span style="color:#ff79c6">++</span> ); <span style="color:#6272a4">// 0
</span></code></pre></div></li>
</ul>
<p>The operators <code>++/--</code> can be used inside expressions as well. Their precedence is higher than most other arithmetical operations.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">*</span> <span style="color:#ff79c6">++</span>counter ); <span style="color:#6272a4">// 4
</span></code></pre></div><p>Compare with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">*</span> counter<span style="color:#ff79c6">++</span> ); <span style="color:#6272a4">// 2, because counter++ returns the &#34;old&#34; value
</span></code></pre></div><p>Though technically okay, such notation usually makes code less readable. One line does multiple things &ndash; not good.</p>
<p>While reading code, a fast &ldquo;vertical&rdquo; eye-scan can easily miss something like <code>counter++</code> and it won&rsquo;t be obvious that the variable increased.</p>
<p>We advise a style of &ldquo;one line &ndash; one action&rdquo;:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> counter <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">*</span> counter );
counter<span style="color:#ff79c6">++</span>;
</code></pre></div><h3 id="bitwise-operators">Bitwise operators</h3>
<p>Bitwise operators treat arguments as 32-bit integer numbers and work on the level of their binary representation.</p>
<p>These operators are not JavaScript-specific. They are supported in most programming languages.</p>
<p>The list of operators:</p>
<ul>
<li>AND ( <code>&amp;</code> )</li>
<li>OR ( <code>|</code> )</li>
<li>XOR ( <code>^</code> )</li>
<li>NOT ( <code>~</code> )</li>
<li>LEFT SHIFT ( <code>&lt;&lt;</code> )</li>
<li>RIGHT SHIFT ( <code>&gt;&gt;</code> )</li>
<li>ZERO-FILL RIGHT SHIFT ( <code>&gt;&gt;&gt;</code> )</li>
</ul>
<p>These operators are used very rarely, when we need to fiddle with numbers on the very lowest (bitwise) level. We won&rsquo;t need these operators any time soon, as web development has little use of them, but in some special areas, such as cryptography, they are useful. You can read the <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">Bitwise Operators</a> article on MDN when a need arises.</p>
<h3 id="comma">Comma</h3>
<p>The comma operator <code>,</code> is one of the rarest and most unusual operators. Sometimes, it&rsquo;s used to write shorter code, so we need to know it in order to understand what&rsquo;s going on.</p>
<p>The comma operator allows us to evaluate several expressions, dividing them with a comma <code>,</code>. Each of them is evaluated but only the result of the last one is returned.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> (<span style="color:#bd93f9">1</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">4</span>);


alert( a ); <span style="color:#6272a4">// 7 (the result of 3 + 4)
</span></code></pre></div><p>Here, the first expression <code>1 + 2</code> is evaluated and its result is thrown away. Then, <code>3 + 4</code> is evaluated and returned as the result.</p>
<p>Please note that the comma operator has very low precedence, lower than <code>=</code>, so parentheses are important in the example above.</p>
<p>Without them: <code>a = 1 + 2, 3 + 4</code> evaluates <code>+</code> first, summing the numbers into <code>a = 3, 7</code>, then the assignment operator <code>=</code> assigns <code>a = 3</code>, and the rest is ignored. It&rsquo;s like <code>(a = 1 + 2), 3 + 4</code>.</p>
<p>Why do we need an operator that throws away everything except the last expression?</p>
<p>Sometimes, people use it in more complex constructs to put several actions in one line.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// three operations in one line
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">for</span> (a <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>, b <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">3</span>, c <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">*</span> b; a <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">10</span>; a<span style="color:#ff79c6">++</span>) {
 ...
}
</code></pre></div><p>Such tricks are used in many JavaScript frameworks. That&rsquo;s why we&rsquo;re mentioning them. But usually they don&rsquo;t improve code readability so we should think well before using them.</p>
<h2 id="comparisons">Comparisons</h2>
<p>We know many comparison operators from maths.</p>
<p>In JavaScript they are written like this:</p>
<ul>
<li>Greater/less than: <code>a &gt; b</code>, <code>a &lt; b</code>.</li>
<li>Greater/less than or equals: <code>a &gt;= b</code>, <code>a &lt;= b</code>.</li>
<li>Equals: <code>a == b</code>, please note the double equality sign <code>==</code> means the equality test, while a single one <code>a = b</code> means an assignment.</li>
<li>Not equals. In maths the notation is <code>≠</code>, but in JavaScript it&rsquo;s written as <code>a != b</code>.</li>
</ul>
<p>In this article we&rsquo;ll learn more about different types of comparisons, how JavaScript makes them, including important peculiarities.</p>
<p>At the end you&rsquo;ll find a good recipe to avoid &ldquo;javascript quirks&rdquo;-related issues.</p>
<h3 id="boolean-is-the-result">Boolean is the result</h3>
<p>All comparison operators return a boolean value:</p>
<ul>
<li><code>true</code> &ndash; means &ldquo;yes&rdquo;, &ldquo;correct&rdquo; or &ldquo;the truth&rdquo;.</li>
<li><code>false</code> &ndash; means &ldquo;no&rdquo;, &ldquo;wrong&rdquo; or &ldquo;not the truth&rdquo;.</li>
</ul>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">1</span> );  <span style="color:#6272a4">// true (correct)
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// false (wrong)
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">!=</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// true (correct)
</span></code></pre></div><p>A comparison result can be assigned to a variable, just like any value:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">4</span>; <span style="color:#6272a4">// assign the result of the comparison
</span><span style="color:#6272a4"></span>alert( result ); <span style="color:#6272a4">// true
</span></code></pre></div><h3 id="string-comparison">String comparison</h3>
<p>To see whether a string is greater than another, JavaScript uses the so-called &ldquo;dictionary&rdquo; or &ldquo;lexicographical&rdquo; order.</p>
<p>In other words, strings are compared letter-by-letter.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#39;Z&#39;</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#f1fa8c">&#39;A&#39;</span> ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#39;Glow&#39;</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#f1fa8c">&#39;Glee&#39;</span> ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#39;Bee&#39;</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#f1fa8c">&#39;Be&#39;</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>The algorithm to compare two strings is simple:</p>
<ol>
<li>Compare the first character of both strings.</li>
<li>If the first character from the first string is greater (or less) than the other string&rsquo;s, then the first string is greater (or less) than the second. We&rsquo;re done.</li>
<li>Otherwise, if both strings' first characters are the same, compare the second characters the same way.</li>
<li>Repeat until the end of either string.</li>
<li>If both strings end at the same length, then they are equal. Otherwise, the longer string is greater.</li>
</ol>
<p>In the examples above, the comparison <code>'Z' &gt; 'A'</code> gets to a result at the first step while the strings <code>&quot;Glow&quot;</code> and <code>&quot;Glee&quot;</code> are compared character-by-character:</p>
<ol>
<li><code>G</code> is the same as <code>G</code>.</li>
<li><code>l</code> is the same as <code>l</code>.</li>
<li><code>o</code> is greater than <code>e</code>. Stop here. The first string is greater.</li>
</ol>
<p>The comparison algorithm given above is roughly equivalent to the one used in dictionaries or phone books, but it&rsquo;s not exactly the same.</p>
<p>For instance, case matters. A capital letter <code>&quot;A&quot;</code> is not equal to the lowercase <code>&quot;a&quot;</code>. Which one is greater? The lowercase <code>&quot;a&quot;</code>. Why? Because the lowercase character has a greater index in the internal encoding table JavaScript uses (Unicode). We&rsquo;ll get back to specific details and consequences of this in the chapter <a href="info:string">info:string</a>.</p>
<h3 id="comparison-of-different-types">Comparison of different types</h3>
<p>When comparing values of different types, JavaScript converts the values to numbers.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#39;2&#39;</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// true, string &#39;2&#39; becomes a number 2
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#39;01&#39;</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// true, string &#39;01&#39; becomes a number 1
</span></code></pre></div><p>For boolean values, <code>true</code> becomes <code>1</code> and <code>false</code> becomes <code>0</code>.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">false</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>It is possible that at the same time:</p>
<ul>
<li>Two values are equal.</li>
<li>One of them is <code>true</code> as a boolean and the other one is <code>false</code> as a boolean.</li>
</ul>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(a) ); <span style="color:#6272a4">// false
</span><span style="color:#6272a4"></span>
<span style="color:#8be9fd;font-style:italic">let</span> b <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;0&#34;</span>;
alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(b) ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>
alert(a <span style="color:#ff79c6">==</span> b); <span style="color:#6272a4">// true!
</span></code></pre></div><p>From JavaScript&rsquo;s standpoint, this result is quite normal. An equality check converts values using the numeric conversion (hence <code>&quot;0&quot;</code> becomes <code>0</code>), while the explicit <code>Boolean</code> conversion uses another set of rules.</p>
<h3 id="strict-equality">Strict equality</h3>
<p>A regular equality check <code>==</code> has a problem. It cannot differentiate <code>0</code> from <code>false</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">false</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>The same thing happens with an empty string:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#39;&#39;</span> <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">false</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>This happens because operands of different types are converted to numbers by the equality operator <code>==</code>. An empty string, just like <code>false</code>, becomes a zero.</p>
<p>What to do if we&rsquo;d like to differentiate <code>0</code> from <code>false</code>?</p>
<p><strong>A strict equality operator <code>===</code> checks the equality without type conversion.</strong></p>
<p>In other words, if <code>a</code> and <code>b</code> are of different types, then <code>a === b</code> immediately returns <code>false</code> without an attempt to convert them.</p>
<p>Let&rsquo;s try it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">false</span> ); <span style="color:#6272a4">// false, because the types are different
</span></code></pre></div><p>There is also a &ldquo;strict non-equality&rdquo; operator <code>!==</code> analogous to <code>!=</code>.</p>
<p>The strict equality operator is a bit longer to write, but makes it obvious what&rsquo;s going on and leaves less room for errors.</p>
<h3 id="comparison-with-null-and-undefined">Comparison with null and undefined</h3>
<p>There&rsquo;s a non-intuitive behavior when <code>null</code> or <code>undefined</code> are compared to other values.</p>
<dl>
<dt>For a strict equality check <code>===</code></dt>
<dd>These values are different, because each of them is a different type.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">undefined</span> ); <span style="color:#6272a4">// false
</span></code></pre></div></dd>
<dt>For a non-strict check <code>==</code></dt>
<dd>There&rsquo;s a special rule. These two are a &ldquo;sweet couple&rdquo;: they equal each other (in the sense of <code>==</code>), but not any other value.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">undefined</span> ); <span style="color:#6272a4">// true
</span></code></pre></div></dd>
<dt>For maths and other comparisons <code>&lt; &gt; &lt;= &gt;=</code></dt>
<dd><code>null/undefined</code> are converted to numbers: <code>null</code> becomes <code>0</code>, while <code>undefined</code> becomes <code>NaN</code>.</dd>
</dl>
<p>Now let&rsquo;s see some funny things that happen when we apply these rules. And, what&rsquo;s more important, how to not fall into a trap with them.</p>
<h4 id="strange-result-null-vs-0">Strange result: null vs 0</h4>
<p>Let&rsquo;s compare <code>null</code> with a zero:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">0</span> );  <span style="color:#6272a4">// (1) false
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// (2) false
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">&gt;=</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// (3) true
</span></code></pre></div><p>Mathematically, that&rsquo;s strange. The last result states that &ldquo;<code>null</code> is greater than or equal to zero&rdquo;, so in one of the comparisons above it must be <code>true</code>, but they are both false.</p>
<p>The reason is that an equality check <code>==</code> and comparisons <code>&gt; &lt; &gt;= &lt;=</code> work differently. Comparisons convert <code>null</code> to a number, treating it as <code>0</code>. That&rsquo;s why (3) <code>null &gt;= 0</code> is true and (1) <code>null &gt; 0</code> is false.</p>
<p>On the other hand, the equality check <code>==</code> for <code>undefined</code> and <code>null</code> is defined such that, without any conversions, they equal each other and don&rsquo;t equal anything else. That&rsquo;s why (2) <code>null == 0</code> is false.</p>
<h4 id="an-incomparable-undefined">An incomparable undefined</h4>
<p>The value <code>undefined</code> shouldn&rsquo;t be compared to other values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">undefined</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// false (1)
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">undefined</span> <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// false (2)
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">undefined</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// false (3)
</span></code></pre></div><p>Why does it dislike zero so much? Always false!</p>
<p>We get these results because:</p>
<ul>
<li>Comparisons <code>(1)</code> and <code>(2)</code> return <code>false</code> because <code>undefined</code> gets converted to <code>NaN</code> and <code>NaN</code> is a special numeric value which returns <code>false</code> for all comparisons.</li>
<li>The equality check <code>(3)</code> returns <code>false</code> because <code>undefined</code> only equals <code>null</code>, <code>undefined</code>, and no other value.</li>
</ul>
<h4 id="avoid-problems">Avoid problems</h4>
<p>Why did we go over these examples? Should we remember these peculiarities all the time? Well, not really. Actually, these tricky things will gradually become familiar over time, but there&rsquo;s a solid way to avoid problems with them:</p>
<ul>
<li>Treat any comparison with <code>undefined/null</code> except the strict equality <code>===</code> with exceptional care.</li>
<li>Don&rsquo;t use comparisons <code>&gt;= &gt; &lt; &lt;=</code> with a variable which may be <code>null/undefined</code>, unless you&rsquo;re really sure of what you&rsquo;re doing. If a variable can have these values, check for them separately.</li>
</ul>
<h3 id="summary-4">Summary</h3>
<ul>
<li>Comparison operators return a boolean value.</li>
<li>Strings are compared letter-by-letter in the &ldquo;dictionary&rdquo; order.</li>
<li>When values of different types are compared, they get converted to numbers (with the exclusion of a strict equality check).</li>
<li>The values <code>null</code> and <code>undefined</code> equal <code>==</code> each other and do not equal any other value.</li>
<li>Be careful when using comparisons like <code>&gt;</code> or <code>&lt;</code> with variables that can occasionally be <code>null/undefined</code>. Checking for <code>null/undefined</code> separately is a good idea.</li>
</ul>
<h2 id="conditional-branching-if-">Conditional branching: if, &lsquo;?&rsquo;</h2>
<p>Sometimes, we need to perform different actions based on different conditions.</p>
<p>To do that, we can use the <code>if</code> statement and the conditional operator <code>?</code>, that&rsquo;s also called a &ldquo;question mark&rdquo; operator.</p>
<h3 id="the-if-statement">The &ldquo;if&rdquo; statement</h3>
<p>The <code>if(...)</code> statement evaluates a condition in parentheses and, if the result is <code>true</code>, executes a block of code.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> year <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;In which year was ECMAScript-2015 specification published?&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);


<span style="color:#ff79c6">if</span> (year <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2015</span>) alert( <span style="color:#f1fa8c">&#39;You are right!&#39;</span> );

</code></pre></div><p>In the example above, the condition is a simple equality check (<code>year == 2015</code>), but it can be much more complex.</p>
<p>If we want to execute more than one statement, we have to wrap our code block inside curly braces:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (year <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2015</span>) {
  alert( <span style="color:#f1fa8c">&#34;That&#39;s correct!&#34;</span> );
  alert( <span style="color:#f1fa8c">&#34;You&#39;re so smart!&#34;</span> );
}
</code></pre></div><p>We recommend wrapping your code block with curly braces <code>{}</code> every time you use an <code>if</code> statement, even if there is only one statement to execute. Doing so improves readability.</p>
<h3 id="boolean-conversion-1">Boolean conversion</h3>
<p>The <code>if (…)</code> statement evaluates the expression in its parentheses and converts the result to a boolean.</p>
<p>Let&rsquo;s recall the conversion rules from the chapter <a href="info:type-conversions">info:type-conversions</a>:</p>
<ul>
<li>A number <code>0</code>, an empty string <code>&quot;&quot;</code>, <code>null</code>, <code>undefined</code>, and <code>NaN</code> all become <code>false</code>. Because of that they are called &ldquo;falsy&rdquo; values.</li>
<li>Other values become <code>true</code>, so they are called &ldquo;truthy&rdquo;.</li>
</ul>
<p>So, the code under this condition would never execute:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (<span style="color:#bd93f9">0</span>) { <span style="color:#6272a4">// 0 is falsy
</span><span style="color:#6272a4"></span>  ...
}
</code></pre></div><p>&hellip;and inside this condition &ndash; it always will:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (<span style="color:#bd93f9">1</span>) { <span style="color:#6272a4">// 1 is truthy
</span><span style="color:#6272a4"></span>  ...
}
</code></pre></div><p>We can also pass a pre-evaluated boolean value to <code>if</code>, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> cond <span style="color:#ff79c6">=</span> (year <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2015</span>); <span style="color:#6272a4">// equality evaluates to true or false
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">if</span> (cond) {
  ...
}
</code></pre></div><h3 id="the-else-clause">The &ldquo;else&rdquo; clause</h3>
<p>The <code>if</code> statement may contain an optional &ldquo;else&rdquo; block. It executes when the condition is false.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> year <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;In which year was the ECMAScript-2015 specification published?&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);

<span style="color:#ff79c6">if</span> (year <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2015</span>) {
  alert( <span style="color:#f1fa8c">&#39;You guessed it right!&#39;</span> );
} <span style="color:#ff79c6">else</span> {
  alert( <span style="color:#f1fa8c">&#39;How can you be so wrong?&#39;</span> ); <span style="color:#6272a4">// any value except 2015
</span><span style="color:#6272a4"></span>}
</code></pre></div><h3 id="several-conditions-else-if">Several conditions: &ldquo;else if&rdquo;</h3>
<p>Sometimes, we&rsquo;d like to test several variants of a condition. The <code>else if</code> clause lets us do that.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> year <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;In which year was the ECMAScript-2015 specification published?&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);

<span style="color:#ff79c6">if</span> (year <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">2015</span>) {
  alert( <span style="color:#f1fa8c">&#39;Too early...&#39;</span> );
} <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> (year <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">2015</span>) {
  alert( <span style="color:#f1fa8c">&#39;Too late&#39;</span> );
} <span style="color:#ff79c6">else</span> {
  alert( <span style="color:#f1fa8c">&#39;Exactly!&#39;</span> );
}
</code></pre></div><p>In the code above, JavaScript first checks <code>year &lt; 2015</code>. If that is falsy, it goes to the next condition <code>year &gt; 2015</code>. If that is also falsy, it shows the last <code>alert</code>.</p>
<p>There can be more <code>else if</code> blocks. The final <code>else</code> is optional.</p>
<h3 id="conditional-operator-">Conditional operator &lsquo;?&rsquo;</h3>
<p>Sometimes, we need to assign a variable depending on a condition.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> accessAllowed;
<span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;How old are you?&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);


<span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">18</span>) {
  accessAllowed <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;
} <span style="color:#ff79c6">else</span> {
  accessAllowed <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">false</span>;
}


alert(accessAllowed);
</code></pre></div><p>The so-called &ldquo;conditional&rdquo; or &ldquo;question mark&rdquo; operator lets us do that in a shorter and simpler way.</p>
<p>The operator is represented by a question mark <code>?</code>. Sometimes it&rsquo;s called &ldquo;ternary&rdquo;, because the operator has three operands. It is actually the one and only operator in JavaScript which has that many.</p>
<p>The syntax is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> condition <span style="color:#ff79c6">?</span> value1 <span style="color:#ff79c6">:</span> value2;
</code></pre></div><p>The <code>condition</code> is evaluated: if it&rsquo;s truthy then <code>value1</code> is returned, otherwise &ndash; <code>value2</code>.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> accessAllowed <span style="color:#ff79c6">=</span> (age <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">18</span>) <span style="color:#ff79c6">?</span> <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>;
</code></pre></div><p>Technically, we can omit the parentheses around <code>age &gt; 18</code>. The question mark operator has a low precedence, so it executes after the comparison <code>&gt;</code>.</p>
<p>This example will do the same thing as the previous one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// the comparison operator &#34;age &gt; 18&#34; executes first anyway
</span><span style="color:#6272a4">// (no need to wrap it into parentheses)
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> accessAllowed <span style="color:#ff79c6">=</span> age <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">18</span> <span style="color:#ff79c6">?</span> <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>;
</code></pre></div><p>But parentheses make the code more readable, so we recommend using them.</p>
<p>smart
In the example above, you can avoid using the question mark operator because the comparison itself returns <code>true/false</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// the same
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> accessAllowed <span style="color:#ff79c6">=</span> age <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">18</span>;
</code></pre></div><h3 id="multiple-">Multiple &lsquo;?&rsquo;</h3>
<p>A sequence of question mark operators <code>?</code> can return a value that depends on more than one condition.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;age?&#39;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>) <span style="color:#ff79c6">?</span> <span style="color:#f1fa8c">&#39;Hi, baby!&#39;</span> <span style="color:#ff79c6">:</span>
  (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) <span style="color:#ff79c6">?</span> <span style="color:#f1fa8c">&#39;Hello!&#39;</span> <span style="color:#ff79c6">:</span>
  (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">100</span>) <span style="color:#ff79c6">?</span> <span style="color:#f1fa8c">&#39;Greetings!&#39;</span> <span style="color:#ff79c6">:</span>
  <span style="color:#f1fa8c">&#39;What an unusual age!&#39;</span>;

alert( message );
</code></pre></div><p>It may be difficult at first to grasp what&rsquo;s going on. But after a closer look, we can see that it&rsquo;s just an ordinary sequence of tests:</p>
<ol>
<li>The first question mark checks whether <code>age &lt; 3</code>.</li>
<li>If true &ndash; it returns <code>'Hi, baby!'</code>. Otherwise, it continues to the expression after the colon &lsquo;&quot;:&quot;&rsquo;, checking <code>age &lt; 18</code>.</li>
<li>If that&rsquo;s true &ndash; it returns <code>'Hello!'</code>. Otherwise, it continues to the expression after the next colon &lsquo;&quot;:&quot;&rsquo;, checking <code>age &lt; 100</code>.</li>
<li>If that&rsquo;s true &ndash; it returns <code>'Greetings!'</code>. Otherwise, it continues to the expression after the last colon &lsquo;&quot;:&quot;&rsquo;, returning <code>'What an unusual age!'</code>.</li>
</ol>
<p>Here&rsquo;s how this looks using <code>if..else</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>) {
  message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hi, baby!&#39;</span>;
} <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) {
  message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello!&#39;</span>;
} <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">100</span>) {
  message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Greetings!&#39;</span>;
} <span style="color:#ff79c6">else</span> {
  message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;What an unusual age!&#39;</span>;
}
</code></pre></div><h3 id="non-traditional-use-of-">Non-traditional use of &lsquo;?&rsquo;</h3>
<p>Sometimes the question mark <code>?</code> is used as a replacement for <code>if</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> company <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;Which company created JavaScript?&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);


(company <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;Netscape&#39;</span>) <span style="color:#ff79c6">?</span>
   alert(<span style="color:#f1fa8c">&#39;Right!&#39;</span>) <span style="color:#ff79c6">:</span> alert(<span style="color:#f1fa8c">&#39;Wrong.&#39;</span>);

</code></pre></div><p>Depending on the condition <code>company == 'Netscape'</code>, either the first or the second expression after the <code>?</code> gets executed and shows an alert.</p>
<p>We don&rsquo;t assign a result to a variable here. Instead, we execute different code depending on the condition.</p>
<p><strong>It&rsquo;s not recommended to use the question mark operator in this way.</strong></p>
<p>The notation is shorter than the equivalent <code>if</code> statement, which appeals to some programmers. But it is less readable.</p>
<p>Here is the same code using <code>if</code> for comparison:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> company <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;Which company created JavaScript?&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);


<span style="color:#ff79c6">if</span> (company <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;Netscape&#39;</span>) {
  alert(<span style="color:#f1fa8c">&#39;Right!&#39;</span>);
} <span style="color:#ff79c6">else</span> {
  alert(<span style="color:#f1fa8c">&#39;Wrong.&#39;</span>);
}

</code></pre></div><p>Our eyes scan the code vertically. Code blocks which span several lines are easier to understand than a long, horizontal instruction set.</p>
<p>The purpose of the question mark operator <code>?</code> is to return one value or another depending on its condition. Please use it for exactly that. Use <code>if</code> when you need to execute different branches of code.</p>
<h2 id="logical-operators">Logical operators</h2>
<p>There are three logical operators in JavaScript: <code>||</code> (OR), <code>&amp;&amp;</code> (AND), <code>!</code> (NOT).</p>
<p>Although they are called &ldquo;logical&rdquo;, they can be applied to values of any type, not only boolean. Their result can also be of any type.</p>
<p>Let&rsquo;s see the details.</p>
<h3 id="-or">|| (OR)</h3>
<p>The &ldquo;OR&rdquo; operator is represented with two vertical line symbols:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">||</span> b;
</code></pre></div><p>In classical programming, the logical OR is meant to manipulate boolean values only. If any of its arguments are <code>true</code>, it returns <code>true</code>, otherwise it returns <code>false</code>.</p>
<p>In JavaScript, the operator is a little bit trickier and more powerful. But first, let&rsquo;s see what happens with boolean values.</p>
<p>There are four possible logical combinations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">||</span> <span style="color:#ff79c6">true</span> );   <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">false</span> <span style="color:#ff79c6">||</span> <span style="color:#ff79c6">true</span> );  <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">||</span> <span style="color:#ff79c6">false</span> );  <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">false</span> <span style="color:#ff79c6">||</span> <span style="color:#ff79c6">false</span> ); <span style="color:#6272a4">// false
</span></code></pre></div><p>As we can see, the result is always <code>true</code> except for the case when both operands are <code>false</code>.</p>
<p>If an operand is not a boolean, it&rsquo;s converted to a boolean for the evaluation.</p>
<p>For instance, the number <code>1</code> is treated as <code>true</code>, the number <code>0</code> as <code>false</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (<span style="color:#bd93f9">1</span> <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">0</span>) { <span style="color:#6272a4">// works just like if( true || false )
</span><span style="color:#6272a4"></span>  alert( <span style="color:#f1fa8c">&#39;truthy!&#39;</span> );
}
</code></pre></div><p>Most of the time, OR <code>||</code> is used in an <code>if</code> statement to test if <em>any</em> of the given conditions is <code>true</code>.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> hour <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">9</span>;


<span style="color:#ff79c6">if</span> (hour <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">10</span> <span style="color:#ff79c6">||</span> hour <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">18</span>) {

  alert( <span style="color:#f1fa8c">&#39;The office is closed.&#39;</span> );
}
</code></pre></div><p>We can pass more conditions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> hour <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">12</span>;
<span style="color:#8be9fd;font-style:italic">let</span> isWeekend <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;

<span style="color:#ff79c6">if</span> (hour <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">10</span> <span style="color:#ff79c6">||</span> hour <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">18</span> <span style="color:#ff79c6">||</span> isWeekend) {
  alert( <span style="color:#f1fa8c">&#39;The office is closed.&#39;</span> ); <span style="color:#6272a4">// it is the weekend
</span><span style="color:#6272a4"></span>}
</code></pre></div><h3 id="or--finds-the-first-truthy-value">OR &ldquo;||&rdquo; finds the first truthy value</h3>
<p>The logic described above is somewhat classical. Now, let&rsquo;s bring in the &ldquo;extra&rdquo; features of JavaScript.</p>
<p>The extended algorithm works as follows.</p>
<p>Given multiple OR&rsquo;ed values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> value1 <span style="color:#ff79c6">||</span> value2 <span style="color:#ff79c6">||</span> value3;
</code></pre></div><p>The OR <code>||</code> operator does the following:</p>
<ul>
<li>Evaluates operands from left to right.</li>
<li>For each operand, converts it to boolean. If the result is <code>true</code>, stops and returns the original value of that operand.</li>
<li>If all operands have been evaluated (i.e. all were <code>false</code>), returns the last operand.</li>
</ul>
<p>A value is returned in its original form, without the conversion.</p>
<p>In other words, a chain of OR <code>&quot;||&quot;</code> returns the first truthy value or the last one if no truthy value is found.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// 1 (1 is truthy)
</span><span style="color:#6272a4"></span>
alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// 1 (1 is the first truthy value)
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">1</span> ); <span style="color:#6272a4">// 1 (the first truthy value)
</span><span style="color:#6272a4"></span>
alert( <span style="color:#ff79c6">undefined</span> <span style="color:#ff79c6">||</span> <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// 0 (all falsy, returns the last value)
</span></code></pre></div><p>This leads to some interesting usage compared to a &ldquo;pure, classical, boolean-only OR&rdquo;.</p>
<ol>
<li>
<p><strong>Getting the first truthy value from a list of variables or expressions.</strong></p>
<p>For instance, we have <code>firstName</code>, <code>lastName</code> and <code>nickName</code> variables, all optional.</p>
<p>Let&rsquo;s use OR <code>||</code> to choose the one that has the data and show it (or <code>anonymous</code> if nothing set):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> firstName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> lastName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> nickName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;SuperCoder&#34;</span>;


alert( firstName <span style="color:#ff79c6">||</span> lastName <span style="color:#ff79c6">||</span> nickName <span style="color:#ff79c6">||</span> <span style="color:#f1fa8c">&#34;Anonymous&#34;</span>); <span style="color:#6272a4">// SuperCoder
</span><span style="color:#6272a4"></span>
</code></pre></div><p>If all variables were falsy, <code>Anonymous</code> would show up.</p>
</li>
<li>
<p><strong>Short-circuit evaluation.</strong></p>
<p>Another feature of OR <code>||</code> operator is the so-called &ldquo;short-circuit&rdquo; evaluation.</p>
<p>It means that <code>||</code> processes its arguments until the first truthy value is reached, and then the value is returned immediately, without even touching the other argument.</p>
<p>That importance of this feature becomes obvious if an operand isn&rsquo;t just a value, but an expression with a side effect, such as a variable assignment or a function call.</p>
<p>In the example below, only the second message is printed:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">true</span> <span style="color:#ff79c6">||</span> alert(<span style="color:#f1fa8c">&#34;not printed&#34;</span>);
<span style="color:#ff79c6">false</span> <span style="color:#ff79c6">||</span> alert(<span style="color:#f1fa8c">&#34;printed&#34;</span>);
</code></pre></div><p>In the first line, the OR <code>||</code> operator stops the evaluation immediately upon seeing <code>true</code>, so the <code>alert</code> isn&rsquo;t run.</p>
<p>Sometimes, people use this feature to execute commands only if the condition on the left part is falsy.</p>
</li>
</ol>
<h3 id="-and">&amp;&amp; (AND)</h3>
<p>The AND operator is represented with two ampersands <code>&amp;&amp;</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">&amp;&amp;</span> b;
</code></pre></div><p>In classical programming, AND returns <code>true</code> if both operands are truthy and <code>false</code> otherwise:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">true</span> );   <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">false</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">true</span> );  <span style="color:#6272a4">// false
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">true</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">false</span> );  <span style="color:#6272a4">// false
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">false</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">false</span> ); <span style="color:#6272a4">// false
</span></code></pre></div><p>An example with <code>if</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> hour <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">12</span>;
<span style="color:#8be9fd;font-style:italic">let</span> minute <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">30</span>;

<span style="color:#ff79c6">if</span> (hour <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">12</span> <span style="color:#ff79c6">&amp;&amp;</span> minute <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">30</span>) {
  alert( <span style="color:#f1fa8c">&#39;The time is 12:30&#39;</span> );
}
</code></pre></div><p>Just as with OR, any value is allowed as an operand of AND:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (<span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">0</span>) { <span style="color:#6272a4">// evaluated as true &amp;&amp; false
</span><span style="color:#6272a4"></span>  alert( <span style="color:#f1fa8c">&#34;won&#39;t work, because the result is falsy&#34;</span> );
}
</code></pre></div><h3 id="and--finds-the-first-falsy-value">AND &ldquo;&amp;&amp;&rdquo; finds the first falsy value</h3>
<p>Given multiple AND&rsquo;ed values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> value1 <span style="color:#ff79c6">&amp;&amp;</span> value2 <span style="color:#ff79c6">&amp;&amp;</span> value3;
</code></pre></div><p>The AND <code>&amp;&amp;</code> operator does the following:</p>
<ul>
<li>Evaluates operands from left to right.</li>
<li>For each operand, converts it to a boolean. If the result is <code>false</code>, stops and returns the original value of that operand.</li>
<li>If all operands have been evaluated (i.e. all were truthy), returns the last operand.</li>
</ul>
<p>In other words, AND returns the first falsy value or the last value if none were found.</p>
<p>The rules above are similar to OR. The difference is that AND returns the first <em>falsy</em> value while OR returns the first <em>truthy</em> one.</p>
<p>Examples:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// if the first operand is truthy,
</span><span style="color:#6272a4">// AND returns the second operand:
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// 0
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">5</span> ); <span style="color:#6272a4">// 5
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// if the first operand is falsy,
</span><span style="color:#6272a4">// AND returns it. The second operand is ignored
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">5</span> ); <span style="color:#6272a4">// null
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#f1fa8c">&#34;no matter what&#34;</span> ); <span style="color:#6272a4">// 0
</span></code></pre></div><p>We can also pass several values in a row. See how the first falsy one is returned:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">3</span> ); <span style="color:#6272a4">// null
</span></code></pre></div><p>When all values are truthy, the last value is returned:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">3</span> ); <span style="color:#6272a4">// 3, the last one
</span></code></pre></div><p>The precedence of AND <code>&amp;&amp;</code> operator is higher than OR <code>||</code>.</p>
<p>So the code <code>a &amp;&amp; b || c &amp;&amp; d</code> is essentially the same as if the <code>&amp;&amp;</code> expressions were in parentheses: <code>(a &amp;&amp; b) || (c &amp;&amp; d)</code>.</p>
<p>Sometimes, people use the AND <code>&amp;&amp;</code> operator as a &ldquo;shorter to write <code>if</code>&rdquo;.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;

(x <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">0</span>) <span style="color:#ff79c6">&amp;&amp;</span> alert( <span style="color:#f1fa8c">&#39;Greater than zero!&#39;</span> );
</code></pre></div><p>The action in the right part of <code>&amp;&amp;</code> would execute only if the evaluation reaches it. That is, only if <code>(x &gt; 0)</code> is true.</p>
<p>So we basically have an analogue for:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;

<span style="color:#ff79c6">if</span> (x <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">0</span>) alert( <span style="color:#f1fa8c">&#39;Greater than zero!&#39;</span> );
</code></pre></div><p>Although, the variant with <code>&amp;&amp;</code> appears shorter, <code>if</code> is more obvious and tends to be a little bit more readable. So we recommend using every construct for its purpose: use <code>if</code> if we want if and use <code>&amp;&amp;</code> if we want AND.</p>
<h3 id="-not">! (NOT)</h3>
<p>The boolean NOT operator is represented with an exclamation sign <code>!</code>.</p>
<p>The syntax is pretty simple:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">result <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">!</span>value;
</code></pre></div><p>The operator accepts a single argument and does the following:</p>
<ol>
<li>Converts the operand to boolean type: <code>true/false</code>.</li>
<li>Returns the inverse value.</li>
</ol>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">!</span><span style="color:#ff79c6">true</span> ); <span style="color:#6272a4">// false
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">!</span><span style="color:#bd93f9">0</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>A double NOT <code>!!</code> is sometimes used for converting a value to boolean type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#ff79c6">!!</span><span style="color:#f1fa8c">&#34;non-empty string&#34;</span> ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#ff79c6">!!</span><span style="color:#ff79c6">null</span> ); <span style="color:#6272a4">// false
</span></code></pre></div><p>That is, the first NOT converts the value to boolean and returns the inverse, and the second NOT inverses it again. In the end, we have a plain value-to-boolean conversion.</p>
<p>There&rsquo;s a little more verbose way to do the same thing &ndash; a built-in <code>Boolean</code> function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#f1fa8c">&#34;non-empty string&#34;</span>) ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">Boolean</span>(<span style="color:#ff79c6">null</span>) ); <span style="color:#6272a4">// false
</span></code></pre></div><p>The precedence of NOT <code>!</code> is the highest of all logical operators, so it always executes first, before <code>&amp;&amp;</code> or <code>||</code>.</p>
<h2 id="nullish-coalescing-operator-">Nullish coalescing operator &lsquo;??&rsquo;</h2>
<p>[recent browser=&ldquo;new&rdquo;]</p>
<p>The nullish coalescing operator <code>??</code> provides a short syntax for selecting a first &ldquo;defined&rdquo; variable from the list.</p>
<p>The result of <code>a ?? b</code> is:</p>
<ul>
<li><code>a</code> if it&rsquo;s not <code>null</code> or <code>undefined</code>,</li>
<li><code>b</code>, otherwise.</li>
</ul>
<p>So, <code>x = a ?? b</code> is a short equivalent to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">x <span style="color:#ff79c6">=</span> (a <span style="color:#ff79c6">!==</span> <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">&amp;&amp;</span> a <span style="color:#ff79c6">!==</span> <span style="color:#ff79c6">undefined</span>) <span style="color:#ff79c6">?</span> a <span style="color:#ff79c6">:</span> b;
</code></pre></div><p>Here&rsquo;s a longer example.</p>
<p>Imagine, we have a user, and there are variables <code>firstName</code>, <code>lastName</code> or <code>nickName</code> for their first name, last name and the nick name. All of them may be undefined, if the user decided not to enter any value.</p>
<p>We&rsquo;d like to display the user name: one of these three variables, or show &ldquo;Anonymous&rdquo; if nothing is set.</p>
<p>Let&rsquo;s use the <code>??</code> operator to select the first defined one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> firstName <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
<span style="color:#8be9fd;font-style:italic">let</span> lastName <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
<span style="color:#8be9fd;font-style:italic">let</span> nickName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Supercoder&#34;</span>;

<span style="color:#6272a4">// show the first not-null/undefined value
</span><span style="color:#6272a4"></span>
alert(firstName <span style="color:#ff79c6">??</span> lastName <span style="color:#ff79c6">??</span> nickName <span style="color:#ff79c6">??</span> <span style="color:#f1fa8c">&#34;Anonymous&#34;</span>); <span style="color:#6272a4">// Supercoder
</span><span style="color:#6272a4"></span>
</code></pre></div><h3 id="comparison-with-">Comparison with ||</h3>
<p>The OR <code>||</code> operator can be used in the same way as <code>??</code>. Actually, we can replace <code>??</code> with <code>||</code> in the code above and get the same result, as it was described in the <a href="info:logical-operators#or-finds-the-first-truthy-value">previous chapter</a>.</p>
<p>The important difference is that:</p>
<ul>
<li><code>||</code> returns the first <em>truthy</em> value.</li>
<li><code>??</code> returns the first <em>defined</em> value.</li>
</ul>
<p>This matters a lot when we&rsquo;d like to treat <code>null/undefined</code> differently from <code>0</code>.</p>
<p>For example, consider this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">height <span style="color:#ff79c6">=</span> height <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">100</span>;
</code></pre></div><p>This sets <code>height</code> to <code>100</code> if it&rsquo;s not defined.</p>
<p>Let&rsquo;s compare it with <code>||</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> height <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;

alert(height <span style="color:#ff79c6">||</span> <span style="color:#bd93f9">100</span>); <span style="color:#6272a4">// 100
</span><span style="color:#6272a4"></span>alert(height <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">100</span>); <span style="color:#6272a4">// 0
</span></code></pre></div><p>Here, <code>height || 100</code> treats zero height as unset, same as <code>null</code>, <code>undefined</code> or any other falsy value. So the result is <code>100</code>.</p>
<p>The <code>height ?? 100</code> returns <code>100</code> only if <code>height</code> is exactly <code>null</code> or <code>undefined</code>. So the <code>alert</code> shows the height value <code>0</code> &ldquo;as is&rdquo;.</p>
<p>Which behavior is better depends on a particular use case. When zero height is a valid value, then <code>??</code> is preferrable.</p>
<h3 id="precedence">Precedence</h3>
<p>The precedence of the <code>??</code> operator is rather low: <code>5</code> in the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table">MDN table</a>.</p>
<p>So <code>??</code> is evaluated after most other operations, but before <code>=</code> and <code>?</code>.</p>
<p>If we need to choose a value with <code>??</code> in a complex expression, then consider adding parentheses:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> height <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
<span style="color:#8be9fd;font-style:italic">let</span> width <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;

<span style="color:#6272a4">// important: use parentheses
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> area <span style="color:#ff79c6">=</span> (height <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">100</span>) <span style="color:#ff79c6">*</span> (width <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">50</span>);

alert(area); <span style="color:#6272a4">// 5000
</span></code></pre></div><p>Otherwise, if we omit parentheses, <code>*</code> has the higher precedence than <code>??</code> and would run first.</p>
<p>That would work be the same as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// probably not correct
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> area <span style="color:#ff79c6">=</span> height <span style="color:#ff79c6">??</span> (<span style="color:#bd93f9">100</span> <span style="color:#ff79c6">*</span> width) <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">50</span>;
</code></pre></div><p>There&rsquo;s also a related language-level limitation.</p>
<p><strong>Due to safety reasons, it&rsquo;s forbidden to use <code>??</code> together with <code>&amp;&amp;</code> and <code>||</code> operators.</strong></p>
<p>The code below triggers a syntax error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">3</span>; <span style="color:#6272a4">// Syntax error
</span></code></pre></div><p>The limitation is surely debatable, but it was added to the language specification with the purpose to avoid programming mistakes, as people start to switch to <code>??</code> from <code>||</code>.</p>
<p>Use explicit parentheses to work around it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> (<span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#bd93f9">2</span>) <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">3</span>; <span style="color:#6272a4">// Works
</span><span style="color:#6272a4"></span>

alert(x); <span style="color:#6272a4">// 2
</span></code></pre></div><h3 id="summary-5">Summary</h3>
<ul>
<li>
<p>The nullish coalescing operator <code>??</code> provides a short way to choose a &ldquo;defined&rdquo; value from the list.</p>
<p>It&rsquo;s used to assign default values to variables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// set height=100, if height is null or undefined
</span><span style="color:#6272a4"></span>height <span style="color:#ff79c6">=</span> height <span style="color:#ff79c6">??</span> <span style="color:#bd93f9">100</span>;
</code></pre></div></li>
<li>
<p>The operator <code>??</code> has a very low precedence, a bit higher than <code>?</code> and <code>=</code>.</p>
</li>
<li>
<p>It&rsquo;s forbidden to use it with <code>||</code> or <code>&amp;&amp;</code> without explicit parentheses.</p>
</li>
</ul>
<h2 id="loops-while-and-for">Loops: while and for</h2>
<p>We often need to repeat actions.</p>
<p>For example, outputting goods from a list one after another or just running the same code for each number from 1 to 10.</p>
<p><em>Loops</em> are a way to repeat the same code multiple times.</p>
<h3 id="the-while-loop">The &ldquo;while&rdquo; loop</h3>
<p>The <code>while</code> loop has the following syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">while</span> (condition) {
  <span style="color:#6272a4">// code
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// so-called &#34;loop body&#34;
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>While the <code>condition</code> is truthy, the <code>code</code> from the loop body is executed.</p>
<p>For instance, the loop below outputs <code>i</code> while <code>i &lt; 3</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
<span style="color:#ff79c6">while</span> (i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>) { <span style="color:#6272a4">// shows 0, then 1, then 2
</span><span style="color:#6272a4"></span>  alert( i );
  i<span style="color:#ff79c6">++</span>;
}
</code></pre></div><p>A single execution of the loop body is called <em>an iteration</em>. The loop in the example above makes three iterations.</p>
<p>If <code>i++</code> was missing from the example above, the loop would repeat (in theory) forever. In practice, the browser provides ways to stop such loops, and in server-side JavaScript, we can kill the process.</p>
<p>Any expression or variable can be a loop condition, not just comparisons: the condition is evaluated and converted to a boolean by <code>while</code>.</p>
<p>For instance, a shorter way to write <code>while (i != 0)</code> is <code>while (i)</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">3</span>;

<span style="color:#ff79c6">while</span> (i) { <span style="color:#6272a4">// when i becomes 0, the condition becomes falsy, and the loop stops
</span><span style="color:#6272a4"></span>
  alert( i );
  i<span style="color:#ff79c6">--</span>;
}
</code></pre></div><p>If the loop body has a single statement, we can omit the curly braces <code>{…}</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">3</span>;

<span style="color:#ff79c6">while</span> (i) alert(i<span style="color:#ff79c6">--</span>);

</code></pre></div><h3 id="the-dowhile-loop">The &ldquo;do..while&rdquo; loop</h3>
<p>The condition check can be moved <em>below</em> the loop body using the <code>do..while</code> syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">do</span> {
  <span style="color:#6272a4">// loop body
</span><span style="color:#6272a4"></span>} <span style="color:#ff79c6">while</span> (condition);
</code></pre></div><p>The loop will first execute the body, then check the condition, and, while it&rsquo;s truthy, execute it again and again.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
<span style="color:#ff79c6">do</span> {
  alert( i );
  i<span style="color:#ff79c6">++</span>;
} <span style="color:#ff79c6">while</span> (i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>);
</code></pre></div><p>This form of syntax should only be used when you want the body of the loop to execute <strong>at least once</strong> regardless of the condition being truthy. Usually, the other form is preferred: <code>while(…) {…}</code>.</p>
<h3 id="the-for-loop">The &ldquo;for&rdquo; loop</h3>
<p>The <code>for</code> loop is more complex, but it&rsquo;s also the most commonly used loop.</p>
<p>It looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (begin; condition; step) {
  <span style="color:#6272a4">// ... loop body ...
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>Let&rsquo;s learn the meaning of these parts by example. The loop below runs <code>alert(i)</code> for <code>i</code> from <code>0</code> up to (but not including) <code>3</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) { <span style="color:#6272a4">// shows 0, then 1, then 2
</span><span style="color:#6272a4"></span>  alert(i);
}
</code></pre></div><p>Let&rsquo;s examine the <code>for</code> statement part-by-part:</p>
<table>
<thead>
<tr>
<th>part</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>begin</td>
<td><code>i = 0</code></td>
<td>Executes once upon entering the loop.</td>
</tr>
<tr>
<td>condition</td>
<td><code>i &lt; 3</code></td>
<td>Checked before every loop iteration. If false, the loop stops.</td>
</tr>
<tr>
<td>body</td>
<td><code>alert(i)</code></td>
<td>Runs again and again while the condition is truthy.</td>
</tr>
<tr>
<td>step</td>
<td><code>i++</code></td>
<td>Executes after the body on each iteration.</td>
</tr>
</tbody>
</table>
<p>The general loop algorithm works like this:</p>
<pre tabindex="0"><code>Run begin
→ (if condition → run body and run step)
→ (if condition → run body and run step)
→ (if condition → run body and run step)
→ ...
</code></pre><p>That is, <code>begin</code> executes once, and then it iterates: after each <code>condition</code> test, <code>body</code> and <code>step</code> are executed.</p>
<p>If you are new to loops, it could help to go back to the example and reproduce how it runs step-by-step on a piece of paper.</p>
<p>Here&rsquo;s exactly what happens in our case:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// for (let i = 0; i &lt; 3; i++) alert(i)
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// run begin
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>
<span style="color:#6272a4">// if condition → run body and run step
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>) { alert(i); i<span style="color:#ff79c6">++</span> }
<span style="color:#6272a4">// if condition → run body and run step
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>) { alert(i); i<span style="color:#ff79c6">++</span> }
<span style="color:#6272a4">// if condition → run body and run step
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>) { alert(i); i<span style="color:#ff79c6">++</span> }
<span style="color:#6272a4">// ...finish, because now i == 3
</span></code></pre></div><p>Here, the &ldquo;counter&rdquo; variable <code>i</code> is declared right in the loop. This is called an &ldquo;inline&rdquo; variable declaration. Such variables are visible only inside the loop.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) {
  alert(i); <span style="color:#6272a4">// 0, 1, 2
</span><span style="color:#6272a4"></span>}
alert(i); <span style="color:#6272a4">// error, no such variable
</span></code></pre></div><p>Instead of defining a variable, we could use an existing one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;

<span style="color:#ff79c6">for</span> (i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) { <span style="color:#6272a4">// use an existing variable
</span><span style="color:#6272a4"></span>  alert(i); <span style="color:#6272a4">// 0, 1, 2
</span><span style="color:#6272a4"></span>}

alert(i); <span style="color:#6272a4">// 3, visible, because declared outside of the loop
</span></code></pre></div><h4 id="skipping-parts">Skipping parts</h4>
<p>Any part of <code>for</code> can be skipped.</p>
<p>For example, we can omit <code>begin</code> if we don&rsquo;t need to do anything at the loop start.</p>
<p>Like here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; <span style="color:#6272a4">// we have i already declared and assigned
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">for</span> (; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) { <span style="color:#6272a4">// no need for &#34;begin&#34;
</span><span style="color:#6272a4"></span>  alert( i ); <span style="color:#6272a4">// 0, 1, 2
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>We can also remove the <code>step</code> part:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;

<span style="color:#ff79c6">for</span> (; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>;) {
  alert( i<span style="color:#ff79c6">++</span> );
}
</code></pre></div><p>This makes the loop identical to <code>while (i &lt; 3)</code>.</p>
<p>We can actually remove everything, creating an infinite loop:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (;;) {
  <span style="color:#6272a4">// repeats without limits
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>Please note that the two <code>for</code> semicolons <code>;</code> must be present. Otherwise, there would be a syntax error.</p>
<h3 id="breaking-the-loop">Breaking the loop</h3>
<p>Normally, a loop exits when its condition becomes falsy.</p>
<p>But we can force the exit at any time using the special <code>break</code> directive.</p>
<p>For example, the loop below asks the user for a series of numbers, &ldquo;breaking&rdquo; when no number is entered:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;

<span style="color:#ff79c6">while</span> (<span style="color:#ff79c6">true</span>) {

  <span style="color:#8be9fd;font-style:italic">let</span> value <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">+</span>prompt(<span style="color:#f1fa8c">&#34;Enter a number&#34;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);


  <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">!</span>value) <span style="color:#ff79c6">break</span>; <span style="color:#6272a4">// (*)
</span><span style="color:#6272a4"></span>

  sum <span style="color:#ff79c6">+=</span> value;

}
alert( <span style="color:#f1fa8c">&#39;Sum: &#39;</span> <span style="color:#ff79c6">+</span> sum );
</code></pre></div><p>The <code>break</code> directive is activated at the line <code>(*)</code> if the user enters an empty line or cancels the input. It stops the loop immediately, passing control to the first line after the loop. Namely, <code>alert</code>.</p>
<p>The combination &ldquo;infinite loop + <code>break</code> as needed&rdquo; is great for situations when a loop&rsquo;s condition must be checked not in the beginning or end of the loop, but in the middle or even in several places of its body.</p>
<h3 id="continue-to-the-next-iteration-continue">Continue to the next iteration [#continue]</h3>
<p>The <code>continue</code> directive is a &ldquo;lighter version&rdquo; of <code>break</code>. It doesn&rsquo;t stop the whole loop. Instead, it stops the current iteration and forces the loop to start a new one (if the condition allows).</p>
<p>We can use it if we&rsquo;re done with the current iteration and would like to move on to the next one.</p>
<p>The loop below uses <code>continue</code> to output only odd values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">10</span>; i<span style="color:#ff79c6">++</span>) {

  <span style="color:#6272a4">// if true, skip the remaining part of the body
</span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">%</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span>) <span style="color:#ff79c6">continue</span>;

  alert(i); <span style="color:#6272a4">// 1, then 3, 5, 7, 9
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>For even values of <code>i</code>, the <code>continue</code> directive stops executing the body and passes control to the next iteration of <code>for</code> (with the next number). So the <code>alert</code> is only called for odd values.</p>
<p>A loop that shows odd values could look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">10</span>; i<span style="color:#ff79c6">++</span>) {

  <span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">%</span> <span style="color:#bd93f9">2</span>) {
    alert( i );
  }

}
</code></pre></div><p>From a technical point of view, this is identical to the example above. Surely, we can just wrap the code in an <code>if</code> block instead of using <code>continue</code>.</p>
<p>But as a side-effect, this created one more level of nesting (the <code>alert</code> call inside the curly braces). If the code inside of <code>if</code> is longer than a few lines, that may decrease the overall readability.</p>
<p>Please note that syntax constructs that are not expressions cannot be used with the ternary operator <code>?</code>. In particular, directives such as <code>break/continue</code> aren&rsquo;t allowed there.</p>
<p>For example, if we take this code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">5</span>) {
  alert(i);
} <span style="color:#ff79c6">else</span> {
  <span style="color:#ff79c6">continue</span>;
}
</code></pre></div><p>&hellip;and rewrite it using a question mark:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">(i <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">5</span>) <span style="color:#ff79c6">?</span> alert(i) <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">continue</span>; <span style="color:#6272a4">// continue isn&#39;t allowed here
</span></code></pre></div><p>&hellip;it stops working: there&rsquo;s a syntax error.</p>
<p>This is just another reason not to use the question mark operator <code>?</code> instead of <code>if</code>.</p>
<h3 id="labels-for-breakcontinue">Labels for break/continue</h3>
<p>Sometimes we need to break out from multiple nested loops at once.</p>
<p>For example, in the code below we loop over <code>i</code> and <code>j</code>, prompting for the coordinates <code>(i, j)</code> from <code>(0,0)</code> to <code>(2,2)</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) {

  <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> j <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; j <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; j<span style="color:#ff79c6">++</span>) {

    <span style="color:#8be9fd;font-style:italic">let</span> input <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">`Value at coords (</span><span style="color:#f1fa8c">${</span>i<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">,</span><span style="color:#f1fa8c">${</span>j<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">)`</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);

    <span style="color:#6272a4">// what if we want to exit from here to Done (below)?
</span><span style="color:#6272a4"></span>  }
}

alert(<span style="color:#f1fa8c">&#39;Done!&#39;</span>);
</code></pre></div><p>We need a way to stop the process if the user cancels the input.</p>
<p>The ordinary <code>break</code> after <code>input</code> would only break the inner loop. That&rsquo;s not sufficient&ndash;labels, come to the rescue!</p>
<p>A <em>label</em> is an identifier with a colon before a loop:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">labelName<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">for</span> (...) {
  ...
}
</code></pre></div><p>The <code>break &lt;labelName&gt;</code> statement in the loop below breaks out to the label:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">outer<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) {

  <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> j <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; j <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; j<span style="color:#ff79c6">++</span>) {

    <span style="color:#8be9fd;font-style:italic">let</span> input <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">`Value at coords (</span><span style="color:#f1fa8c">${</span>i<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">,</span><span style="color:#f1fa8c">${</span>j<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">)`</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);

    <span style="color:#6272a4">// if an empty string or canceled, then break out of both loops
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">!</span>input) <span style="color:#ff79c6">break</span> outer; <span style="color:#6272a4">// (*)
</span><span style="color:#6272a4"></span>
    <span style="color:#6272a4">// do something with the value...
</span><span style="color:#6272a4"></span>  }
}
alert(<span style="color:#f1fa8c">&#39;Done!&#39;</span>);
</code></pre></div><p>In the code above, <code>break outer</code> looks upwards for the label named <code>outer</code> and breaks out of that loop.</p>
<p>So the control goes straight from <code>(*)</code> to <code>alert('Done!')</code>.</p>
<p>We can also move the label onto a separate line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">outer<span style="color:#ff79c6">:</span>
<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">3</span>; i<span style="color:#ff79c6">++</span>) { ... }
</code></pre></div><p>The <code>continue</code> directive can also be used with a label. In this case, code execution jumps to the next iteration of the labeled loop.</p>
<p>Labels do not allow us to jump into an arbitrary place in the code.</p>
<p>For example, it is impossible to do this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">break</span> label; <span style="color:#6272a4">// doesn&#39;t jumps to the label below
</span><span style="color:#6272a4"></span>
label<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">for</span> (...)
</code></pre></div><p>A call to <code>break/continue</code> is only possible from inside a loop and the label must be somewhere above the directive.</p>
<h3 id="summary-6">Summary</h3>
<p>We covered 3 types of loops:</p>
<ul>
<li><code>while</code> &ndash; The condition is checked before each iteration.</li>
<li><code>do..while</code> &ndash; The condition is checked after each iteration.</li>
<li><code>for (;;)</code> &ndash; The condition is checked before each iteration, additional settings available.</li>
</ul>
<p>To make an &ldquo;infinite&rdquo; loop, usually the <code>while(true)</code> construct is used. Such a loop, just like any other, can be stopped with the <code>break</code> directive.</p>
<p>If we don&rsquo;t want to do anything in the current iteration and would like to forward to the next one, we can use the <code>continue</code> directive.</p>
<p><code>break/continue</code> support labels before the loop. A label is the only way for <code>break/continue</code> to escape a nested loop to go to an outer one.</p>
<h2 id="the-switch-statement">The &ldquo;switch&rdquo; statement</h2>
<p>A <code>switch</code> statement can replace multiple <code>if</code> checks.</p>
<p>It gives a more descriptive way to compare a value with multiple variants.</p>
<h3 id="the-syntax">The syntax</h3>
<p>The <code>switch</code> has one or more <code>case</code> blocks and an optional default.</p>
<p>It looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">switch</span>(x) {
  <span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#39;value1&#39;</span><span style="color:#ff79c6">:</span>  <span style="color:#6272a4">// if (x === &#39;value1&#39;)
</span><span style="color:#6272a4"></span>    ...
    [<span style="color:#ff79c6">break</span>]

  <span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#39;value2&#39;</span><span style="color:#ff79c6">:</span>  <span style="color:#6272a4">// if (x === &#39;value2&#39;)
</span><span style="color:#6272a4"></span>    ...
    [<span style="color:#ff79c6">break</span>]

  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    ...
    [<span style="color:#ff79c6">break</span>]
}
</code></pre></div><ul>
<li>The value of <code>x</code> is checked for a strict equality to the value from the first <code>case</code> (that is, <code>value1</code>) then to the second (<code>value2</code>) and so on.</li>
<li>If the equality is found, <code>switch</code> starts to execute the code starting from the corresponding <code>case</code>, until the nearest <code>break</code> (or until the end of <code>switch</code>).</li>
<li>If no case is matched then the <code>default</code> code is executed (if it exists).</li>
</ul>
<h3 id="an-example">An example</h3>
<p>An example of <code>switch</code> (the executed code is highlighted):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>;

<span style="color:#ff79c6">switch</span> (a) {
  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">3</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Too small&#39;</span> );
    <span style="color:#ff79c6">break</span>;

  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">4</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Exactly!&#39;</span> );
    <span style="color:#ff79c6">break</span>;

  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">5</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Too large&#39;</span> );
    <span style="color:#ff79c6">break</span>;
  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#34;I don&#39;t know such values&#34;</span> );
}
</code></pre></div><p>Here the <code>switch</code> starts to compare <code>a</code> from the first <code>case</code> variant that is <code>3</code>. The match fails.</p>
<p>Then <code>4</code>. That&rsquo;s a match, so the execution starts from <code>case 4</code> until the nearest <code>break</code>.</p>
<p><strong>If there is no <code>break</code> then the execution continues with the next <code>case</code> without any checks.</strong></p>
<p>An example without <code>break</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>;

<span style="color:#ff79c6">switch</span> (a) {
  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">3</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Too small&#39;</span> );

  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">4</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Exactly!&#39;</span> );
  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">5</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Too big&#39;</span> );
  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#34;I don&#39;t know such values&#34;</span> );

}
</code></pre></div><p>In the example above we&rsquo;ll see sequential execution of three <code>alert</code>s:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#39;Exactly!&#39;</span> );
alert( <span style="color:#f1fa8c">&#39;Too big&#39;</span> );
alert( <span style="color:#f1fa8c">&#34;I don&#39;t know such values&#34;</span> );
</code></pre></div><p>Both <code>switch</code> and <code>case</code> allow arbitrary expressions.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;1&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> b <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;

<span style="color:#ff79c6">switch</span> (<span style="color:#ff79c6">+</span>a) {

  <span style="color:#ff79c6">case</span> b <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">1</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#34;this runs, because +a is 1, exactly equals b+1&#34;</span>);
    <span style="color:#ff79c6">break</span>;


  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#34;this doesn&#39;t run&#34;</span>);
}
</code></pre></div><p>Here <code>+a</code> gives <code>1</code>, that&rsquo;s compared with <code>b + 1</code> in <code>case</code>, and the corresponding code is executed.</p>
<h3 id="grouping-of-case">Grouping of &ldquo;case&rdquo;</h3>
<p>Several variants of <code>case</code> which share the same code can be grouped.</p>
<p>For example, if we want the same code to run for <code>case 3</code> and <code>case 5</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">3</span>;

<span style="color:#ff79c6">switch</span> (a) {
  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">4</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#39;Right!&#39;</span>);
    <span style="color:#ff79c6">break</span>;


  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">3</span><span style="color:#ff79c6">:</span> <span style="color:#6272a4">// (*) grouped two cases
</span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">5</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#39;Wrong!&#39;</span>);
    alert(<span style="color:#f1fa8c">&#34;Why don&#39;t you take a math class?&#34;</span>);
    <span style="color:#ff79c6">break</span>;


  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#39;The result is strange. Really.&#39;</span>);
}
</code></pre></div><p>Now both <code>3</code> and <code>5</code> show the same message.</p>
<p>The ability to &ldquo;group&rdquo; cases is a side-effect of how <code>switch/case</code> works without <code>break</code>. Here the execution of <code>case 3</code> starts from the line <code>(*)</code> and goes through <code>case 5</code>, because there&rsquo;s no <code>break</code>.</p>
<h3 id="type-matters">Type matters</h3>
<p>Let&rsquo;s emphasize that the equality check is always strict. The values must be of the same type to match.</p>
<p>For example, let&rsquo;s consider the code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> arg <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;Enter a value?&#34;</span>);
<span style="color:#ff79c6">switch</span> (arg) {
  <span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#39;0&#39;</span><span style="color:#ff79c6">:</span>
  <span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#39;1&#39;</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;One or zero&#39;</span> );
    <span style="color:#ff79c6">break</span>;

  <span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#39;2&#39;</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Two&#39;</span> );
    <span style="color:#ff79c6">break</span>;

  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">3</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;Never executes!&#39;</span> );
    <span style="color:#ff79c6">break</span>;
  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    alert( <span style="color:#f1fa8c">&#39;An unknown value&#39;</span> );
}
</code></pre></div><ol>
<li>For <code>0</code>, <code>1</code>, the first <code>alert</code> runs.</li>
<li>For <code>2</code> the second <code>alert</code> runs.</li>
<li>But for <code>3</code>, the result of the <code>prompt</code> is a string <code>&quot;3&quot;</code>, which is not strictly equal <code>===</code> to the number <code>3</code>. So we&rsquo;ve got a dead code in <code>case 3</code>! The <code>default</code> variant will execute.</li>
</ol>
<h2 id="functions">Functions</h2>
<p>Quite often we need to perform a similar action in many places of the script.</p>
<p>For example, we need to show a nice-looking message when a visitor logs in, logs out and maybe somewhere else.</p>
<p>Functions are the main &ldquo;building blocks&rdquo; of the program. They allow the code to be called many times without repetition.</p>
<p>We&rsquo;ve already seen examples of built-in functions, like <code>alert(message)</code>, <code>prompt(message, default)</code> and <code>confirm(question)</code>. But we can create functions of our own as well.</p>
<h3 id="function-declaration">Function Declaration</h3>
<p>To create a function we can use a <em>function declaration</em>.</p>
<p>It looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage() {
  alert( <span style="color:#f1fa8c">&#39;Hello everyone!&#39;</span> );
}
</code></pre></div><p>The <code>function</code> keyword goes first, then goes the <em>name of the function</em>, then a list of <em>parameters</em> between the parentheses (comma-separated, empty in the example above) and finally the code of the function, also named &ldquo;the function body&rdquo;, between curly braces.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> name(parameters) {
  ...body...
}
</code></pre></div><p>Our new function can be called by its name: <code>showMessage()</code>.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage() {
  alert( <span style="color:#f1fa8c">&#39;Hello everyone!&#39;</span> );
}


showMessage();
showMessage();

</code></pre></div><p>The call <code>showMessage()</code> executes the code of the function. Here we will see the message two times.</p>
<p>This example clearly demonstrates one of the main purposes of functions: to avoid code duplication.</p>
<p>If we ever need to change the message or the way it is shown, it&rsquo;s enough to modify the code in one place: the function which outputs it.</p>
<h3 id="local-variables">Local variables</h3>
<p>A variable declared inside a function is only visible inside that function.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage() {

  <span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Hello, I&#39;m JavaScript!&#34;</span>; <span style="color:#6272a4">// local variable
</span><span style="color:#6272a4"></span>

  alert( message );
}

showMessage(); <span style="color:#6272a4">// Hello, I&#39;m JavaScript!
</span><span style="color:#6272a4"></span>
alert( message ); <span style="color:#6272a4">// &lt;-- Error! The variable is local to the function
</span></code></pre></div><h3 id="outer-variables">Outer variables</h3>
<p>A function can access an outer variable as well, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> userName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>;

<span style="color:#8be9fd;font-style:italic">function</span> showMessage() {
  <span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello, &#39;</span> <span style="color:#ff79c6">+</span> userName;
  alert(message);
}

showMessage(); <span style="color:#6272a4">// Hello, John
</span></code></pre></div><p>The function has full access to the outer variable. It can modify it as well.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> userName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>;

<span style="color:#8be9fd;font-style:italic">function</span> showMessage() {
  userName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Bob&#34;</span>; <span style="color:#6272a4">// (1) changed the outer variable
</span><span style="color:#6272a4"></span>
  <span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello, &#39;</span> <span style="color:#ff79c6">+</span> userName;
  alert(message);
}

alert( userName ); <span style="color:#6272a4">// John before the function call
</span><span style="color:#6272a4"></span>
showMessage();

alert( userName ); <span style="color:#6272a4">// Bob, the value was modified by the function
</span></code></pre></div><p>The outer variable is only used if there&rsquo;s no local one.</p>
<p>If a same-named variable is declared inside the function then it <em>shadows</em> the outer one. For instance, in the code below the function uses the local <code>userName</code>. The outer one is ignored:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> userName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;John&#39;</span>;

<span style="color:#8be9fd;font-style:italic">function</span> showMessage() {

  <span style="color:#8be9fd;font-style:italic">let</span> userName <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Bob&#34;</span>; <span style="color:#6272a4">// declare a local variable
</span><span style="color:#6272a4"></span>

  <span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Hello, &#39;</span> <span style="color:#ff79c6">+</span> userName; <span style="color:#6272a4">// Bob
</span><span style="color:#6272a4"></span>  alert(message);
}

<span style="color:#6272a4">// the function will create and use its own userName
</span><span style="color:#6272a4"></span>showMessage();

alert( userName ); <span style="color:#6272a4">// John, unchanged, the function did not access the outer variable
</span></code></pre></div><p>Variables declared outside of any function, such as the outer <code>userName</code> in the code above, are called <em>global</em>.</p>
<p>Global variables are visible from any function (unless shadowed by locals).</p>
<p>It&rsquo;s a good practice to minimize the use of global variables. Modern code has few or no globals. Most variables reside in their functions. Sometimes though, they can be useful to store project-level data.</p>
<h3 id="parameters">Parameters</h3>
<p>We can pass arbitrary data to functions using parameters (also called <em>function arguments</em>) .</p>
<p>In the example below, the function has two parameters: <code>from</code> and <code>text</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage(from, text) { <span style="color:#6272a4">// arguments: from, text
</span><span style="color:#6272a4"></span>  alert(from <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;: &#39;</span> <span style="color:#ff79c6">+</span> text);
}


showMessage(<span style="color:#f1fa8c">&#39;Ann&#39;</span>, <span style="color:#f1fa8c">&#39;Hello!&#39;</span>); <span style="color:#6272a4">// Ann: Hello! (*)
</span><span style="color:#6272a4"></span>showMessage(<span style="color:#f1fa8c">&#39;Ann&#39;</span>, <span style="color:#f1fa8c">&#34;What&#39;s up?&#34;</span>); <span style="color:#6272a4">// Ann: What&#39;s up? (**)
</span><span style="color:#6272a4"></span>
</code></pre></div><p>When the function is called in lines <code>(*)</code> and <code>(**)</code>, the given values are copied to local variables <code>from</code> and <code>text</code>. Then the function uses them.</p>
<p>Here&rsquo;s one more example: we have a variable <code>from</code> and pass it to the function. Please note: the function changes <code>from</code>, but the change is not seen outside, because a function always gets a copy of the value:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage(from, text) {


  from <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;*&#39;</span> <span style="color:#ff79c6">+</span> from <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;*&#39;</span>; <span style="color:#6272a4">// make &#34;from&#34; look nicer
</span><span style="color:#6272a4"></span>

  alert( from <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;: &#39;</span> <span style="color:#ff79c6">+</span> text );
}

<span style="color:#8be9fd;font-style:italic">let</span> from <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Ann&#34;</span>;

showMessage(from, <span style="color:#f1fa8c">&#34;Hello&#34;</span>); <span style="color:#6272a4">// *Ann*: Hello
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// the value of &#34;from&#34; is the same, the function modified a local copy
</span><span style="color:#6272a4"></span>alert( from ); <span style="color:#6272a4">// Ann
</span></code></pre></div><h3 id="default-values">Default values</h3>
<p>If a parameter is not provided, then its value becomes <code>undefined</code>.</p>
<p>For instance, the aforementioned function <code>showMessage(from, text)</code> can be called with a single argument:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">showMessage(<span style="color:#f1fa8c">&#34;Ann&#34;</span>);
</code></pre></div><p>That&rsquo;s not an error. Such a call would output <code>&quot;Ann: undefined&quot;</code>. There&rsquo;s no <code>text</code>, so it&rsquo;s assumed that <code>text === undefined</code>.</p>
<p>If we want to use a &ldquo;default&rdquo; <code>text</code> in this case, then we can specify it after <code>=</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage(from, text <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;no text given&#34;</span>) {
  alert( from <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;: &#34;</span> <span style="color:#ff79c6">+</span> text );
}

showMessage(<span style="color:#f1fa8c">&#34;Ann&#34;</span>); <span style="color:#6272a4">// Ann: no text given
</span></code></pre></div><p>Now if the <code>text</code> parameter is not passed, it will get the value <code>&quot;no text given&quot;</code></p>
<p>Here <code>&quot;no text given&quot;</code> is a string, but it can be a more complex expression, which is only evaluated and assigned if the parameter is missing. So, this is also possible:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage(from, text <span style="color:#ff79c6">=</span> anotherFunction()) {
  <span style="color:#6272a4">// anotherFunction() only executed if no text given
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// its result becomes the value of text
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>In JavaScript, a default parameter is evaluated every time the function is called without the respective parameter.</p>
<p>In the example above, <code>anotherFunction()</code> is called every time <code>showMessage()</code> is called without the <code>text</code> parameter.</p>
<h4 id="alternative-default-parameters">Alternative default parameters</h4>
<p>Sometimes it makes sense to set default values for parameters not in the function declaration, but at a later stage, during its execution.</p>
<p>To check for an omitted parameter, we can compare it with <code>undefined</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMessage(text) {

  <span style="color:#ff79c6">if</span> (text <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">undefined</span>) {
    text <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;empty message&#39;</span>;
  }


  alert(text);
}

showMessage(); <span style="color:#6272a4">// empty message
</span></code></pre></div><p>&hellip;Or we could use the <code>||</code> operator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// if text parameter is omitted or &#34;&#34; is passed, set it to &#39;empty&#39;
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">function</span> showMessage(text) {
  text <span style="color:#ff79c6">=</span> text <span style="color:#ff79c6">||</span> <span style="color:#f1fa8c">&#39;empty&#39;</span>;
  ...
}
</code></pre></div><p>Modern JavaScript engines support the <a href="info:nullish-coalescing-operator">nullish coalescing operator</a> <code>??</code>, it&rsquo;s better when falsy values, such as <code>0</code>, are considered regular:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// if there&#39;s no &#34;count&#34; parameter, show &#34;unknown&#34;
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">function</span> showCount(count) {
  alert(count <span style="color:#ff79c6">??</span> <span style="color:#f1fa8c">&#34;unknown&#34;</span>);
}

showCount(<span style="color:#bd93f9">0</span>); <span style="color:#6272a4">// 0
</span><span style="color:#6272a4"></span>showCount(<span style="color:#ff79c6">null</span>); <span style="color:#6272a4">// unknown
</span><span style="color:#6272a4"></span>showCount(); <span style="color:#6272a4">// unknown
</span></code></pre></div><h3 id="returning-a-value">Returning a value</h3>
<p>A function can return a value back into the calling code as the result.</p>
<p>The simplest example would be a function that sums two values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sum(a, b) {
  <span style="color:#ff79c6">return</span> a <span style="color:#ff79c6">+</span> b;
}

<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> sum(<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>);
alert( result ); <span style="color:#6272a4">// 3
</span></code></pre></div><p>The directive <code>return</code> can be in any place of the function. When the execution reaches it, the function stops, and the value is returned to the calling code (assigned to <code>result</code> above).</p>
<p>There may be many occurrences of <code>return</code> in a single function. For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> checkAge(age) {
  <span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&gt;=</span> <span style="color:#bd93f9">18</span>) {

    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">true</span>;

  } <span style="color:#ff79c6">else</span> {

    <span style="color:#ff79c6">return</span> confirm(<span style="color:#f1fa8c">&#39;Do you have permission from your parents?&#39;</span>);

  }
}

<span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;How old are you?&#39;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#ff79c6">if</span> ( checkAge(age) ) {
  alert( <span style="color:#f1fa8c">&#39;Access granted&#39;</span> );
} <span style="color:#ff79c6">else</span> {
  alert( <span style="color:#f1fa8c">&#39;Access denied&#39;</span> );
}
</code></pre></div><p>It is possible to use <code>return</code> without a value. That causes the function to exit immediately.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showMovie(age) {
  <span style="color:#ff79c6">if</span> ( <span style="color:#ff79c6">!</span>checkAge(age) ) {

    <span style="color:#ff79c6">return</span>;

  }

  alert( <span style="color:#f1fa8c">&#34;Showing you the movie&#34;</span> ); <span style="color:#6272a4">// (*)
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>In the code above, if <code>checkAge(age)</code> returns <code>false</code>, then <code>showMovie</code> won&rsquo;t proceed to the <code>alert</code>.</p>
<p>If a function does not return a value, it is the same as if it returns <code>undefined</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> doNothing() { <span style="color:#6272a4">/* empty */</span> }

alert( doNothing() <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">undefined</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>An empty <code>return</code> is also the same as <code>return undefined</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> doNothing() {
  <span style="color:#ff79c6">return</span>;
}

alert( doNothing() <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">undefined</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>For a long expression in <code>return</code>, it might be tempting to put it on a separate line, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">return</span>
 (some <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">long</span> <span style="color:#ff79c6">+</span> expression <span style="color:#ff79c6">+</span> or <span style="color:#ff79c6">+</span> whatever <span style="color:#ff79c6">*</span> f(a) <span style="color:#ff79c6">+</span> f(b))
</code></pre></div><p>That doesn&rsquo;t work, because JavaScript assumes a semicolon after <code>return</code>. That&rsquo;ll work the same as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">return</span>;
 (some <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">long</span> <span style="color:#ff79c6">+</span> expression <span style="color:#ff79c6">+</span> or <span style="color:#ff79c6">+</span> whatever <span style="color:#ff79c6">*</span> f(a) <span style="color:#ff79c6">+</span> f(b))
</code></pre></div><p>So, it effectively becomes an empty return.</p>
<p>If we want the returned expression to wrap across multiple lines, we should start it at the same line as <code>return</code>. Or at least put the opening parentheses there as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">return</span> (
  some <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">long</span> <span style="color:#ff79c6">+</span> expression
  <span style="color:#ff79c6">+</span> or <span style="color:#ff79c6">+</span>
  whatever <span style="color:#ff79c6">*</span> f(a) <span style="color:#ff79c6">+</span> f(b)
  )
</code></pre></div><p>And it will work just as we expect it to.</p>
<h3 id="naming-a-function-function-naming">Naming a function [#function-naming]</h3>
<p>Functions are actions. So their name is usually a verb. It should be brief, as accurate as possible and describe what the function does, so that someone reading the code gets an indication of what the function does.</p>
<p>It is a widespread practice to start a function with a verbal prefix which vaguely describes the action. There must be an agreement within the team on the meaning of the prefixes.</p>
<p>For instance, functions that start with <code>&quot;show&quot;</code> usually show something.</p>
<p>Function starting with&hellip;</p>
<ul>
<li><code>&quot;get…&quot;</code> &ndash; return a value,</li>
<li><code>&quot;calc…&quot;</code> &ndash; calculate something,</li>
<li><code>&quot;create…&quot;</code> &ndash; create something,</li>
<li><code>&quot;check…&quot;</code> &ndash; check something and return a boolean, etc.</li>
</ul>
<p>Examples of such names:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">showMessage(..)     <span style="color:#6272a4">// shows a message
</span><span style="color:#6272a4"></span>getAge(..)          <span style="color:#6272a4">// returns the age (gets it somehow)
</span><span style="color:#6272a4"></span>calcSum(..)         <span style="color:#6272a4">// calculates a sum and returns the result
</span><span style="color:#6272a4"></span>createForm(..)      <span style="color:#6272a4">// creates a form (and usually returns it)
</span><span style="color:#6272a4"></span>checkPermission(..) <span style="color:#6272a4">// checks a permission, returns true/false
</span></code></pre></div><p>With prefixes in place, a glance at a function name gives an understanding what kind of work it does and what kind of value it returns.</p>
<p>A function should do exactly what is suggested by its name, no more.</p>
<p>Two independent actions usually deserve two functions, even if they are usually called together (in that case we can make a 3rd function that calls those two).</p>
<p>A few examples of breaking this rule:</p>
<ul>
<li><code>getAge</code> &ndash; would be bad if it shows an <code>alert</code> with the age (should only get).</li>
<li><code>createForm</code> &ndash; would be bad if it modifies the document, adding a form to it (should only create it and return).</li>
<li><code>checkPermission</code> &ndash; would be bad if it displays the <code>access granted/denied</code> message (should only perform the check and return the result).</li>
</ul>
<p>These examples assume common meanings of prefixes. You and your team are free to agree on other meanings, but usually they&rsquo;re not much different. In any case, you should have a firm understanding of what a prefix means, what a prefixed function can and cannot do. All same-prefixed functions should obey the rules. And the team should share the knowledge.</p>
<p>Functions that are used <em>very often</em> sometimes have ultrashort names.</p>
<p>For example, the <a href="http://jquery.com">jQuery</a> framework defines a function with <code>$</code>. The <a href="http://lodash.com/">Lodash</a> library has its core function named <code>_</code>.</p>
<p>These are exceptions. Generally functions names should be concise and descriptive.</p>
<h3 id="functions--comments">Functions == Comments</h3>
<p>Functions should be short and do exactly one thing. If that thing is big, maybe it&rsquo;s worth it to split the function into a few smaller functions. Sometimes following this rule may not be that easy, but it&rsquo;s definitely a good thing.</p>
<p>A separate function is not only easier to test and debug &ndash; its very existence is a great comment!</p>
<p>For instance, compare the two functions <code>showPrimes(n)</code> below. Each one outputs <a href="https://en.wikipedia.org/wiki/Prime_number">prime numbers</a> up to <code>n</code>.</p>
<p>The first variant uses a label:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showPrimes(n) {
  nextPrime<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>; i <span style="color:#ff79c6">&lt;</span> n; i<span style="color:#ff79c6">++</span>) {

    <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> j <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>; j <span style="color:#ff79c6">&lt;</span> i; j<span style="color:#ff79c6">++</span>) {
      <span style="color:#ff79c6">if</span> (i <span style="color:#ff79c6">%</span> j <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span>) <span style="color:#ff79c6">continue</span> nextPrime;
    }

    alert( i ); <span style="color:#6272a4">// a prime
</span><span style="color:#6272a4"></span>  }
}
</code></pre></div><p>The second variant uses an additional function <code>isPrime(n)</code> to test for primality:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> showPrimes(n) {

  <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>; i <span style="color:#ff79c6">&lt;</span> n; i<span style="color:#ff79c6">++</span>) {
    <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">!</span>isPrime(i)) <span style="color:#ff79c6">continue</span>;

    alert(i);  <span style="color:#6272a4">// a prime
</span><span style="color:#6272a4"></span>  }
}

<span style="color:#8be9fd;font-style:italic">function</span> isPrime(n) {
  <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span>; i <span style="color:#ff79c6">&lt;</span> n; i<span style="color:#ff79c6">++</span>) {
    <span style="color:#ff79c6">if</span> ( n <span style="color:#ff79c6">%</span> i <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span>) <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">false</span>;
  }
  <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">true</span>;
}
</code></pre></div><p>The second variant is easier to understand, isn&rsquo;t it? Instead of the code piece we see a name of the action (<code>isPrime</code>). Sometimes people refer to such code as <em>self-describing</em>.</p>
<p>So, functions can be created even if we don&rsquo;t intend to reuse them. They structure the code and make it readable.</p>
<h3 id="summary-7">Summary</h3>
<p>A function declaration looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> name(parameters, delimited, by, comma) {
  <span style="color:#6272a4">/* code */</span>
}
</code></pre></div><ul>
<li>Values passed to a function as parameters are copied to its local variables.</li>
<li>A function may access outer variables. But it works only from inside out. The code outside of the function doesn&rsquo;t see its local variables.</li>
<li>A function can return a value. If it doesn&rsquo;t, then its result is <code>undefined</code>.</li>
</ul>
<p>To make the code clean and easy to understand, it&rsquo;s recommended to use mainly local variables and parameters in the function, not outer variables.</p>
<p>It is always easier to understand a function which gets parameters, works with them and returns a result than a function which gets no parameters, but modifies outer variables as a side-effect.</p>
<p>Function naming:</p>
<ul>
<li>A name should clearly describe what the function does. When we see a function call in the code, a good name instantly gives us an understanding what it does and returns.</li>
<li>A function is an action, so function names are usually verbal.</li>
<li>There exist many well-known function prefixes like <code>create…</code>, <code>show…</code>, <code>get…</code>, <code>check…</code> and so on. Use them to hint what a function does.</li>
</ul>
<p>Functions are the main building blocks of scripts. Now we&rsquo;ve covered the basics, so we actually can start creating and using them. But that&rsquo;s only the beginning of the path. We are going to return to them many times, going more deeply into their advanced features.</p>
<h2 id="function-expressions">Function expressions</h2>
<p>In JavaScript, a function is not a &ldquo;magical language structure&rdquo;, but a special kind of value.</p>
<p>The syntax that we used before is called a <em>Function Declaration</em>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  alert( <span style="color:#f1fa8c">&#34;Hello&#34;</span> );
}
</code></pre></div><p>There is another syntax for creating a function that is called a <em>Function Expression</em>.</p>
<p>It looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sayHi <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
  alert( <span style="color:#f1fa8c">&#34;Hello&#34;</span> );
};
</code></pre></div><p>Here, the function is created and assigned to the variable explicitly, like any other value. No matter how the function is defined, it&rsquo;s just a value stored in the variable <code>sayHi</code>.</p>
<p>The meaning of these code samples is the same: &ldquo;create a function and put it into the variable <code>sayHi</code>&rdquo;.</p>
<p>We can even print out that value using <code>alert</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  alert( <span style="color:#f1fa8c">&#34;Hello&#34;</span> );
}


alert( sayHi ); <span style="color:#6272a4">// shows the function code
</span><span style="color:#6272a4"></span>
</code></pre></div><p>Please note that the last line does not run the function, because there are no parentheses after <code>sayHi</code>. There are programming languages where any mention of a function name causes its execution, but JavaScript is not like that.</p>
<p>In JavaScript, a function is a value, so we can deal with it as a value. The code above shows its string representation, which is the source code.</p>
<p>Surely, a function is a special value, in the sense that we can call it like <code>sayHi()</code>.</p>
<p>But it&rsquo;s still a value. So we can work with it like with other kinds of values.</p>
<p>We can copy a function to another variable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {   <span style="color:#6272a4">// (1) create
</span><span style="color:#6272a4"></span>  alert( <span style="color:#f1fa8c">&#34;Hello&#34;</span> );
}

<span style="color:#8be9fd;font-style:italic">let</span> func <span style="color:#ff79c6">=</span> sayHi;    <span style="color:#6272a4">// (2) copy
</span><span style="color:#6272a4"></span>
func(); <span style="color:#6272a4">// Hello     // (3) run the copy (it works)!
</span><span style="color:#6272a4"></span>sayHi(); <span style="color:#6272a4">// Hello    //     this still works too (why wouldn&#39;t it)
</span></code></pre></div><p>Here&rsquo;s what happens above in detail:</p>
<ol>
<li>The Function Declaration <code>(1)</code> creates the function and puts it into the variable named <code>sayHi</code>.</li>
<li>Line <code>(2)</code> copies it into the variable <code>func</code>. Please note again: there are no parentheses after <code>sayHi</code>. If there were, then <code>func = sayHi()</code> would write  <em>the result of the call</em> <code>sayHi()</code> into <code>func</code>, not <em>the function</em> <code>sayHi</code> itself.</li>
<li>Now the function can be called as both <code>sayHi()</code> and <code>func()</code>.</li>
</ol>
<p>Note that we could also have used a Function Expression to declare <code>sayHi</code>, in the first line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sayHi <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
  alert( <span style="color:#f1fa8c">&#34;Hello&#34;</span> );
};

<span style="color:#8be9fd;font-style:italic">let</span> func <span style="color:#ff79c6">=</span> sayHi;
<span style="color:#6272a4">// ...
</span></code></pre></div><p>Everything would work the same.</p>
<p>You might wonder, why does Function Expression have a semicolon <code>;</code> at the end, but Function Declaration does not:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>}

<span style="color:#8be9fd;font-style:italic">let</span> sayHi <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
  <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>};
</code></pre></div><p>The answer is simple:</p>
<ul>
<li>There&rsquo;s no need for <code>;</code> at the end of code blocks and syntax structures that use them like <code>if { ... }</code>, <code>for {  }</code>, <code>function f { }</code> etc.</li>
<li>A Function Expression is used inside the statement: <code>let sayHi = ...;</code>, as a value. It&rsquo;s not a code block, but rather an assignment. The semicolon <code>;</code> is recommended at the end of statements, no matter what the value is. So the semicolon here is not related to the Function Expression itself, it just terminates the statement.</li>
</ul>
<h3 id="callback-functions">Callback functions</h3>
<p>Let&rsquo;s look at more examples of passing functions as values and using function expressions.</p>
<p>We&rsquo;ll write a function <code>ask(question, yes, no)</code> with three parameters:</p>
<dl>
<dt><code>question</code></dt>
<dd>Text of the question</dd>
<dt><code>yes</code></dt>
<dd>Function to run if the answer is &ldquo;Yes&rdquo;</dd>
<dt><code>no</code></dt>
<dd>Function to run if the answer is &ldquo;No&rdquo;</dd>
</dl>
<p>The function should ask the <code>question</code> and, depending on the user&rsquo;s answer, call <code>yes()</code> or <code>no()</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#8be9fd;font-style:italic">function</span> ask(question, yes, no) {
  <span style="color:#ff79c6">if</span> (confirm(question)) yes()
  <span style="color:#ff79c6">else</span> no();
}


<span style="color:#8be9fd;font-style:italic">function</span> showOk() {
  alert( <span style="color:#f1fa8c">&#34;You agreed.&#34;</span> );
}

<span style="color:#8be9fd;font-style:italic">function</span> showCancel() {
  alert( <span style="color:#f1fa8c">&#34;You canceled the execution.&#34;</span> );
}

<span style="color:#6272a4">// usage: functions showOk, showCancel are passed as arguments to ask
</span><span style="color:#6272a4"></span>ask(<span style="color:#f1fa8c">&#34;Do you agree?&#34;</span>, showOk, showCancel);
</code></pre></div><p>In practice, such functions are quite useful. The major difference between a real-life <code>ask</code> and the example above is that real-life functions use more complex ways to interact with the user than a simple <code>confirm</code>. In the browser, such function usually draws a nice-looking question window. But that&rsquo;s another story.</p>
<p><strong>The arguments <code>showOk</code> and <code>showCancel</code> of <code>ask</code> are called <em>callback functions</em> or just <em>callbacks</em>.</strong></p>
<p>The idea is that we pass a function and expect it to be &ldquo;called back&rdquo; later if necessary. In our case, <code>showOk</code> becomes the callback for &ldquo;yes&rdquo; answer, and <code>showCancel</code> for &ldquo;no&rdquo; answer.</p>
<p>We can use Function Expressions to write the same function much shorter:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> ask(question, yes, no) {
  <span style="color:#ff79c6">if</span> (confirm(question)) yes()
  <span style="color:#ff79c6">else</span> no();
}


ask(
  <span style="color:#f1fa8c">&#34;Do you agree?&#34;</span>,
  <span style="color:#8be9fd;font-style:italic">function</span>() { alert(<span style="color:#f1fa8c">&#34;You agreed.&#34;</span>); },
  <span style="color:#8be9fd;font-style:italic">function</span>() { alert(<span style="color:#f1fa8c">&#34;You canceled the execution.&#34;</span>); }
);

</code></pre></div><p>Here, functions are declared right inside the <code>ask(...)</code> call. They have no name, and so are called <em>anonymous</em>. Such functions are not accessible outside of <code>ask</code> (because they are not assigned to variables), but that&rsquo;s just what we want here.</p>
<p>Such code appears in our scripts very naturally, it&rsquo;s in the spirit of JavaScript.</p>
<p>Regular values like strings or numbers represent the <em>data</em>.</p>
<p>A function can be perceived as an <em>action</em>.</p>
<p>We can pass it between variables and run when we want.</p>
<h3 id="function-expression-vs-function-declaration">Function Expression vs Function Declaration</h3>
<p>Let&rsquo;s formulate the key differences between Function Declarations and Expressions.</p>
<p>First, the syntax: how to differentiate between them in the code.</p>
<ul>
<li>
<p><em>Function Declaration:</em> a function, declared as a separate statement, in the main code flow.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// Function Declaration
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">function</span> sum(a, b) {
  <span style="color:#ff79c6">return</span> a <span style="color:#ff79c6">+</span> b;
}
</code></pre></div></li>
<li>
<p><em>Function Expression:</em> a function, created inside an expression or inside another syntax construct. Here, the function is created at the right side of the &ldquo;assignment expression&rdquo; <code>=</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// Function Expression
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>(a, b) {
  <span style="color:#ff79c6">return</span> a <span style="color:#ff79c6">+</span> b;
};
</code></pre></div></li>
</ul>
<p>The more subtle difference is <em>when</em> a function is created by the JavaScript engine.</p>
<p><strong>A Function Expression is created when the execution reaches it and is usable only from that moment.</strong></p>
<p>Once the execution flow passes to the right side of the assignment <code>let sum = function…</code> &ndash; here we go, the function is created and can be used (assigned, called, etc. ) from now on.</p>
<p>Function Declarations are different.</p>
<p><strong>A Function Declaration can be called earlier than it is defined.</strong></p>
<p>For example, a global Function Declaration is visible in the whole script, no matter where it is.</p>
<p>That&rsquo;s due to internal algorithms. When JavaScript prepares to run the script, it first looks for global Function Declarations in it and creates the functions. We can think of it as an &ldquo;initialization stage&rdquo;.</p>
<p>And after all Function Declarations are processed, the code is executed. So it has access to these functions.</p>
<p>For example, this works:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
sayHi(<span style="color:#f1fa8c">&#34;John&#34;</span>); <span style="color:#6272a4">// Hello, John
</span><span style="color:#6272a4"></span>

<span style="color:#8be9fd;font-style:italic">function</span> sayHi(name) {
  alert( <span style="color:#f1fa8c">`Hello, </span><span style="color:#f1fa8c">${</span>name<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span> );
}
</code></pre></div><p>The Function Declaration <code>sayHi</code> is created when JavaScript is preparing to start the script and is visible everywhere in it.</p>
<p>&hellip;If it were a Function Expression, then it wouldn&rsquo;t work:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
sayHi(<span style="color:#f1fa8c">&#34;John&#34;</span>); <span style="color:#6272a4">// error!
</span><span style="color:#6272a4"></span>

<span style="color:#8be9fd;font-style:italic">let</span> sayHi <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>(name) {  <span style="color:#6272a4">// (*) no magic any more
</span><span style="color:#6272a4"></span>  alert( <span style="color:#f1fa8c">`Hello, </span><span style="color:#f1fa8c">${</span>name<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span> );
};
</code></pre></div><p>Function Expressions are created when the execution reaches them. That would happen only in the line <code>(*)</code>. Too late.</p>
<p>Another special feature of Function Declarations is their block scope.</p>
<p><strong>In strict mode, when a Function Declaration is within a code block, it&rsquo;s visible everywhere inside that block. But not outside of it.</strong></p>
<p>For instance, let&rsquo;s imagine that we need to declare a function <code>welcome()</code> depending on the <code>age</code> variable that we get during runtime. And then we plan to use it some time later.</p>
<p>If we use Function Declaration, it won&rsquo;t work as intended:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;What is your age?&#34;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#6272a4">// conditionally declare a function
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) {

  <span style="color:#8be9fd;font-style:italic">function</span> welcome() {
    alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>);
  }

} <span style="color:#ff79c6">else</span> {

  <span style="color:#8be9fd;font-style:italic">function</span> welcome() {
    alert(<span style="color:#f1fa8c">&#34;Greetings!&#34;</span>);
  }

}

<span style="color:#6272a4">// ...use it later
</span><span style="color:#6272a4"></span>
welcome(); <span style="color:#6272a4">// Error: welcome is not defined
</span><span style="color:#6272a4"></span>
</code></pre></div><p>That&rsquo;s because a Function Declaration is only visible inside the code block in which it resides.</p>
<p>Here&rsquo;s another example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">16</span>; <span style="color:#6272a4">// take 16 as an example
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) {

  welcome();               <span style="color:#6272a4">// \   (runs)
</span><span style="color:#6272a4"></span>
                           <span style="color:#6272a4">//  |
</span><span style="color:#6272a4"></span>  <span style="color:#8be9fd;font-style:italic">function</span> welcome() {     <span style="color:#6272a4">//  |  
</span><span style="color:#6272a4"></span>    alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>);       <span style="color:#6272a4">//  |  Function Declaration is available
</span><span style="color:#6272a4"></span>  }                        <span style="color:#6272a4">//  |  everywhere in the block where it&#39;s declared
</span><span style="color:#6272a4"></span>                           <span style="color:#6272a4">//  |
</span><span style="color:#6272a4"></span>
  welcome();               <span style="color:#6272a4">// /   (runs)
</span><span style="color:#6272a4"></span>

} <span style="color:#ff79c6">else</span> {

  <span style="color:#8be9fd;font-style:italic">function</span> welcome() {    
    alert(<span style="color:#f1fa8c">&#34;Greetings!&#34;</span>);
  }
}

<span style="color:#6272a4">// Here we&#39;re out of curly braces,
</span><span style="color:#6272a4">// so we can not see Function Declarations made inside of them.
</span><span style="color:#6272a4"></span>

welcome(); <span style="color:#6272a4">// Error: welcome is not defined
</span><span style="color:#6272a4"></span>
</code></pre></div><p>What can we do to make <code>welcome</code> visible outside of <code>if</code>?</p>
<p>The correct approach would be to use a Function Expression and assign <code>welcome</code> to the variable that is declared outside of <code>if</code> and has the proper visibility.</p>
<p>This code works as intended:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;What is your age?&#34;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#8be9fd;font-style:italic">let</span> welcome;

<span style="color:#ff79c6">if</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) {

  welcome <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
    alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>);
  };

} <span style="color:#ff79c6">else</span> {

  welcome <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
    alert(<span style="color:#f1fa8c">&#34;Greetings!&#34;</span>);
  };

}


welcome(); <span style="color:#6272a4">// ok now
</span><span style="color:#6272a4"></span>
</code></pre></div><p>Or we could simplify it even further using a question mark operator <code>?</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;What is your age?&#34;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#8be9fd;font-style:italic">let</span> welcome <span style="color:#ff79c6">=</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) <span style="color:#ff79c6">?</span>
  <span style="color:#8be9fd;font-style:italic">function</span>() { alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>); } <span style="color:#ff79c6">:</span>
  <span style="color:#8be9fd;font-style:italic">function</span>() { alert(<span style="color:#f1fa8c">&#34;Greetings!&#34;</span>); };


welcome(); <span style="color:#6272a4">// ok now
</span><span style="color:#6272a4"></span>
</code></pre></div><p>As a rule of thumb, when we need to declare a function, the first to consider is Function Declaration syntax. It gives more freedom in how to organize our code, because we can call such functions before they are declared.</p>
<p>That&rsquo;s also better for readability, as it&rsquo;s easier to look up <code>function f(…) {…}</code> in the code than <code>let f = function(…) {…};</code>. Function Declarations are more &ldquo;eye-catching&rdquo;.</p>
<p>&hellip;But if a Function Declaration does not suit us for some reason, or we need a conditional declaration (we&rsquo;ve just seen an example), then Function Expression should be used.</p>
<h3 id="summary-8">Summary</h3>
<ul>
<li>Functions are values. They can be assigned, copied or declared in any place of the code.</li>
<li>If the function is declared as a separate statement in the main code flow, that&rsquo;s called a &ldquo;Function Declaration&rdquo;.</li>
<li>If the function is created as a part of an expression, it&rsquo;s called a &ldquo;Function Expression&rdquo;.</li>
<li>Function Declarations are processed before the code block is executed. They are visible everywhere in the block.</li>
<li>Function Expressions are created when the execution flow reaches them.</li>
</ul>
<p>In most cases when we need to declare a function, a Function Declaration is preferable, because it is visible prior to the declaration itself. That gives us more flexibility in code organization, and is usually more readable.</p>
<p>So we should use a Function Expression only when a Function Declaration is not fit for the task. We&rsquo;ve seen a couple of examples of that in this chapter, and will see more in the future.</p>
<h2 id="arrow-functions-the-basics">Arrow functions, the basics</h2>
<p>There&rsquo;s another very simple and concise syntax for creating functions, that&rsquo;s often better than Function Expressions.</p>
<p>It&rsquo;s called &ldquo;arrow functions&rdquo;, because it looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> func <span style="color:#ff79c6">=</span> (arg1, arg2, ...argN) =&gt; expression
</code></pre></div><p>&hellip;This creates a function <code>func</code> that accepts arguments <code>arg1..argN</code>, then evaluates the <code>expression</code> on the right side with their use and returns its result.</p>
<p>In other words, it&rsquo;s the shorter version of:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> func <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>(arg1, arg2, ...argN) {
  <span style="color:#ff79c6">return</span> expression;
};
</code></pre></div><p>Let&rsquo;s see a concrete example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> (a, b) =&gt; a <span style="color:#ff79c6">+</span> b;

<span style="color:#6272a4">/* This arrow function is a shorter form of:
</span><span style="color:#6272a4">
</span><span style="color:#6272a4">let sum = function(a, b) {
</span><span style="color:#6272a4">  return a + b;
</span><span style="color:#6272a4">};
</span><span style="color:#6272a4">*/</span>

alert( sum(<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>) ); <span style="color:#6272a4">// 3
</span></code></pre></div><p>As you can, see <code>(a, b) =&gt; a + b</code> means a function that accepts two arguments named <code>a</code> and <code>b</code>. Upon the execution, it evaluates the expression <code>a + b</code> and returns the result.</p>
<ul>
<li>
<p>If we have only one argument, then parentheses around parameters can be omitted, making that even shorter.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#ff79c6">double</span> <span style="color:#ff79c6">=</span> n =&gt; n <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">2</span>;
<span style="color:#6272a4">// roughly the same as: let double = function(n) { return n * 2 }
</span><span style="color:#6272a4"></span>

alert( <span style="color:#ff79c6">double</span>(<span style="color:#bd93f9">3</span>) ); <span style="color:#6272a4">// 6
</span></code></pre></div></li>
<li>
<p>If there are no arguments, parentheses will be empty (but they should be present):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sayHi <span style="color:#ff79c6">=</span> () =&gt; alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>);

sayHi();
</code></pre></div></li>
</ul>
<p>Arrow functions can be used in the same way as Function Expressions.</p>
<p>For instance, to dynamically create a function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;What is your age?&#34;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#8be9fd;font-style:italic">let</span> welcome <span style="color:#ff79c6">=</span> (age <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">18</span>) <span style="color:#ff79c6">?</span>
  () =&gt; alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>) <span style="color:#ff79c6">:</span>
  () =&gt; alert(<span style="color:#f1fa8c">&#34;Greetings!&#34;</span>);

welcome();
</code></pre></div><p>Arrow functions may appear unfamiliar and not very readable at first, but that quickly changes as the eyes get used to the structure.</p>
<p>They are very convenient for simple one-line actions, when we&rsquo;re just too lazy to write many words.</p>
<h3 id="multiline-arrow-functions">Multiline arrow functions</h3>
<p>The examples above took arguments from the left of <code>=&gt;</code> and evaluated the right-side expression with them.</p>
<p>Sometimes we need something a little bit more complex, like multiple expressions or statements. It is also possible, but we should enclose them in curly braces. Then use a normal <code>return</code> within them.</p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> (a, b) =&gt; {  <span style="color:#6272a4">// the curly brace opens a multiline function
</span><span style="color:#6272a4"></span>  <span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">+</span> b;

  <span style="color:#ff79c6">return</span> result; <span style="color:#6272a4">// if we use curly braces, then we need an explicit &#34;return&#34; 
</span><span style="color:#6272a4"></span>
};

alert( sum(<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>) ); <span style="color:#6272a4">// 3
</span></code></pre></div><p>Here we praised arrow functions for brevity. But that&rsquo;s not all!</p>
<p>Arrow functions have other interesting features.</p>
<p>To study them in-depth, we first need to get to know some other aspects of JavaScript, so we&rsquo;ll return to arrow functions later in the chapter <a href="info:arrow-functions">info:arrow-functions</a>.</p>
<p>For now, we can already use arrow functions for one-line actions and callbacks.</p>
<h3 id="summary-9">Summary</h3>
<p>Arrow functions are handy for one-liners. They come in two flavors:</p>
<ol>
<li>Without curly braces: <code>(...args) =&gt; expression</code> &ndash; the right side is an expression: the function evaluates it and returns the result.</li>
<li>With curly braces: <code>(...args) =&gt; { body }</code> &ndash; brackets allow us to write multiple statements inside the function, but we need an explicit <code>return</code> to return something.</li>
</ol>
<h2 id="javascript-specials">JavaScript specials</h2>
<p>This chapter briefly recaps the features of JavaScript that we&rsquo;ve learned by now, paying special attention to subtle moments.</p>
<h3 id="code-structure-1">Code structure</h3>
<p>Statements are delimited with a semicolon:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>); alert(<span style="color:#f1fa8c">&#39;World&#39;</span>);
</code></pre></div><p>Usually, a line-break is also treated as a delimiter, so that would also work:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#39;Hello&#39;</span>)
alert(<span style="color:#f1fa8c">&#39;World&#39;</span>)
</code></pre></div><p>That&rsquo;s called &ldquo;automatic semicolon insertion&rdquo;. Sometimes it doesn&rsquo;t work, for instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert(<span style="color:#f1fa8c">&#34;There will be an error after this message&#34;</span>)

[<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>].forEach(alert)
</code></pre></div><p>Most codestyle guides agree that we should put a semicolon after each statement.</p>
<p>Semicolons are not required after code blocks <code>{...}</code> and syntax constructs with them like loops:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> f() {
  <span style="color:#6272a4">// no semicolon needed after function declaration
</span><span style="color:#6272a4"></span>}

<span style="color:#ff79c6">for</span>(;;) {
  <span style="color:#6272a4">// no semicolon needed after the loop
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>&hellip;But even if we can put an &ldquo;extra&rdquo; semicolon somewhere, that&rsquo;s not an error. It will be ignored.</p>
<p>More in: <a href="info:structure">info:structure</a>.</p>
<h3 id="strict-mode">Strict mode</h3>
<p>To fully enable all features of modern JavaScript, we should start scripts with <code>&quot;use strict&quot;</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f1fa8c">&#39;use strict&#39;</span>;

...
</code></pre></div><p>The directive must be at the top of a script or at the beginning of a function body.</p>
<p>Without <code>&quot;use strict&quot;</code>, everything still works, but some features behave in the old-fashion, &ldquo;compatible&rdquo; way. We&rsquo;d generally prefer the modern behavior.</p>
<p>Some modern features of the language (like classes that we&rsquo;ll study in the future) enable strict mode implicitly.</p>
<p>More in: <a href="info:strict-mode">info:strict-mode</a>.</p>
<h3 id="variables-1">Variables</h3>
<p>Can be declared using:</p>
<ul>
<li><code>let</code></li>
<li><code>const</code> (constant, can&rsquo;t be changed)</li>
<li><code>var</code> (old-style, will see later)</li>
</ul>
<p>A variable name can include:</p>
<ul>
<li>Letters and digits, but the first character may not be a digit.</li>
<li>Characters <code>$</code> and <code>_</code> are normal, on par with letters.</li>
<li>Non-Latin alphabets and hieroglyphs are also allowed, but commonly not used.</li>
</ul>
<p>Variables are dynamically typed. They can store any value:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>;
x <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;John&#34;</span>;
</code></pre></div><p>There are 8 data types:</p>
<ul>
<li><code>number</code> for both floating-point and integer numbers,</li>
<li><code>bigint</code> for integer numbers of arbitrary length,</li>
<li><code>string</code> for strings,</li>
<li><code>boolean</code> for logical values: <code>true/false</code>,</li>
<li><code>null</code> &ndash; a type with a single value <code>null</code>, meaning &ldquo;empty&rdquo; or &ldquo;does not exist&rdquo;,</li>
<li><code>undefined</code> &ndash; a type with a single value <code>undefined</code>, meaning &ldquo;not assigned&rdquo;,</li>
<li><code>object</code> and <code>symbol</code> &ndash; for complex data structures and unique identifiers, we haven&rsquo;t learnt them yet.</li>
</ul>
<p>The <code>typeof</code> operator returns the type for a value, with two exceptions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">typeof</span> <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;object&#34;</span> <span style="color:#6272a4">// error in the language
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">typeof</span> <span style="color:#8be9fd;font-style:italic">function</span>(){} <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;function&#34;</span> <span style="color:#6272a4">// functions are treated specially
</span></code></pre></div><p>More in: <a href="info:variables">info:variables</a> and <a href="info:types">info:types</a>.</p>
<h3 id="interaction">Interaction</h3>
<p>We&rsquo;re using a browser as a working environment, so basic UI functions will be:</p>
<dl>
<dt><a href="mdn:api/Window/prompt"><code>prompt(question, [default])</code></a></dt>
<dd>Ask a <code>question</code>, and return either what the visitor entered or <code>null</code> if they clicked &ldquo;cancel&rdquo;.</dd>
<dt><a href="mdn:api/Window/confirm"><code>confirm(question)</code></a></dt>
<dd>Ask a <code>question</code> and suggest to choose between Ok and Cancel. The choice is returned as <code>true/false</code>.</dd>
<dt><a href="mdn:api/Window/alert"><code>alert(message)</code></a></dt>
<dd>Output a <code>message</code>.</dd>
</dl>
<p>All these functions are <em>modal</em>, they pause the code execution and prevent the visitor from interacting with the page until they answer.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> userName <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;Your name?&#34;</span>, <span style="color:#f1fa8c">&#34;Alice&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> isTeaWanted <span style="color:#ff79c6">=</span> confirm(<span style="color:#f1fa8c">&#34;Do you want some tea?&#34;</span>);

alert( <span style="color:#f1fa8c">&#34;Visitor: &#34;</span> <span style="color:#ff79c6">+</span> userName ); <span style="color:#6272a4">// Alice
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#34;Tea wanted: &#34;</span> <span style="color:#ff79c6">+</span> isTeaWanted ); <span style="color:#6272a4">// true
</span></code></pre></div><p>More in: <a href="info:alert-prompt-confirm">info:alert-prompt-confirm</a>.</p>
<h3 id="operators">Operators</h3>
<p>JavaScript supports the following operators:</p>
<dl>
<dt>Arithmetical</dt>
<dd>Regular: <code>* + - /</code>, also <code>%</code> for the remainder and <code>**</code> for power of a number.
<p>The binary plus <code>+</code> concatenates strings. And if any of the operands is a string, the other one is converted to string too:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#f1fa8c">&#39;1&#39;</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span> ); <span style="color:#6272a4">// &#39;12&#39;, string
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;2&#39;</span> ); <span style="color:#6272a4">// &#39;12&#39;, string
</span></code></pre></div></dd>
<dt>Assignments</dt>
<dd>There is a simple assignment: <code>a = b</code> and combined ones like <code>a *= 2</code>.</dd>
<dt>Bitwise</dt>
<dd>Bitwise operators work with 32-bit integers at the lowest, bit-level: see the <a href="mdn:/JavaScript/Reference/Operators/Bitwise_Operators">docs</a> when they are needed.</dd>
<dt>Conditional</dt>
<dd>The only operator with three parameters: <code>cond ? resultA : resultB</code>. If <code>cond</code> is truthy, returns <code>resultA</code>, otherwise <code>resultB</code>.</dd>
<dt>Logical operators</dt>
<dd>Logical AND <code>&amp;&amp;</code> and OR <code>||</code> perform short-circuit evaluation and then return the value where it stopped (not necessary <code>true</code>/<code>false</code>). Logical NOT <code>!</code> converts the operand to boolean type and returns the inverse value.</dd>
<dt>Nullish coalescing operator</dt>
<dd>The <code>??</code> operator provides a way to choose a defined value from a list of variables. The result of <code>a ?? b</code> is <code>a</code> unless it&rsquo;s <code>null/undefined</code>, then <code>b</code>.</dd>
<dt>Comparisons</dt>
<dd>Equality check <code>==</code> for values of different types converts them to a number (except <code>null</code> and <code>undefined</code> that equal each other and nothing else), so these are equal:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">alert( <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">false</span> ); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>alert( <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;&#39;</span> ); <span style="color:#6272a4">// true
</span></code></pre></div><p>Other comparisons convert to a number as well.</p>
<p>The strict equality operator <code>===</code> doesn&rsquo;t do the conversion: different types always mean different values for it.</p>
<p>Values <code>null</code> and <code>undefined</code> are special: they equal <code>==</code> each other and don&rsquo;t equal anything else.</p>
<p>Greater/less comparisons compare strings character-by-character, other types are converted to a number.</p>
</dd>
<dt>Other operators</dt>
<dd>There are few others, like a comma operator.</dd>
</dl>
<p>More in: <a href="info:operators">info:operators</a>, <a href="info:comparison">info:comparison</a>, <a href="info:logical-operators">info:logical-operators</a>, <a href="info:nullish-coalescing-operator">info:nullish-coalescing-operator</a>.</p>
<h3 id="loops">Loops</h3>
<ul>
<li>
<p>We covered 3 types of loops:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// 1
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">while</span> (condition) {
  ...
}

<span style="color:#6272a4">// 2
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">do</span> {
  ...
} <span style="color:#ff79c6">while</span> (condition);

<span style="color:#6272a4">// 3
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">for</span>(<span style="color:#8be9fd;font-style:italic">let</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; i <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">10</span>; i<span style="color:#ff79c6">++</span>) {
  ...
}
</code></pre></div></li>
<li>
<p>The variable declared in <code>for(let...)</code> loop is visible only inside the loop. But we can also omit <code>let</code> and reuse an existing variable.</p>
</li>
<li>
<p>Directives <code>break/continue</code> allow to exit the whole loop/current iteration. Use labels to break nested loops.</p>
</li>
</ul>
<p>Details in: <a href="info:while-for">info:while-for</a>.</p>
<p>Later we&rsquo;ll study more types of loops to deal with objects.</p>
<h3 id="the-switch-construct">The &ldquo;switch&rdquo; construct</h3>
<p>The &ldquo;switch&rdquo; construct can replace multiple <code>if</code> checks. It uses <code>===</code> (strict equality) for comparisons.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> age <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;Your age?&#39;</span>, <span style="color:#bd93f9">18</span>);

<span style="color:#ff79c6">switch</span> (age) {
  <span style="color:#ff79c6">case</span> <span style="color:#bd93f9">18</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#34;Won&#39;t work&#34;</span>); <span style="color:#6272a4">// the result of prompt is a string, not a number
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">break</span>;

  <span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#34;18&#34;</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#34;This works!&#34;</span>);
    <span style="color:#ff79c6">break</span>;

  <span style="color:#ff79c6">default</span><span style="color:#ff79c6">:</span>
    alert(<span style="color:#f1fa8c">&#34;Any value not equal to one above&#34;</span>);
}
</code></pre></div><p>Details in: <a href="info:switch">info:switch</a>.</p>
<h3 id="functions-1">Functions</h3>
<p>We covered three ways to create a function in JavaScript:</p>
<ol>
<li>
<p>Function Declaration: the function in the main code flow</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sum(a, b) {
  <span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">+</span> b;

  <span style="color:#ff79c6">return</span> result;
}
</code></pre></div></li>
<li>
<p>Function Expression: the function in the context of an expression</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>(a, b) {
  <span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">+</span> b;

  <span style="color:#ff79c6">return</span> result;
};
</code></pre></div></li>
<li>
<p>Arrow functions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// expression at the right side
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> (a, b) =&gt; a <span style="color:#ff79c6">+</span> b;

<span style="color:#6272a4">// or multi-line syntax with { ... }, need return here:
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> sum <span style="color:#ff79c6">=</span> (a, b) =&gt; {
  <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">return</span> a <span style="color:#ff79c6">+</span> b;
}

<span style="color:#6272a4">// without arguments
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> sayHi <span style="color:#ff79c6">=</span> () =&gt; alert(<span style="color:#f1fa8c">&#34;Hello&#34;</span>);

<span style="color:#6272a4">// with a single argument
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#ff79c6">double</span> <span style="color:#ff79c6">=</span> n =&gt; n <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">2</span>;
</code></pre></div></li>
</ol>
<ul>
<li>Functions may have local variables: those declared inside its body. Such variables are only visible inside the function.</li>
<li>Parameters can have default values: <code>function sum(a = 1, b = 2) {...}</code>.</li>
<li>Functions always return something. If there&rsquo;s no <code>return</code> statement, then the result is <code>undefined</code>.</li>
</ul>
<p>Details: see <a href="info:function-basics">info:function-basics</a>, <a href="info:arrow-functions-basics">info:arrow-functions-basics</a>.</p>
<h3 id="more-to-come">More to come</h3>
<p>That was a brief list of JavaScript features. As of now we&rsquo;ve studied only basics. Further in the tutorial you&rsquo;ll find more specials and advanced features of JavaScript.</p>
<h2 id="objects">Objects</h2>
<p>As we know from the chapter <a href="info:types">info:types</a>, there are eight data types in JavaScript. Seven of them are called &ldquo;primitive&rdquo;, because their values contain only a single thing (be it a string or a number or whatever).</p>
<p>In contrast, objects are used to store keyed collections of various data and more complex entities. In JavaScript, objects penetrate almost every aspect of the language. So we must understand them first before going in-depth anywhere else.</p>
<p>An object can be created with figure brackets <code>{…}</code> with an optional list of <em>properties</em>. A property is a &ldquo;key: value&rdquo; pair, where <code>key</code> is a string (also called a &ldquo;property name&rdquo;), and <code>value</code> can be anything.</p>
<p>We can imagine an object as a cabinet with signed files. Every piece of data is stored in its file by the key. It&rsquo;s easy to find a file by its name or add/remove a file.</p>
<p>An empty object (&ldquo;empty cabinet&rdquo;) can be created using one of two syntaxes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Object</span>(); <span style="color:#6272a4">// &#34;object constructor&#34; syntax
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {};  <span style="color:#6272a4">// &#34;object literal&#34; syntax
</span></code></pre></div><p>Usually, the figure brackets <code>{...}</code> are used. That declaration is called an <em>object literal</em>.</p>
<h3 id="literals-and-properties">Literals and properties</h3>
<p>We can immediately put some properties into <code>{...}</code> as &ldquo;key: value&rdquo; pairs:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {     <span style="color:#6272a4">// an object
</span><span style="color:#6272a4"></span>  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,  <span style="color:#6272a4">// by key &#34;name&#34; store value &#34;John&#34;
</span><span style="color:#6272a4"></span>  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>        <span style="color:#6272a4">// by key &#34;age&#34; store value 30
</span><span style="color:#6272a4"></span>};
</code></pre></div><p>A property has a key (also known as &ldquo;name&rdquo; or &ldquo;identifier&rdquo;) before the colon <code>&quot;:&quot;</code> and a value to the right of it.</p>
<p>In the <code>user</code> object, there are two properties:</p>
<ol>
<li>The first property has the name <code>&quot;name&quot;</code> and the value <code>&quot;John&quot;</code>.</li>
<li>The second one has the name <code>&quot;age&quot;</code> and the value <code>30</code>.</li>
</ol>
<p>The resulting <code>user</code> object can be imagined as a cabinet with two signed files labeled &ldquo;name&rdquo; and &ldquo;age&rdquo;.</p>
<p>We can add, remove and read files from it any time.</p>
<p>Property values are accessible using the dot notation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// get property values of the object:
</span><span style="color:#6272a4"></span>alert( user.name ); <span style="color:#6272a4">// John
</span><span style="color:#6272a4"></span>alert( user.age ); <span style="color:#6272a4">// 30
</span></code></pre></div><p>The value can be of any type. Let&rsquo;s add a boolean one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">user.isAdmin <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;
</code></pre></div><p>To remove a property, we can use <code>delete</code> operator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">delete</span> user.age;
</code></pre></div><p>We can also use multiword property names, but then they must be quoted:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,
  <span style="color:#f1fa8c">&#34;likes birds&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>  <span style="color:#6272a4">// multiword property name must be quoted
</span><span style="color:#6272a4"></span>};
</code></pre></div><p>The last property in the list may end with a comma:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,
}
</code></pre></div><p>That is called a &ldquo;trailing&rdquo; or &ldquo;hanging&rdquo; comma. Makes it easier to add/remove/move around properties, because all lines become alike.</p>
<p>Please note: an object declared as <code>const</code> <em>can</em> be modified.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
};


user.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Pete&#34;</span>; <span style="color:#6272a4">// (*)
</span><span style="color:#6272a4"></span>

alert(user.name); <span style="color:#6272a4">// Pete
</span></code></pre></div><p>It might seem that the line <code>(*)</code> would cause an error, but no. The <code>const</code> fixes the value of <code>user</code>, but not its contents.</p>
<p>The <code>const</code> would give an error only if we try to set <code>user=...</code> as a whole.</p>
<p>There&rsquo;s another way to make constant object properties, we&rsquo;ll cover it later in the chapter <a href="info:property-descriptors">info:property-descriptors</a>.</p>
<h3 id="square-brackets">Square brackets</h3>
<p>For multiword properties, the dot access doesn&rsquo;t work:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// this would give a syntax error
</span><span style="color:#6272a4"></span>user.likes birds <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>
</code></pre></div><p>JavaScript doesn&rsquo;t understand that. It thinks that we address <code>user.likes</code>, and then gives a syntax error when comes across unexpected <code>birds</code>.</p>
<p>The dot requires the key to be a valid variable identifier. That implies: contains no spaces, doesn&rsquo;t start with a digit and doesn&rsquo;t include special characters (<code>$</code> and <code>_</code> are allowed).</p>
<p>There&rsquo;s an alternative &ldquo;square bracket notation&rdquo; that works with any string:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {};

<span style="color:#6272a4">// set
</span><span style="color:#6272a4"></span>user[<span style="color:#f1fa8c">&#34;likes birds&#34;</span>] <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;

<span style="color:#6272a4">// get
</span><span style="color:#6272a4"></span>alert(user[<span style="color:#f1fa8c">&#34;likes birds&#34;</span>]); <span style="color:#6272a4">// true
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// delete
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">delete</span> user[<span style="color:#f1fa8c">&#34;likes birds&#34;</span>];
</code></pre></div><p>Now everything is fine. Please note that the string inside the brackets is properly quoted (any type of quotes will do).</p>
<p>Square brackets also provide a way to obtain the property name as the result of any expression &ndash; as opposed to a literal string &ndash; like from a variable as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;likes birds&#34;</span>;

<span style="color:#6272a4">// same as user[&#34;likes birds&#34;] = true;
</span><span style="color:#6272a4"></span>user[key] <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;
</code></pre></div><p>Here, the variable <code>key</code> may be calculated at run-time or depend on the user input. And then we use it to access the property. That gives us a great deal of flexibility.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};

<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;What do you want to know about the user?&#34;</span>, <span style="color:#f1fa8c">&#34;name&#34;</span>);

<span style="color:#6272a4">// access by variable
</span><span style="color:#6272a4"></span>alert( user[key] ); <span style="color:#6272a4">// John (if enter &#34;name&#34;)
</span></code></pre></div><p>The dot notation cannot be used in a similar way:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};

<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;name&#34;</span>;
alert( user.key ) <span style="color:#6272a4">// undefined
</span></code></pre></div><h4 id="computed-properties">Computed properties</h4>
<p>We can use square brackets in an object literal, when creating an object. That&rsquo;s called <em>computed properties</em>.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> fruit <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;Which fruit to buy?&#34;</span>, <span style="color:#f1fa8c">&#34;apple&#34;</span>);

<span style="color:#8be9fd;font-style:italic">let</span> bag <span style="color:#ff79c6">=</span> {

  [fruit]<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">5</span>, <span style="color:#6272a4">// the name of the property is taken from the variable fruit
</span><span style="color:#6272a4"></span>
};

alert( bag.apple ); <span style="color:#6272a4">// 5 if fruit=&#34;apple&#34;
</span></code></pre></div><p>The meaning of a computed property is simple: <code>[fruit]</code> means that the property name should be taken from <code>fruit</code>.</p>
<p>So, if a visitor enters <code>&quot;apple&quot;</code>, <code>bag</code> will become <code>{apple: 5}</code>.</p>
<p>Essentially, that works the same as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> fruit <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#34;Which fruit to buy?&#34;</span>, <span style="color:#f1fa8c">&#34;apple&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> bag <span style="color:#ff79c6">=</span> {};

<span style="color:#6272a4">// take property name from the fruit variable
</span><span style="color:#6272a4"></span>bag[fruit] <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>;
</code></pre></div><p>&hellip;But looks nicer.</p>
<p>We can use more complex expressions inside square brackets:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> fruit <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;apple&#39;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> bag <span style="color:#ff79c6">=</span> {
  [fruit <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;Computers&#39;</span>]<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">5</span> <span style="color:#6272a4">// bag.appleComputers = 5
</span><span style="color:#6272a4"></span>};
</code></pre></div><p>Square brackets are much more powerful than the dot notation. They allow any property names and variables. But they are also more cumbersome to write.</p>
<p>So most of the time, when property names are known and simple, the dot is used. And if we need something more complex, then we switch to square brackets.</p>
<h3 id="property-value-shorthand">Property value shorthand</h3>
<p>In real code we often use existing variables as values for property names.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> makeUser(name, age) {
  <span style="color:#ff79c6">return</span> {
    name<span style="color:#ff79c6">:</span> name,
    age<span style="color:#ff79c6">:</span> age,
    <span style="color:#6272a4">// ...other properties
</span><span style="color:#6272a4"></span>  };
}

<span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> makeUser(<span style="color:#f1fa8c">&#34;John&#34;</span>, <span style="color:#bd93f9">30</span>);
alert(user.name); <span style="color:#6272a4">// John
</span></code></pre></div><p>In the example above, properties have the same names as variables. The use-case of making a property from a variable is so common, that there&rsquo;s a special <em>property value shorthand</em> to make it shorter.</p>
<p>Instead of <code>name:name</code> we can just write <code>name</code>, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> makeUser(name, age) {

  <span style="color:#ff79c6">return</span> {
    name, <span style="color:#6272a4">// same as name: name
</span><span style="color:#6272a4"></span>    age,  <span style="color:#6272a4">// same as age: age
</span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>  };

}
</code></pre></div><p>We can use both normal properties and shorthands in the same object:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name,  <span style="color:#6272a4">// same as name:name
</span><span style="color:#6272a4"></span>  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};
</code></pre></div><h3 id="property-names-limitations">Property names limitations</h3>
<p>As we already know, a variable cannot have a name equal to one of language-reserved words like &ldquo;for&rdquo;, &ldquo;let&rdquo;, &ldquo;return&rdquo; etc.</p>
<p>But for an object property, there&rsquo;s no such restriction:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// these properties are all right
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> obj <span style="color:#ff79c6">=</span> {
  <span style="color:#ff79c6">for</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span>,
  <span style="color:#8be9fd;font-style:italic">let</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span>,
  <span style="color:#ff79c6">return</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">3</span>
};

alert( obj.<span style="color:#ff79c6">for</span> <span style="color:#ff79c6">+</span> obj.<span style="color:#8be9fd;font-style:italic">let</span> <span style="color:#ff79c6">+</span> obj.<span style="color:#ff79c6">return</span> );  <span style="color:#6272a4">// 6
</span></code></pre></div><p>In short, there are no limitations on property names. They can be any strings or symbols (a special type for identifiers, to be covered later).</p>
<p>Other types are automatically converted to strings.</p>
<p>For instance, a number <code>0</code> becomes a string <code>&quot;0&quot;</code> when used as a property key:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> obj <span style="color:#ff79c6">=</span> {
  <span style="color:#bd93f9">0</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;test&#34;</span> <span style="color:#6272a4">// same as &#34;0&#34;: &#34;test&#34;
</span><span style="color:#6272a4"></span>};

<span style="color:#6272a4">// both alerts access the same property (the number 0 is converted to string &#34;0&#34;)
</span><span style="color:#6272a4"></span>alert( obj[<span style="color:#f1fa8c">&#34;0&#34;</span>] ); <span style="color:#6272a4">// test
</span><span style="color:#6272a4"></span>alert( obj[<span style="color:#bd93f9">0</span>] ); <span style="color:#6272a4">// test (same property)
</span></code></pre></div><p>There&rsquo;s a minor gotcha with a special property named <code>__proto__</code>. We can&rsquo;t set it to a non-object value:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> obj <span style="color:#ff79c6">=</span> {};
obj.__proto__ <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">5</span>; <span style="color:#6272a4">// assign a number
</span><span style="color:#6272a4"></span>alert(obj.__proto__); <span style="color:#6272a4">// [object Object] - the value is an object, didn&#39;t work as intended
</span></code></pre></div><p>As we see from the code, the assignment to a primitive <code>5</code> is ignored.</p>
<p>We&rsquo;ll cover the special nature of <code>__proto__</code> in <a href="info:prototype-inheritance">subsequent chapters</a>, and suggest the <a href="info:prototype-methods">ways to fix</a> such behavior.</p>
<h3 id="property-existence-test-in-operator">Property existence test, &ldquo;in&rdquo; operator</h3>
<p>A notable feature of objects in JavaScript, compared to many other languages, is that it&rsquo;s possible to access any property. There will be no error if the property doesn&rsquo;t exist!</p>
<p>Reading a non-existing property just returns <code>undefined</code>. So we can easily test whether the property exists:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {};

alert( user.noSuchProperty <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">undefined</span> ); <span style="color:#6272a4">// true means &#34;no such property&#34;
</span></code></pre></div><p>There&rsquo;s also a special operator <code>&quot;in&quot;</code> for that.</p>
<p>The syntax is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f1fa8c">&#34;key&#34;</span> <span style="color:#ff79c6">in</span> object
</code></pre></div><p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>, age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span> };

alert( <span style="color:#f1fa8c">&#34;age&#34;</span> <span style="color:#ff79c6">in</span> user ); <span style="color:#6272a4">// true, user.age exists
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#34;blabla&#34;</span> <span style="color:#ff79c6">in</span> user ); <span style="color:#6272a4">// false, user.blabla doesn&#39;t exist
</span></code></pre></div><p>Please note that on the left side of <code>in</code> there must be a <em>property name</em>. That&rsquo;s usually a quoted string.</p>
<p>If we omit quotes, that means a variable, it should contain the actual name to be tested. For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span> };

<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;age&#34;</span>;
alert( key <span style="color:#ff79c6">in</span> user ); <span style="color:#6272a4">// true, property &#34;age&#34; exists
</span></code></pre></div><p>Why does the <code>in</code> operator exist? Isn&rsquo;t it enough to compare against <code>undefined</code>?</p>
<p>Well, most of the time the comparison with <code>undefined</code> works fine. But there&rsquo;s a special case when it fails, but <code>&quot;in&quot;</code> works correctly.</p>
<p>It&rsquo;s when an object property exists, but stores <code>undefined</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> obj <span style="color:#ff79c6">=</span> {
  test<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">undefined</span>
};

alert( obj.test ); <span style="color:#6272a4">// it&#39;s undefined, so - no such property?
</span><span style="color:#6272a4"></span>
alert( <span style="color:#f1fa8c">&#34;test&#34;</span> <span style="color:#ff79c6">in</span> obj ); <span style="color:#6272a4">// true, the property does exist!
</span></code></pre></div><p>In the code above, the property <code>obj.test</code> technically exists. So the <code>in</code> operator works right.</p>
<p>Situations like this happen very rarely, because <code>undefined</code> should not be explicitly assigned. We mostly use <code>null</code> for &ldquo;unknown&rdquo; or &ldquo;empty&rdquo; values. So the <code>in</code> operator is an exotic guest in the code.</p>
<h3 id="the-forin-loop">The &ldquo;for..in&rdquo; loop</h3>
<p>To walk over all keys of an object, there exists a special form of the loop: <code>for..in</code>. This is a completely different thing from the <code>for(;;)</code> construct that we studied before.</p>
<p>The syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">for</span> (key <span style="color:#ff79c6">in</span> object) {
  <span style="color:#6272a4">// executes the body for each key among object properties
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>For instance, let&rsquo;s output all properties of <code>user</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,
  isAdmin<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>
};

<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">in</span> user) {
  <span style="color:#6272a4">// keys
</span><span style="color:#6272a4"></span>  alert( key );  <span style="color:#6272a4">// name, age, isAdmin
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// values for the keys
</span><span style="color:#6272a4"></span>  alert( user[key] ); <span style="color:#6272a4">// John, 30, true
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>Note that all &ldquo;for&rdquo; constructs allow us to declare the looping variable inside the loop, like <code>let key</code> here.</p>
<p>Also, we could use another variable name here instead of <code>key</code>. For instance, <code>&quot;for (let prop in obj)&quot;</code> is also widely used.</p>
<h4 id="ordered-like-an-object">Ordered like an object</h4>
<p>Are objects ordered? In other words, if we loop over an object, do we get all properties in the same order they were added? Can we rely on this?</p>
<p>The short answer is: &ldquo;ordered in a special fashion&rdquo;: integer properties are sorted, others appear in creation order. The details follow.</p>
<p>As an example, let&rsquo;s consider an object with the phone codes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> codes <span style="color:#ff79c6">=</span> {
  <span style="color:#f1fa8c">&#34;49&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Germany&#34;</span>,
  <span style="color:#f1fa8c">&#34;41&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Switzerland&#34;</span>,
  <span style="color:#f1fa8c">&#34;44&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Great Britain&#34;</span>,
  <span style="color:#6272a4">// ..,
</span><span style="color:#6272a4"></span>  <span style="color:#f1fa8c">&#34;1&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;USA&#34;</span>
};


<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> code <span style="color:#ff79c6">in</span> codes) {
  alert(code); <span style="color:#6272a4">// 1, 41, 44, 49
</span><span style="color:#6272a4"></span>}

</code></pre></div><p>The object may be used to suggest a list of options to the user. If we&rsquo;re making a site mainly for German audience then we probably want <code>49</code> to be the first.</p>
<p>But if we run the code, we see a totally different picture:</p>
<ul>
<li>USA (1) goes first</li>
<li>then Switzerland (41) and so on.</li>
</ul>
<p>The phone codes go in the ascending sorted order, because they are integers. So we see <code>1, 41, 44, 49</code>.</p>
<p>The &ldquo;integer property&rdquo; term here means a string that can be converted to-and-from an integer without a change.</p>
<p>So, &ldquo;49&rdquo; is an integer property name, because when it&rsquo;s transformed to an integer number and back, it&rsquo;s still the same. But &ldquo;+49&rdquo; and &ldquo;1.2&rdquo; are not:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// Math.trunc is a built-in function that removes the decimal part
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">String</span>(<span style="color:#8be9fd;font-style:italic">Math</span>.trunc(<span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#f1fa8c">&#34;49&#34;</span>))) ); <span style="color:#6272a4">// &#34;49&#34;, same, integer property
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">String</span>(<span style="color:#8be9fd;font-style:italic">Math</span>.trunc(<span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#f1fa8c">&#34;+49&#34;</span>))) ); <span style="color:#6272a4">// &#34;49&#34;, not same &#34;+49&#34; ⇒ not integer property
</span><span style="color:#6272a4"></span>alert( <span style="color:#8be9fd;font-style:italic">String</span>(<span style="color:#8be9fd;font-style:italic">Math</span>.trunc(<span style="color:#8be9fd;font-style:italic">Number</span>(<span style="color:#f1fa8c">&#34;1.2&#34;</span>))) ); <span style="color:#6272a4">// &#34;1&#34;, not same &#34;1.2&#34; ⇒ not integer property
</span></code></pre></div><p>&hellip;On the other hand, if the keys are non-integer, then they are listed in the creation order, for instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  surname<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Smith&#34;</span>
};
user.age <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">25</span>; <span style="color:#6272a4">// add one more
</span><span style="color:#6272a4"></span>

<span style="color:#6272a4">// non-integer properties are listed in the creation order
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> prop <span style="color:#ff79c6">in</span> user) {
  alert( prop ); <span style="color:#6272a4">// name, surname, age
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>So, to fix the issue with the phone codes, we can &ldquo;cheat&rdquo; by making the codes non-integer. Adding a plus <code>&quot;+&quot;</code> sign before each code is enough.</p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> codes <span style="color:#ff79c6">=</span> {
  <span style="color:#f1fa8c">&#34;+49&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Germany&#34;</span>,
  <span style="color:#f1fa8c">&#34;+41&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Switzerland&#34;</span>,
  <span style="color:#f1fa8c">&#34;+44&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Great Britain&#34;</span>,
  <span style="color:#6272a4">// ..,
</span><span style="color:#6272a4"></span>  <span style="color:#f1fa8c">&#34;+1&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;USA&#34;</span>
};

<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> code <span style="color:#ff79c6">in</span> codes) {
  alert( <span style="color:#ff79c6">+</span>code ); <span style="color:#6272a4">// 49, 41, 44, 1
</span><span style="color:#6272a4"></span>}
</code></pre></div><p>Now it works as intended.</p>
<h3 id="summary-10">Summary</h3>
<p>Objects are associative arrays with several special features.</p>
<p>They store properties (key-value pairs), where:</p>
<ul>
<li>Property keys must be strings or symbols (usually strings).</li>
<li>Values can be of any type.</li>
</ul>
<p>To access a property, we can use:</p>
<ul>
<li>The dot notation: <code>obj.property</code>.</li>
<li>Square brackets notation <code>obj[&quot;property&quot;]</code>. Square brackets allow to take the key from a variable, like <code>obj[varWithKey]</code>.</li>
</ul>
<p>Additional operators:</p>
<ul>
<li>To delete a property: <code>delete obj.prop</code>.</li>
<li>To check if a property with the given key exists: <code>&quot;key&quot; in obj</code>.</li>
<li>To iterate over an object: <code>for (let key in obj)</code> loop.</li>
</ul>
<p>What we&rsquo;ve studied in this chapter is called a &ldquo;plain object&rdquo;, or just <code>Object</code>.</p>
<p>There are many other kinds of objects in JavaScript:</p>
<ul>
<li><code>Array</code> to store ordered data collections,</li>
<li><code>Date</code> to store the information about the date and time,</li>
<li><code>Error</code> to store the information about an error.</li>
<li>&hellip;And so on.</li>
</ul>
<p>They have their special features that we&rsquo;ll study later. Sometimes people say something like &ldquo;Array type&rdquo; or &ldquo;Date type&rdquo;, but formally they are not types of their own, but belong to a single &ldquo;object&rdquo; data type. And they extend it in various ways.</p>
<p>Objects in JavaScript are very powerful. Here we&rsquo;ve just scratched the surface of a topic that is really huge. We&rsquo;ll be closely working with objects and learning more about them in further parts of the tutorial.</p>
<h2 id="object-copying-references">Object copying, references</h2>
<p>One of the fundamental differences of objects vs primitives is that they are stored and copied &ldquo;by reference&rdquo;.</p>
<p>Primitive values: strings, numbers, booleans &ndash; are assigned/copied &ldquo;as a whole value&rdquo;.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> message <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Hello!&#34;</span>;
<span style="color:#8be9fd;font-style:italic">let</span> phrase <span style="color:#ff79c6">=</span> message;
</code></pre></div><p>As a result we have two independent variables, each one is storing the string <code>&quot;Hello!&quot;</code>.</p>
<p>Objects are not like that.</p>
<p><strong>A variable stores not the object itself, but its &ldquo;address in memory&rdquo;, in other words &ldquo;a reference&rdquo; to it.</strong></p>
<p>Here&rsquo;s the picture for the object:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
};
</code></pre></div><p>Here, the object is stored somewhere in memory. And the variable <code>user</code> has a &ldquo;reference&rdquo; to it.</p>
<p><strong>When an object variable is copied &ndash; the reference is copied, the object is not duplicated.</strong></p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span> };

<span style="color:#8be9fd;font-style:italic">let</span> admin <span style="color:#ff79c6">=</span> user; <span style="color:#6272a4">// copy the reference
</span></code></pre></div><p>Now we have two variables, each one with the reference to the same object:</p>
<p>We can use any variable to access the object and modify its contents:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;John&#39;</span> };

<span style="color:#8be9fd;font-style:italic">let</span> admin <span style="color:#ff79c6">=</span> user;


admin.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Pete&#39;</span>; <span style="color:#6272a4">// changed by the &#34;admin&#34; reference
</span><span style="color:#6272a4"></span>

alert(user.name); <span style="color:#6272a4">// &#39;Pete&#39;, changes are seen from the &#34;user&#34; reference
</span></code></pre></div><p>The example above demonstrates that there is only one object. As if we had a cabinet with two keys and used one of them (<code>admin</code>) to get into it. Then, if we later use another key (<code>user</code>) we can see changes.</p>
<h3 id="comparison-by-reference">Comparison by reference</h3>
<p>The equality <code>==</code> and strict equality <code>===</code> operators for objects work exactly the same.</p>
<p><strong>Two objects are equal only if they are the same object.</strong></p>
<p>Here two variables reference the same object, thus they are equal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> {};
<span style="color:#8be9fd;font-style:italic">let</span> b <span style="color:#ff79c6">=</span> a; <span style="color:#6272a4">// copy the reference
</span><span style="color:#6272a4"></span>
alert( a <span style="color:#ff79c6">==</span> b ); <span style="color:#6272a4">// true, both variables reference the same object
</span><span style="color:#6272a4"></span>alert( a <span style="color:#ff79c6">===</span> b ); <span style="color:#6272a4">// true
</span></code></pre></div><p>And here two independent objects are not equal, even though both are empty:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> a <span style="color:#ff79c6">=</span> {};
<span style="color:#8be9fd;font-style:italic">let</span> b <span style="color:#ff79c6">=</span> {}; <span style="color:#6272a4">// two independent objects
</span><span style="color:#6272a4"></span>
alert( a <span style="color:#ff79c6">==</span> b ); <span style="color:#6272a4">// false
</span></code></pre></div><p>For comparisons like <code>obj1 &gt; obj2</code> or for a comparison against a primitive <code>obj == 5</code>, objects are converted to primitives. We&rsquo;ll study how object conversions work very soon, but to tell the truth, such comparisons occur very rarely, usually as a result of a coding mistake.</p>
<h3 id="cloning-and-merging-objectassign">Cloning and merging, Object.assign</h3>
<p>So, copying an object variable creates one more reference to the same object.</p>
<p>But what if we need to duplicate an object? Create an independent copy, a clone?</p>
<p>That&rsquo;s also doable, but a little bit more difficult, because there&rsquo;s no built-in method for that in JavaScript. Actually, that&rsquo;s rarely needed. Copying by reference is good most of the time.</p>
<p>But if we really want that, then we need to create a new object and replicate the structure of the existing one by iterating over its properties and copying them on the primitive level.</p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};


<span style="color:#8be9fd;font-style:italic">let</span> clone <span style="color:#ff79c6">=</span> {}; <span style="color:#6272a4">// the new empty object
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// let&#39;s copy all user properties into it
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">in</span> user) {
  clone[key] <span style="color:#ff79c6">=</span> user[key];
}


<span style="color:#6272a4">// now clone is a fully independent object with the same content
</span><span style="color:#6272a4"></span>clone.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Pete&#34;</span>; <span style="color:#6272a4">// changed the data in it
</span><span style="color:#6272a4"></span>
alert( user.name ); <span style="color:#6272a4">// still John in the original object
</span></code></pre></div><p>Also we can use the method <a href="mdn:js/Object/assign">Object.assign</a> for that.</p>
<p>The syntax is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">Object</span>.assign(dest, [src1, src2, src3...])
</code></pre></div><ul>
<li>The first argument <code>dest</code> is a target object.</li>
<li>Further arguments <code>src1, ..., srcN</code> (can be as many as needed) are source objects.</li>
<li>It copies the properties of all source objects <code>src1, ..., srcN</code> into the target <code>dest</code>. In other words, properties of all arguments starting from the second are copied into the first object.</li>
<li>The call returns <code>dest</code>.</li>
</ul>
<p>For instance, we can use it to merge several objects into one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span> };

<span style="color:#8be9fd;font-style:italic">let</span> permissions1 <span style="color:#ff79c6">=</span> { canView<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span> };
<span style="color:#8be9fd;font-style:italic">let</span> permissions2 <span style="color:#ff79c6">=</span> { canEdit<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span> };


<span style="color:#6272a4">// copies all properties from permissions1 and permissions2 into user
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">Object</span>.assign(user, permissions1, permissions2);


<span style="color:#6272a4">// now user = { name: &#34;John&#34;, canView: true, canEdit: true }
</span></code></pre></div><p>If the copied property name already exists, it gets overwritten:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span> };

<span style="color:#8be9fd;font-style:italic">Object</span>.assign(user, { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Pete&#34;</span> });

alert(user.name); <span style="color:#6272a4">// now user = { name: &#34;Pete&#34; }
</span></code></pre></div><p>We also can use <code>Object.assign</code> to replace <code>for..in</code> loop for simple cloning:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};


<span style="color:#8be9fd;font-style:italic">let</span> clone <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Object</span>.assign({}, user);

</code></pre></div><p>It copies all properties of <code>user</code> into the empty object and returns it.</p>
<h3 id="nested-cloning">Nested cloning</h3>
<p>Until now we assumed that all properties of <code>user</code> are primitive. But properties can be references to other objects. What to do with them?</p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  sizes<span style="color:#ff79c6">:</span> {
    height<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">182</span>,
    width<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">50</span>
  }
};

alert( user.sizes.height ); <span style="color:#6272a4">// 182
</span></code></pre></div><p>Now it&rsquo;s not enough to copy <code>clone.sizes = user.sizes</code>, because the <code>user.sizes</code> is an object, it will be copied by reference. So <code>clone</code> and <code>user</code> will share the same sizes:</p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  sizes<span style="color:#ff79c6">:</span> {
    height<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">182</span>,
    width<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">50</span>
  }
};

<span style="color:#8be9fd;font-style:italic">let</span> clone <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Object</span>.assign({}, user);

alert( user.sizes <span style="color:#ff79c6">===</span> clone.sizes ); <span style="color:#6272a4">// true, same object
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// user and clone share sizes
</span><span style="color:#6272a4"></span>user.sizes.width<span style="color:#ff79c6">++</span>;       <span style="color:#6272a4">// change a property from one place
</span><span style="color:#6272a4"></span>alert(clone.sizes.width); <span style="color:#6272a4">// 51, see the result from the other one
</span></code></pre></div><p>To fix that, we should use the cloning loop that examines each value of <code>user[key]</code> and, if it&rsquo;s an object, then replicate its structure as well. That is called a &ldquo;deep cloning&rdquo;.</p>
<p>There&rsquo;s a standard algorithm for deep cloning that handles the case above and more complex cases, called the <a href="https://html.spec.whatwg.org/multipage/structured-data.html#safe-passing-of-structured-data">Structured cloning algorithm</a>.</p>
<p>We can use recursion to implement it. Or, not to reinvent the wheel, take an existing implementation, for instance <a href="https://lodash.com/docs#cloneDeep">_.cloneDeep(obj)</a> from the JavaScript library <a href="https://lodash.com">lodash</a>.</p>
<h3 id="summary-11">Summary</h3>
<p>Objects are assigned and copied by reference. In other words, a variable stores not the &ldquo;object value&rdquo;, but a &ldquo;reference&rdquo; (address in memory) for the value. So copying such a variable or passing it as a function argument copies that reference, not the object.</p>
<p>All operations via copied references (like adding/removing properties) are performed on the same single object.</p>
<p>To make a &ldquo;real copy&rdquo; (a clone) we can use <code>Object.assign</code> for the so-called &ldquo;shallow copy&rdquo; (nested objects are copied by reference) or a &ldquo;deep cloning&rdquo; function, such as <a href="https://lodash.com/docs#cloneDeep">_.cloneDeep(obj)</a>.</p>
<h2 id="garbage-collection">Garbage collection</h2>
<p>Memory management in JavaScript is performed automatically and invisibly to us. We create primitives, objects, functions&hellip; All that takes memory.</p>
<p>What happens when something is not needed any more? How does the JavaScript engine discover it and clean it up?</p>
<h3 id="reachability">Reachability</h3>
<p>The main concept of memory management in JavaScript is <em>reachability</em>.</p>
<p>Simply put, &ldquo;reachable&rdquo; values are those that are accessible or usable somehow. They are guaranteed to be stored in memory.</p>
<ol>
<li>
<p>There&rsquo;s a base set of inherently reachable values, that cannot be deleted for obvious reasons.</p>
<p>For instance:</p>
<ul>
<li>Local variables and parameters of the current function.</li>
<li>Variables and parameters for other functions on the current chain of nested calls.</li>
<li>Global variables.</li>
<li>(there are some other, internal ones as well)</li>
</ul>
<p>These values are called <em>roots</em>.</p>
</li>
<li>
<p>Any other value is considered reachable if it&rsquo;s reachable from a root by a reference or by a chain of references.</p>
<p>For instance, if there&rsquo;s an object in a global variable, and that object has a property referencing another object, that object is considered reachable. And those that it references are also reachable. Detailed examples to follow.</p>
</li>
</ol>
<p>There&rsquo;s a background process in the JavaScript engine that is called <a href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)">garbage collector</a>. It monitors all objects and removes those that have become unreachable.</p>
<h3 id="a-simple-example">A simple example</h3>
<p>Here&rsquo;s the simplest example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// user has a reference to the object
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
};
</code></pre></div><p>Here the arrow depicts an object reference. The global variable <code>&quot;user&quot;</code> references the object <code>{name: &quot;John&quot;}</code> (we&rsquo;ll call it John for brevity). The <code>&quot;name&quot;</code> property of John stores a primitive, so it&rsquo;s painted inside the object.</p>
<p>If the value of <code>user</code> is overwritten, the reference is lost:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
</code></pre></div><p>Now John becomes unreachable. There&rsquo;s no way to access it, no references to it. Garbage collector will junk the data and free the memory.</p>
<h3 id="two-references">Two references</h3>
<p>Now let&rsquo;s imagine we copied the reference from <code>user</code> to <code>admin</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// user has a reference to the object
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
};


<span style="color:#8be9fd;font-style:italic">let</span> admin <span style="color:#ff79c6">=</span> user;

</code></pre></div><p>Now if we do the same:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
</code></pre></div><p>&hellip;Then the object is still reachable via <code>admin</code> global variable, so it&rsquo;s in memory. If we overwrite <code>admin</code> too, then it can be removed.</p>
<h3 id="interlinked-objects">Interlinked objects</h3>
<p>Now a more complex example. The family:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> marry(man, woman) {
  woman.husband <span style="color:#ff79c6">=</span> man;
  man.wife <span style="color:#ff79c6">=</span> woman;

  <span style="color:#ff79c6">return</span> {
    father<span style="color:#ff79c6">:</span> man,
    mother<span style="color:#ff79c6">:</span> woman
  }
}

<span style="color:#8be9fd;font-style:italic">let</span> family <span style="color:#ff79c6">=</span> marry({
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
}, {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Ann&#34;</span>
});
</code></pre></div><p>Function <code>marry</code> &ldquo;marries&rdquo; two objects by giving them references to each other and returns a new object that contains them both.</p>
<p>The resulting memory structure:</p>
<p>As of now, all objects are reachable.</p>
<p>Now let&rsquo;s remove two references:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">delete</span> family.father;
<span style="color:#ff79c6">delete</span> family.mother.husband;
</code></pre></div><p>It&rsquo;s not enough to delete only one of these two references, because all objects would still be reachable.</p>
<p>But if we delete both, then we can see that John has no incoming reference any more:</p>
<p>Outgoing references do not matter. Only incoming ones can make an object reachable. So, John is now unreachable and will be removed from the memory with all its data that also became unaccessible.</p>
<p>After garbage collection:</p>
<h3 id="unreachable-island">Unreachable island</h3>
<p>It is possible that the whole island of interlinked objects becomes unreachable and is removed from the memory.</p>
<p>The source object is the same as above. Then:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">family <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
</code></pre></div><p>The in-memory picture becomes:</p>
<p>This example demonstrates how important the concept of reachability is.</p>
<p>It&rsquo;s obvious that John and Ann are still linked, both have incoming references. But that&rsquo;s not enough.</p>
<p>The former <code>&quot;family&quot;</code> object has been unlinked from the root, there&rsquo;s no reference to it any more, so the whole island becomes unreachable and will be removed.</p>
<h3 id="internal-algorithms">Internal algorithms</h3>
<p>The basic garbage collection algorithm is called &ldquo;mark-and-sweep&rdquo;.</p>
<p>The following &ldquo;garbage collection&rdquo; steps are regularly performed:</p>
<ul>
<li>The garbage collector takes roots and &ldquo;marks&rdquo; (remembers) them.</li>
<li>Then it visits and &ldquo;marks&rdquo; all references from them.</li>
<li>Then it visits marked objects and marks <em>their</em> references. All visited objects are remembered, so as not to visit the same object twice in the future.</li>
<li>&hellip;And so on until every reachable (from the roots) references are visited.</li>
<li>All objects except marked ones are removed.</li>
</ul>
<p>For instance, let our object structure look like this:</p>
<p>We can clearly see an &ldquo;unreachable island&rdquo; to the right side. Now let&rsquo;s see how &ldquo;mark-and-sweep&rdquo; garbage collector deals with it.</p>
<p>The first step marks the roots:</p>
<p>Then their references are marked:</p>
<p>&hellip;And their references, while possible:</p>
<p>Now the objects that could not be visited in the process are considered unreachable and will be removed:</p>
<p>We can also imagine the process as spilling a huge bucket of paint from the roots, that flows through all references and marks all reachable objects. The unmarked ones are then removed.</p>
<p>That&rsquo;s the concept of how garbage collection works. JavaScript engines apply many optimizations to make it run faster and not affect the execution.</p>
<p>Some of the optimizations:</p>
<ul>
<li><strong>Generational collection</strong> &ndash; objects are split into two sets: &ldquo;new ones&rdquo; and &ldquo;old ones&rdquo;. Many  objects appear, do their job and die fast, they can be cleaned up aggressively. Those that survive for long enough, become &ldquo;old&rdquo; and are examined less often.</li>
<li><strong>Incremental collection</strong> &ndash; if there are many objects, and we try to walk and mark the whole object set at once, it may take some time and introduce visible delays in the execution. So the engine tries to split the garbage collection into pieces. Then the pieces are executed one by one, separately. That requires some extra bookkeeping between them to track changes, but we have many tiny delays instead of a big one.</li>
<li><strong>Idle-time collection</strong> &ndash; the garbage collector tries to run only while the CPU is idle, to reduce the possible effect on the execution.</li>
</ul>
<p>There exist other optimizations and flavours of garbage collection algorithms. As much as I&rsquo;d like to describe them here, I have to hold off, because different engines implement different tweaks and techniques. And, what&rsquo;s even more important, things change as engines develop, so studying deeper &ldquo;in advance&rdquo;, without a real need is probably not worth that. Unless, of course, it is a matter of pure interest, then there will be some links for you below.</p>
<h3 id="summary-12">Summary</h3>
<p>The main things to know:</p>
<ul>
<li>Garbage collection is performed automatically. We cannot force or prevent it.</li>
<li>Objects are retained in memory while they are reachable.</li>
<li>Being referenced is not the same as being reachable (from a root): a pack of interlinked objects can become unreachable as a whole.</li>
</ul>
<p>Modern engines implement advanced algorithms of garbage collection.</p>
<p>A general book &ldquo;The Garbage Collection Handbook: The Art of Automatic Memory Management&rdquo; (R. Jones et al) covers some of them.</p>
<p>If you are familiar with low-level programming, the more detailed information about V8 garbage collector is in the article <a href="http://jayconrod.com/posts/55/a-tour-of-v8-garbage-collection">A tour of V8: Garbage Collection</a>.</p>
<p><a href="https://v8.dev/">V8 blog</a> also publishes articles about changes in memory management from time to time. Naturally, to learn the garbage collection, you&rsquo;d better prepare by learning about V8 internals in general and read the blog of <a href="http://mrale.ph">Vyacheslav Egorov</a> who worked as one of V8 engineers. I&rsquo;m saying: &ldquo;V8&rdquo;, because it is best covered with articles in the internet. For other engines, many approaches are similar, but garbage collection differs in many aspects.</p>
<p>In-depth knowledge of engines is good when you need low-level optimizations. It would be wise to plan that as the next step after you&rsquo;re familiar with the language.</p>
<h2 id="object-methods-this">Object methods, &ldquo;this&rdquo;</h2>
<p>Objects are usually created to represent entities of the real world, like users, orders and so on:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};
</code></pre></div><p>And, in the real world, a user can <em>act</em>: select something from the shopping cart, login, logout etc.</p>
<p>Actions are represented in JavaScript by functions in properties.</p>
<h3 id="method-examples">Method examples</h3>
<p>For a start, let&rsquo;s teach the <code>user</code> to say hello:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>
};


user.sayHi <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
  alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>);
};


user.sayHi(); <span style="color:#6272a4">// Hello!
</span></code></pre></div><p>Here we&rsquo;ve just used a Function Expression to create the function and assign it to the property <code>user.sayHi</code> of the object.</p>
<p>Then we can call it. The user can now speak!</p>
<p>A function that is the property of an object is called its <em>method</em>.</p>
<p>So, here we&rsquo;ve got a method <code>sayHi</code> of the object <code>user</code>.</p>
<p>Of course, we could use a pre-declared function as a method, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  <span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span>};


<span style="color:#6272a4">// first, declare
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  alert(<span style="color:#f1fa8c">&#34;Hello!&#34;</span>);
};

<span style="color:#6272a4">// then add as a method
</span><span style="color:#6272a4"></span>user.sayHi <span style="color:#ff79c6">=</span> sayHi;


user.sayHi(); <span style="color:#6272a4">// Hello!
</span></code></pre></div><p>When we write our code using objects to represent entities, that&rsquo;s called <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented programming</a>, in short: &ldquo;OOP&rdquo;.</p>
<p>OOP is a big thing, an interesting science of its own. How to choose the right entities? How to organize the interaction between them? That&rsquo;s architecture, and there are great books on that topic, like &ldquo;Design Patterns: Elements of Reusable Object-Oriented Software&rdquo; by E. Gamma, R. Helm, R. Johnson, J. Vissides or &ldquo;Object-Oriented Analysis and Design with Applications&rdquo; by G. Booch, and more.</p>
<h4 id="method-shorthand">Method shorthand</h4>
<p>There exists a shorter syntax for methods in an object literal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// these objects do the same
</span><span style="color:#6272a4"></span>
user <span style="color:#ff79c6">=</span> {
  sayHi<span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
    alert(<span style="color:#f1fa8c">&#34;Hello&#34;</span>);
  }
};

<span style="color:#6272a4">// method shorthand looks better, right?
</span><span style="color:#6272a4"></span>user <span style="color:#ff79c6">=</span> {

  sayHi() { <span style="color:#6272a4">// same as &#34;sayHi: function()&#34;
</span><span style="color:#6272a4"></span>
    alert(<span style="color:#f1fa8c">&#34;Hello&#34;</span>);
  }
};
</code></pre></div><p>As demonstrated, we can omit <code>&quot;function&quot;</code> and just write <code>sayHi()</code>.</p>
<p>To tell the truth, the notations are not fully identical. There are subtle differences related to object inheritance (to be covered later), but for now they do not matter. In almost all cases the shorter syntax is preferred.</p>
<h3 id="this-in-methods">&ldquo;this&rdquo; in methods</h3>
<p>It&rsquo;s common that an object method needs to access the information stored in the object to do its job.</p>
<p>For instance, the code inside <code>user.sayHi()</code> may need the name of the <code>user</code>.</p>
<p><strong>To access the object, a method can use the <code>this</code> keyword.</strong></p>
<p>The value of <code>this</code> is the object &ldquo;before dot&rdquo;, the one used to call the method.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,

  sayHi() {

    <span style="color:#6272a4">// &#34;this&#34; is the &#34;current object&#34;
</span><span style="color:#6272a4"></span>    alert(<span style="color:#ff79c6">this</span>.name);

  }

};

user.sayHi(); <span style="color:#6272a4">// John
</span></code></pre></div><p>Here during the execution of <code>user.sayHi()</code>, the value of <code>this</code> will be <code>user</code>.</p>
<p>Technically, it&rsquo;s also possible to access the object without <code>this</code>, by referencing it via the outer variable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,

  sayHi() {

    alert(user.name); <span style="color:#6272a4">// &#34;user&#34; instead of &#34;this&#34;
</span><span style="color:#6272a4"></span>
  }

};
</code></pre></div><p>&hellip;But such code is unreliable. If we decide to copy <code>user</code> to another variable, e.g. <code>admin = user</code> and overwrite <code>user</code> with something else, then it will access the wrong object.</p>
<p>That&rsquo;s demonstrated below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,

  sayHi() {

    alert( user.name ); <span style="color:#6272a4">// leads to an error
</span><span style="color:#6272a4"></span>
  }

};


<span style="color:#8be9fd;font-style:italic">let</span> admin <span style="color:#ff79c6">=</span> user;
user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>; <span style="color:#6272a4">// overwrite to make things obvious
</span><span style="color:#6272a4"></span>
admin.sayHi(); <span style="color:#6272a4">// Whoops! inside sayHi(), the old name is used! error!
</span></code></pre></div><p>If we used <code>this.name</code> instead of <code>user.name</code> inside the <code>alert</code>, then the code would work.</p>
<h3 id="this-is-not-bound">&ldquo;this&rdquo; is not bound</h3>
<p>In JavaScript, keyword <code>this</code> behaves unlike most other programming languages. It can be used in any function.</p>
<p>There&rsquo;s no syntax error in the following example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  alert( <span style="color:#ff79c6">this</span>.name );
}
</code></pre></div><p>The value of <code>this</code> is evaluated during the run-time, depending on the context.</p>
<p>For instance, here the same function is assigned to two different objects and has different &ldquo;this&rdquo; in the calls:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span> };
<span style="color:#8be9fd;font-style:italic">let</span> admin <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Admin&#34;</span> };

<span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  alert( <span style="color:#ff79c6">this</span>.name );
}


<span style="color:#6272a4">// use the same function in two objects
</span><span style="color:#6272a4"></span>user.f <span style="color:#ff79c6">=</span> sayHi;
admin.f <span style="color:#ff79c6">=</span> sayHi;


<span style="color:#6272a4">// these calls have different this
</span><span style="color:#6272a4">// &#34;this&#34; inside the function is the object &#34;before the dot&#34;
</span><span style="color:#6272a4"></span>user.f(); <span style="color:#6272a4">// John  (this == user)
</span><span style="color:#6272a4"></span>admin.f(); <span style="color:#6272a4">// Admin  (this == admin)
</span><span style="color:#6272a4"></span>
admin[<span style="color:#f1fa8c">&#39;f&#39;</span>](); <span style="color:#6272a4">// Admin (dot or square brackets access the method – doesn&#39;t matter)
</span></code></pre></div><p>The rule is simple: if <code>obj.f()</code> is called, then <code>this</code> is <code>obj</code> during the call of <code>f</code>. So it&rsquo;s either <code>user</code> or <code>admin</code> in the example above.</p>
<p>We can even call the function without an object at all:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> sayHi() {
  alert(<span style="color:#ff79c6">this</span>);
}

sayHi(); <span style="color:#6272a4">// undefined
</span></code></pre></div><p>In this case <code>this</code> is <code>undefined</code> in strict mode. If we try to access <code>this.name</code>, there will be an error.</p>
<p>In non-strict mode the value of <code>this</code> in such case will be the <em>global object</em> (<code>window</code> in a browser, we&rsquo;ll get to it later in the chapter <a href="info:global-object"></a>). This is a historical behavior that <code>&quot;use strict&quot;</code> fixes.</p>
<p>Usually such call is a programming error. If there&rsquo;s <code>this</code> inside a function, it expects to be called in an object context.</p>
<p>If you come from another programming language, then you are probably used to the idea of a &ldquo;bound <code>this</code>&rdquo;, where methods defined in an object always have <code>this</code> referencing that object.</p>
<p>In JavaScript <code>this</code> is &ldquo;free&rdquo;, its value is evaluated at call-time and does not depend on where the method was declared, but rather on what object is &ldquo;before the dot&rdquo;.</p>
<p>The concept of run-time evaluated <code>this</code> has both pluses and minuses. On the one hand, a function can be reused for different objects. On the other hand, the greater flexibility creates more possibilities for mistakes.</p>
<p>Here our position is not to judge whether this language design decision is good or bad. We&rsquo;ll understand how to work with it, how to get benefits and avoid problems.</p>
<h3 id="arrow-functions-have-no-this">Arrow functions have no &ldquo;this&rdquo;</h3>
<p>Arrow functions are special: they don&rsquo;t have their &ldquo;own&rdquo; <code>this</code>. If we reference <code>this</code> from such a function, it&rsquo;s taken from the outer &ldquo;normal&rdquo; function.</p>
<p>For instance, here <code>arrow()</code> uses <code>this</code> from the outer <code>user.sayHi()</code> method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  firstName<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Ilya&#34;</span>,
  sayHi() {
    <span style="color:#8be9fd;font-style:italic">let</span> arrow <span style="color:#ff79c6">=</span> () =&gt; alert(<span style="color:#ff79c6">this</span>.firstName);
    arrow();
  }
};

user.sayHi(); <span style="color:#6272a4">// Ilya
</span></code></pre></div><p>That&rsquo;s a special feature of arrow functions, it&rsquo;s useful when we actually do not want to have a separate <code>this</code>, but rather to take it from the outer context. Later in the chapter <a href="info:arrow-functions">info:arrow-functions</a> we&rsquo;ll go more deeply into arrow functions.</p>
<h3 id="summary-13">Summary</h3>
<ul>
<li>Functions that are stored in object properties are called &ldquo;methods&rdquo;.</li>
<li>Methods allow objects to &ldquo;act&rdquo; like <code>object.doSomething()</code>.</li>
<li>Methods can reference the object as <code>this</code>.</li>
</ul>
<p>The value of <code>this</code> is defined at run-time.</p>
<ul>
<li>When a function is declared, it may use <code>this</code>, but that <code>this</code> has no value until the function is called.</li>
<li>A function can be copied between objects.</li>
<li>When a function is called in the &ldquo;method&rdquo; syntax: <code>object.method()</code>, the value of <code>this</code> during the call is <code>object</code>.</li>
</ul>
<p>Please note that arrow functions are special: they have no <code>this</code>. When <code>this</code> is accessed inside an arrow function, it is taken from outside.</p>
<h2 id="constructor-operator-new">Constructor, operator &ldquo;new&rdquo;</h2>
<p>The regular <code>{...}</code> syntax allows to create one object. But often we need to create many similar objects, like multiple users or menu items and so on.</p>
<p>That can be done using constructor functions and the <code>&quot;new&quot;</code> operator.</p>
<h3 id="constructor-function">Constructor function</h3>
<p>Constructor functions technically are regular functions. There are two conventions though:</p>
<ol>
<li>They are named with capital letter first.</li>
<li>They should be executed only with <code>&quot;new&quot;</code> operator.</li>
</ol>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> User(name) {
  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> name;
  <span style="color:#ff79c6">this</span>.isAdmin <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">false</span>;
}


<span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> User(<span style="color:#f1fa8c">&#34;Jack&#34;</span>);


alert(user.name); <span style="color:#6272a4">// Jack
</span><span style="color:#6272a4"></span>alert(user.isAdmin); <span style="color:#6272a4">// false
</span></code></pre></div><p>When a function is executed with <code>new</code>, it does the following steps:</p>
<ol>
<li>A new empty object is created and assigned to <code>this</code>.</li>
<li>The function body executes. Usually it modifies <code>this</code>, adds new properties to it.</li>
<li>The value of <code>this</code> is returned.</li>
</ol>
<p>In other words, <code>new User(...)</code> does something like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> User(name) {

  <span style="color:#6272a4">// this = {};  (implicitly)
</span><span style="color:#6272a4"></span>

  <span style="color:#6272a4">// add properties to this
</span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> name;
  <span style="color:#ff79c6">this</span>.isAdmin <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">false</span>;


  <span style="color:#6272a4">// return this;  (implicitly)
</span><span style="color:#6272a4"></span>
}
</code></pre></div><p>So <code>let user = new User(&quot;Jack&quot;)</code> gives the same result as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Jack&#34;</span>,
  isAdmin<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>
};
</code></pre></div><p>Now if we want to create other users, we can call <code>new User(&quot;Ann&quot;)</code>, <code>new User(&quot;Alice&quot;)</code> and so on. Much shorter than using literals every time, and also easy to read.</p>
<p>That&rsquo;s the main purpose of constructors &ndash; to implement reusable object creation code.</p>
<p>Let&rsquo;s note once again &ndash; technically, any function can be used as a constructor. That is: any function can be run with <code>new</code>, and it will execute the algorithm above. The &ldquo;capital letter first&rdquo; is a common agreement, to make it clear that a function is to be run with <code>new</code>.</p>
<p>If we have many lines of code all about creation of a single complex object, we can wrap them in constructor function, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;John&#34;</span>;
  <span style="color:#ff79c6">this</span>.isAdmin <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">false</span>;

  <span style="color:#6272a4">// ...other code for user creation
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// maybe complex logic and statements
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// local variables etc
</span><span style="color:#6272a4"></span>};
</code></pre></div><p>The constructor can&rsquo;t be called again, because it is not saved anywhere, just created and called. So this trick aims to encapsulate the code that constructs the single object, without future reuse.</p>
<h3 id="constructor-mode-test-newtarget">Constructor mode test: new.target</h3>
<p>The syntax from this section is rarely used, skip it unless you want to know everything.</p>
<p>Inside a function, we can check whether it was called with <code>new</code> or without it, using a special <code>new.target</code> property.</p>
<p>It is empty for regular calls and equals the function if called with <code>new</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> User() {
  alert(<span style="color:#ff79c6">new</span>.target);
}

<span style="color:#6272a4">// without &#34;new&#34;:
</span><span style="color:#6272a4"></span>
User(); <span style="color:#6272a4">// undefined
</span><span style="color:#6272a4"></span>

<span style="color:#6272a4">// with &#34;new&#34;:
</span><span style="color:#6272a4"></span>
<span style="color:#ff79c6">new</span> User(); <span style="color:#6272a4">// function User { ... }
</span><span style="color:#6272a4"></span>
</code></pre></div><p>That can be used inside the function to know whether it was called with <code>new</code>, &ldquo;in constructor mode&rdquo;, or without it, &ldquo;in regular mode&rdquo;.</p>
<p>We can also make both <code>new</code> and regular calls to do the same, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> User(name) {
  <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">!</span><span style="color:#ff79c6">new</span>.target) { <span style="color:#6272a4">// if you run me without new
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> User(name); <span style="color:#6272a4">// ...I will add new for you
</span><span style="color:#6272a4"></span>  }

  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> name;
}

<span style="color:#8be9fd;font-style:italic">let</span> john <span style="color:#ff79c6">=</span> User(<span style="color:#f1fa8c">&#34;John&#34;</span>); <span style="color:#6272a4">// redirects call to new User
</span><span style="color:#6272a4"></span>alert(john.name); <span style="color:#6272a4">// John
</span></code></pre></div><p>This approach is sometimes used in libraries to make the syntax more flexible. So that people may call the function with or without <code>new</code>, and it still works.</p>
<p>Probably not a good thing to use everywhere though, because omitting <code>new</code> makes it a bit less obvious what&rsquo;s going on. With <code>new</code> we all know that the new object is being created.</p>
<h3 id="return-from-constructors">Return from constructors</h3>
<p>Usually, constructors do not have a <code>return</code> statement. Their task is to write all necessary stuff into <code>this</code>, and it automatically becomes the result.</p>
<p>But if there is a <code>return</code> statement, then the rule is simple:</p>
<ul>
<li>If <code>return</code> is called with an object, then the object is returned instead of <code>this</code>.</li>
<li>If <code>return</code> is called with a primitive, it&rsquo;s ignored.</li>
</ul>
<p>In other words, <code>return</code> with an object returns that object, in all other cases <code>this</code> is returned.</p>
<p>For instance, here <code>return</code> overrides <code>this</code> by returning an object:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> BigUser() {

  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;John&#34;</span>;

  <span style="color:#ff79c6">return</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Godzilla&#34;</span> };  <span style="color:#6272a4">// &lt;-- returns this object
</span><span style="color:#6272a4"></span>}

alert( <span style="color:#ff79c6">new</span> BigUser().name );  <span style="color:#6272a4">// Godzilla, got that object
</span></code></pre></div><p>And here&rsquo;s an example with an empty <code>return</code> (or we could place a primitive after it, doesn&rsquo;t matter):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> SmallUser() {

  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;John&#34;</span>;

  <span style="color:#ff79c6">return</span>; <span style="color:#6272a4">// &lt;-- returns this
</span><span style="color:#6272a4"></span>}

alert( <span style="color:#ff79c6">new</span> SmallUser().name );  <span style="color:#6272a4">// John
</span></code></pre></div><p>Usually constructors don&rsquo;t have a <code>return</code> statement. Here we mention the special behavior with returning objects mainly for the sake of completeness.</p>
<p>By the way, we can omit parentheses after <code>new</code>, if it has no arguments:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> User; <span style="color:#6272a4">// &lt;-- no parentheses
</span><span style="color:#6272a4">// same as
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> User();
</code></pre></div><p>Omitting parentheses here is not considered a &ldquo;good style&rdquo;, but the syntax is permitted by specification.</p>
<h3 id="methods-in-constructor">Methods in constructor</h3>
<p>Using constructor functions to create objects gives a great deal of flexibility. The constructor function may have parameters that define how to construct the object, and what to put in it.</p>
<p>Of course, we can add to <code>this</code> not only properties, but methods as well.</p>
<p>For instance, <code>new User(name)</code> below creates an object with the given <code>name</code> and the method <code>sayHi</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">function</span> User(name) {
  <span style="color:#ff79c6">this</span>.name <span style="color:#ff79c6">=</span> name;

  <span style="color:#ff79c6">this</span>.sayHi <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>() {
    alert( <span style="color:#f1fa8c">&#34;My name is: &#34;</span> <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">this</span>.name );
  };
}


<span style="color:#8be9fd;font-style:italic">let</span> john <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> User(<span style="color:#f1fa8c">&#34;John&#34;</span>);

john.sayHi(); <span style="color:#6272a4">// My name is: John
</span><span style="color:#6272a4"></span>

<span style="color:#6272a4">/*
</span><span style="color:#6272a4">john = {
</span><span style="color:#6272a4">   name: &#34;John&#34;,
</span><span style="color:#6272a4">   sayHi: function() { ... }
</span><span style="color:#6272a4">}
</span><span style="color:#6272a4">*/</span>
</code></pre></div><p>To create complex objects, there&rsquo;s a more advanced syntax, <a href="info:classes">classes</a>, that we&rsquo;ll cover later.</p>
<h3 id="summary-14">Summary</h3>
<ul>
<li>Constructor functions or, briefly, constructors, are regular functions, but there&rsquo;s a common agreement to name them with capital letter first.</li>
<li>Constructor functions should only be called using <code>new</code>. Such a call implies a creation of empty <code>this</code> at the start and returning the populated one at the end.</li>
</ul>
<p>We can use constructor functions to make multiple similar objects.</p>
<p>JavaScript provides constructor functions for many built-in language objects: like <code>Date</code> for dates, <code>Set</code> for sets and others that we plan to study.</p>
<p>In this chapter we only cover the basics about objects and constructors. They are essential for learning more about data types and functions in the next chapters.</p>
<p>After we learn that, we return to objects and cover them in-depth in the chapters <a href="info:prototypes">info:prototypes</a> and <a href="info:classes">info:classes</a>.</p>
<h2 id="optional-chaining-">Optional chaining &lsquo;?.&rsquo;</h2>
<p>[recent browser=&ldquo;new&rdquo;]</p>
<p>The optional chaining <code>?.</code> is an error-proof way to access nested object properties, even if an intermediate property doesn&rsquo;t exist.</p>
<h3 id="the-problem">The problem</h3>
<p>If you&rsquo;ve just started to read the tutorial and learn JavaScript, maybe the problem hasn&rsquo;t touched you yet, but it&rsquo;s quite common.</p>
<p>For example, some of our users have addresses, but few did not provide them. Then we can&rsquo;t safely read <code>user.address.street</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {}; <span style="color:#6272a4">// the user happens to be without address
</span><span style="color:#6272a4"></span>
alert(user.address.street); <span style="color:#6272a4">// Error!
</span></code></pre></div><p>Or, in the web development, we&rsquo;d like to get an information about an element on the page, but it may not exist:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// Error if the result of querySelector(...) is null
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> html <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">document</span>.querySelector(<span style="color:#f1fa8c">&#39;.my-element&#39;</span>).innerHTML;
</code></pre></div><p>Before <code>?.</code> appeared in the language, the <code>&amp;&amp;</code> operator was used to work around that.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {}; <span style="color:#6272a4">// user has no address
</span><span style="color:#6272a4"></span>
alert( user <span style="color:#ff79c6">&amp;&amp;</span> user.address <span style="color:#ff79c6">&amp;&amp;</span> user.address.street ); <span style="color:#6272a4">// undefined (no error)
</span></code></pre></div><p>AND&rsquo;ing the whole path to the property ensures that all components exist, but is cumbersome to write.</p>
<h3 id="optional-chaining">Optional chaining</h3>
<p>The optional chaining <code>?.</code> stops the evaluation and returns <code>undefined</code> if the part before <code>?.</code> is <code>undefined</code> or <code>null</code>.</p>
<p><strong>Further in this article, for brevity, we&rsquo;ll be saying that something &ldquo;exists&rdquo; if it&rsquo;s not <code>null</code> and not <code>undefined</code>.</strong></p>
<p>Here&rsquo;s the safe way to access <code>user.address.street</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {}; <span style="color:#6272a4">// user has no address
</span><span style="color:#6272a4"></span>
alert( user<span style="color:#ff79c6">?</span>.address<span style="color:#ff79c6">?</span>.street ); <span style="color:#6272a4">// undefined (no error)
</span></code></pre></div><p>Reading the address with <code>user?.address</code> works even if <code>user</code> object doesn&rsquo;t exist:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;

alert( user<span style="color:#ff79c6">?</span>.address ); <span style="color:#6272a4">// undefined
</span><span style="color:#6272a4"></span>alert( user<span style="color:#ff79c6">?</span>.address.street ); <span style="color:#6272a4">// undefined
</span></code></pre></div><p>Please note: the <code>?.</code> syntax makes optional the value before it, but not any further.</p>
<p>In the example above, <code>user?.</code> allows only <code>user</code> to be <code>null/undefined</code>.</p>
<p>On the other hand, if <code>user</code> does exist, then it must have <code>user.address</code> property, otherwise <code>user?.address.street</code> gives an error at the second dot.</p>
<p>We should use <code>?.</code> only where it&rsquo;s ok that something doesn&rsquo;t exist.</p>
<p>For example, if according to our coding logic <code>user</code> object must be there, but <code>address</code> is optional, then <code>user.address?.street</code> would be better.</p>
<p>So, if <code>user</code> happens to be undefined due to a mistake, we&rsquo;ll know about it and fix it. Otherwise, coding errors can be silenced where not appropriate, and become more difficult to debug.</p>
<p>If there&rsquo;s no variable <code>user</code> at all, then <code>user?.anything</code> triggers an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// ReferenceError: user is not defined
</span><span style="color:#6272a4"></span>user<span style="color:#ff79c6">?</span>.address;
</code></pre></div><p>There must be <code>let/const/var user</code>. The optional chaining works only for declared variables.</p>
<h3 id="short-circuiting">Short-circuiting</h3>
<p>As it was said before, the <code>?.</code> immediately stops (&ldquo;short-circuits&rdquo;) the evaluation if the left part doesn&rsquo;t exist.</p>
<p>So, if there are any further function calls or side effects, they don&rsquo;t occur:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
<span style="color:#8be9fd;font-style:italic">let</span> x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;

user<span style="color:#ff79c6">?</span>.sayHi(x<span style="color:#ff79c6">++</span>); <span style="color:#6272a4">// nothing happens
</span><span style="color:#6272a4"></span>
alert(x); <span style="color:#6272a4">// 0, value not incremented
</span></code></pre></div><h3 id="other-cases--">Other cases: ?.(), ?.[]</h3>
<p>The optional chaining <code>?.</code> is not an operator, but a special syntax construct, that also works with functions and square brackets.</p>
<p>For example, <code>?.()</code> is used to call a function that may not exist.</p>
<p>In the code below, some of our users have <code>admin</code> method, and some don&rsquo;t:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user1 <span style="color:#ff79c6">=</span> {
  admin() {
    alert(<span style="color:#f1fa8c">&#34;I am admin&#34;</span>);
  }
}

<span style="color:#8be9fd;font-style:italic">let</span> user2 <span style="color:#ff79c6">=</span> {};


user1.admin<span style="color:#ff79c6">?</span>.(); <span style="color:#6272a4">// I am admin
</span><span style="color:#6272a4"></span>user2.admin<span style="color:#ff79c6">?</span>.();

</code></pre></div><p>Here, in both lines we first use the dot <code>.</code> to get <code>admin</code> property, because the user object must exist, so it&rsquo;s safe read from it.</p>
<p>Then <code>?.()</code> checks the left part: if the admin function exists, then it runs (for <code>user1</code>). Otherwise (for <code>user2</code>) the evaluation stops without errors.</p>
<p>The <code>?.[]</code> syntax also works, if we&rsquo;d like to use brackets <code>[]</code> to access properties instead of dot <code>.</code>. Similar to previous cases, it allows to safely read a property from an object that may not exist.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user1 <span style="color:#ff79c6">=</span> {
  firstName<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
};

<span style="color:#8be9fd;font-style:italic">let</span> user2 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>; <span style="color:#6272a4">// Imagine, we couldn&#39;t authorize the user
</span><span style="color:#6272a4"></span>
<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;firstName&#34;</span>;

alert( user1<span style="color:#ff79c6">?</span>.[key] ); <span style="color:#6272a4">// John
</span><span style="color:#6272a4"></span>alert( user2<span style="color:#ff79c6">?</span>.[key] ); <span style="color:#6272a4">// undefined
</span><span style="color:#6272a4"></span>
alert( user1<span style="color:#ff79c6">?</span>.[key]<span style="color:#ff79c6">?</span>.something<span style="color:#ff79c6">?</span>.not<span style="color:#ff79c6">?</span>.existing); <span style="color:#6272a4">// undefined
</span></code></pre></div><p>Also we can use <code>?.</code> with <code>delete</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">delete</span> user<span style="color:#ff79c6">?</span>.name; <span style="color:#6272a4">// delete user.name if user exists
</span></code></pre></div><p>The optional chaining <code>?.</code> has no use at the left side of an assignment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// the idea of the code below is to write user.name, if user exists
</span><span style="color:#6272a4"></span>
user<span style="color:#ff79c6">?</span>.name <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;John&#34;</span>; <span style="color:#6272a4">// Error, doesn&#39;t work
</span><span style="color:#6272a4">// because it evaluates to undefined = &#34;John&#34;
</span></code></pre></div><h3 id="summary-15">Summary</h3>
<p>The <code>?.</code> syntax has three forms:</p>
<ol>
<li><code>obj?.prop</code> &ndash; returns <code>obj.prop</code> if <code>obj</code> exists, otherwise <code>undefined</code>.</li>
<li><code>obj?.[prop]</code> &ndash; returns <code>obj[prop]</code> if <code>obj</code> exists, otherwise <code>undefined</code>.</li>
<li><code>obj?.method()</code> &ndash; calls <code>obj.method()</code> if <code>obj</code> exists, otherwise returns <code>undefined</code>.</li>
</ol>
<p>As we can see, all of them are straightforward and simple to use. The <code>?.</code> checks the left part for <code>null/undefined</code> and allows the evaluation to proceed if it&rsquo;s not so.</p>
<p>A chain of <code>?.</code> allows to safely access nested properties.</p>
<p>Still, we should apply <code>?.</code> carefully, only where it&rsquo;s ok that the left part doesn&rsquo;t to exist.</p>
<p>So that it won&rsquo;t hide programming errors from us, if they occur.</p>
<h2 id="symbol-type">Symbol type</h2>
<p>By specification, object property keys may be either of string type, or of symbol type. Not numbers, not booleans, only strings or symbols, these two types.</p>
<p>Till now we&rsquo;ve been using only strings. Now let&rsquo;s see the benefits that symbols can give us.</p>
<h3 id="symbols">Symbols</h3>
<p>A &ldquo;symbol&rdquo; represents a unique identifier.</p>
<p>A value of this type can be created using <code>Symbol()</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// id is a new symbol
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol();
</code></pre></div><p>Upon creation, we can give symbol a description (also called a symbol name), mostly useful for debugging purposes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// id is a symbol with the description &#34;id&#34;
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);
</code></pre></div><p>Symbols are guaranteed to be unique. Even if we create many symbols with the same description, they are different values. The description is just a label that doesn&rsquo;t affect anything.</p>
<p>For instance, here are two symbols with the same description &ndash; they are not equal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id1 <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> id2 <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);


alert(id1 <span style="color:#ff79c6">==</span> id2); <span style="color:#6272a4">// false
</span><span style="color:#6272a4"></span>
</code></pre></div><p>If you are familiar with Ruby or another language that also has some sort of &ldquo;symbols&rdquo; &ndash; please don&rsquo;t be misguided. JavaScript symbols are different.</p>
<p>Most values in JavaScript support implicit conversion to a string. For instance, we can <code>alert</code> almost any value, and it will work. Symbols are special. They don&rsquo;t auto-convert.</p>
<p>For instance, this <code>alert</code> will show an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);

alert(id); <span style="color:#6272a4">// TypeError: Cannot convert a Symbol value to a string
</span><span style="color:#6272a4"></span>
</code></pre></div><p>That&rsquo;s a &ldquo;language guard&rdquo; against messing up, because strings and symbols are fundamentally different and should not accidentally convert one into another.</p>
<p>If we really want to show a symbol, we need to explicitly call <code>.toString()</code> on it, like here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);

alert(id.toString()); <span style="color:#6272a4">// Symbol(id), now it works
</span><span style="color:#6272a4"></span>
</code></pre></div><p>Or get <code>symbol.description</code> property to show the description only:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);

alert(id.description); <span style="color:#6272a4">// id
</span><span style="color:#6272a4"></span>
</code></pre></div><h3 id="hidden-properties">&ldquo;Hidden&rdquo; properties</h3>
<p>Symbols allow us to create &ldquo;hidden&rdquo; properties of an object, that no other part of code can accidentally access or overwrite.</p>
<p>For instance, if we&rsquo;re working with <code>user</code> objects, that belong to a third-party code. We&rsquo;d like to add identifiers to them.</p>
<p>Let&rsquo;s use a symbol key for it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { <span style="color:#6272a4">// belongs to another code
</span><span style="color:#6272a4"></span>  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>
};

<span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);

user[id] <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;

alert( user[id] ); <span style="color:#6272a4">// we can access the data using the symbol as the key
</span></code></pre></div><p>What&rsquo;s the benefit of using <code>Symbol(&quot;id&quot;)</code> over a string <code>&quot;id&quot;</code>?</p>
<p>As <code>user</code> objects belongs to another code, and that code also works with them, we shouldn&rsquo;t just add any fields to it. That&rsquo;s unsafe. But a symbol cannot be accessed accidentally, the third-party code probably won&rsquo;t even see it, so it&rsquo;s probably all right to do.</p>
<p>Also, imagine that another script wants to have its own identifier inside <code>user</code>, for its own purposes. That may be another JavaScript library, so that the scripts are completely unaware of each other.</p>
<p>Then that script can create its own <code>Symbol(&quot;id&quot;)</code>, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// ...
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);

user[id] <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Their id value&#34;</span>;
</code></pre></div><p>There will be no conflict between our and their identifiers, because symbols are always different, even if they have the same name.</p>
<p>&hellip;But if we used a string <code>&quot;id&quot;</code> instead of a symbol for the same purpose, then there <em>would</em> be a conflict:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span> };

<span style="color:#6272a4">// Our script uses &#34;id&#34; property
</span><span style="color:#6272a4"></span>user.id <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Our id value&#34;</span>;

<span style="color:#6272a4">// ...Another script also wants &#34;id&#34; for its purposes...
</span><span style="color:#6272a4"></span>
user.id <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Their id value&#34;</span>
<span style="color:#6272a4">// Boom! overwritten by another script!
</span></code></pre></div><h4 id="symbols-in-a-literal">Symbols in a literal</h4>
<p>If we want to use a symbol in an object literal <code>{...}</code>, we need square brackets around it.</p>
<p>Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);

<span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,

  [id]<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">123</span> <span style="color:#6272a4">// not &#34;id&#34;: 123
</span><span style="color:#6272a4"></span>
};
</code></pre></div><p>That&rsquo;s because we need the value from the variable <code>id</code> as the key, not the string &ldquo;id&rdquo;.</p>
<h4 id="symbols-are-skipped-by-forin">Symbols are skipped by for..in</h4>
<p>Symbolic properties do not participate in <code>for..in</code> loop.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  age<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>,
  [id]<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">123</span>
};


<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">let</span> key <span style="color:#ff79c6">in</span> user) alert(key); <span style="color:#6272a4">// name, age (no symbols)
</span><span style="color:#6272a4"></span>

<span style="color:#6272a4">// the direct access by the symbol works
</span><span style="color:#6272a4"></span>alert( <span style="color:#f1fa8c">&#34;Direct: &#34;</span> <span style="color:#ff79c6">+</span> user[id] );
</code></pre></div><p><code>Object.keys(user)</code> also ignores them. That&rsquo;s a part of the general &ldquo;hiding symbolic properties&rdquo; principle. If another script or a library loops over our object, it won&rsquo;t unexpectedly access a symbolic property.</p>
<p>In contrast, <a href="mdn:js/Object/assign">Object.assign</a> copies both string and symbol properties:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;id&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  [id]<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">123</span>
};

<span style="color:#8be9fd;font-style:italic">let</span> clone <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Object</span>.assign({}, user);

alert( clone[id] ); <span style="color:#6272a4">// 123
</span></code></pre></div><p>There&rsquo;s no paradox here. That&rsquo;s by design. The idea is that when we clone an object or merge objects, we usually want <em>all</em> properties to be copied (including symbols like <code>id</code>).</p>
<h3 id="global-symbols">Global symbols</h3>
<p>As we&rsquo;ve seen, usually all symbols are different, even if they have the same name. But sometimes we want same-named symbols to be same entities. For instance, different parts of our application want to access symbol <code>&quot;id&quot;</code> meaning exactly the same property.</p>
<p>To achieve that, there exists a <em>global symbol registry</em>. We can create symbols in it and access them later, and it guarantees that repeated accesses by the same name return exactly the same symbol.</p>
<p>In order to read (create if absent) a symbol from the registry, use <code>Symbol.for(key)</code>.</p>
<p>That call checks the global registry, and if there&rsquo;s a symbol described as <code>key</code>, then returns it, otherwise creates a new symbol <code>Symbol(key)</code> and stores it in the registry by the given <code>key</code>.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// read from the global registry
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> id <span style="color:#ff79c6">=</span> Symbol.<span style="color:#ff79c6">for</span>(<span style="color:#f1fa8c">&#34;id&#34;</span>); <span style="color:#6272a4">// if the symbol did not exist, it is created
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">// read it again (maybe from another part of the code)
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> idAgain <span style="color:#ff79c6">=</span> Symbol.<span style="color:#ff79c6">for</span>(<span style="color:#f1fa8c">&#34;id&#34;</span>);

<span style="color:#6272a4">// the same symbol
</span><span style="color:#6272a4"></span>alert( id <span style="color:#ff79c6">===</span> idAgain ); <span style="color:#6272a4">// true
</span></code></pre></div><p>Symbols inside the registry are called <em>global symbols</em>. If we want an application-wide symbol, accessible everywhere in the code &ndash; that&rsquo;s what they are for.</p>
<p>In some programming languages, like Ruby, there&rsquo;s a single symbol per name.</p>
<p>In JavaScript, as we can see, that&rsquo;s right for global symbols.</p>
<h4 id="symbolkeyfor">Symbol.keyFor</h4>
<p>For global symbols, not only <code>Symbol.for(key)</code> returns a symbol by name, but there&rsquo;s a reverse call: <code>Symbol.keyFor(sym)</code>, that does the reverse: returns a name by a global symbol.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// get symbol by name
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> sym <span style="color:#ff79c6">=</span> Symbol.<span style="color:#ff79c6">for</span>(<span style="color:#f1fa8c">&#34;name&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> sym2 <span style="color:#ff79c6">=</span> Symbol.<span style="color:#ff79c6">for</span>(<span style="color:#f1fa8c">&#34;id&#34;</span>);

<span style="color:#6272a4">// get name by symbol
</span><span style="color:#6272a4"></span>alert( Symbol.keyFor(sym) ); <span style="color:#6272a4">// name
</span><span style="color:#6272a4"></span>alert( Symbol.keyFor(sym2) ); <span style="color:#6272a4">// id
</span></code></pre></div><p>The <code>Symbol.keyFor</code> internally uses the global symbol registry to look up the key for the symbol. So it doesn&rsquo;t work for non-global symbols. If the symbol is not global, it won&rsquo;t be able to find it and returns <code>undefined</code>.</p>
<p>That said, any symbols have <code>description</code> property.</p>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> globalSymbol <span style="color:#ff79c6">=</span> Symbol.<span style="color:#ff79c6">for</span>(<span style="color:#f1fa8c">&#34;name&#34;</span>);
<span style="color:#8be9fd;font-style:italic">let</span> localSymbol <span style="color:#ff79c6">=</span> Symbol(<span style="color:#f1fa8c">&#34;name&#34;</span>);

alert( Symbol.keyFor(globalSymbol) ); <span style="color:#6272a4">// name, global symbol
</span><span style="color:#6272a4"></span>alert( Symbol.keyFor(localSymbol) ); <span style="color:#6272a4">// undefined, not global
</span><span style="color:#6272a4"></span>
alert( localSymbol.description ); <span style="color:#6272a4">// name
</span></code></pre></div><h3 id="system-symbols">System symbols</h3>
<p>There exist many &ldquo;system&rdquo; symbols that JavaScript uses internally, and we can use them to fine-tune various aspects of our objects.</p>
<p>They are listed in the specification in the <a href="https://tc39.github.io/ecma262/#sec-well-known-symbols">Well-known symbols</a> table:</p>
<ul>
<li><code>Symbol.hasInstance</code></li>
<li><code>Symbol.isConcatSpreadable</code></li>
<li><code>Symbol.iterator</code></li>
<li><code>Symbol.toPrimitive</code></li>
<li>&hellip;and so on.</li>
</ul>
<p>For instance, <code>Symbol.toPrimitive</code> allows us to describe object to primitive conversion. We&rsquo;ll see its use very soon.</p>
<p>Other symbols will also become familiar when we study the corresponding language features.</p>
<h3 id="summary-16">Summary</h3>
<p><code>Symbol</code> is a primitive type for unique identifiers.</p>
<p>Symbols are created with <code>Symbol()</code> call with an optional description (name).</p>
<p>Symbols are always different values, even if they have the same name. If we want same-named symbols to be equal, then we should use the global registry: <code>Symbol.for(key)</code> returns (creates if needed) a global symbol with <code>key</code> as the name. Multiple calls of <code>Symbol.for</code> with the same <code>key</code> return exactly the same symbol.</p>
<p>Symbols have two main use cases:</p>
<ol>
<li>
<p>&ldquo;Hidden&rdquo; object properties.
If we want to add a property into an object that &ldquo;belongs&rdquo; to another script or a library, we can create a symbol and use it as a property key. A symbolic property does not appear in <code>for..in</code>, so it won&rsquo;t be accidentally processed together with other properties. Also it won&rsquo;t be accessed directly, because another script does not have our symbol. So the property will be protected from accidental use or overwrite.</p>
<p>So we can &ldquo;covertly&rdquo; hide something into objects that we need, but others should not see, using symbolic properties.</p>
</li>
<li>
<p>There are many system symbols used by JavaScript which are accessible as <code>Symbol.*</code>. We can use them to alter some built-in behaviors. For instance, later in the tutorial we&rsquo;ll use <code>Symbol.iterator</code> for <a href="info:iterable">iterables</a>, <code>Symbol.toPrimitive</code> to setup <a href="info:object-toprimitive">object-to-primitive conversion</a> and so on.</p>
</li>
</ol>
<p>Technically, symbols are not 100% hidden. There is a built-in method <a href="mdn:js/Object/getOwnPropertySymbols">Object.getOwnPropertySymbols(obj)</a> that allows us to get all symbols. Also there is a method named <a href="mdn:js/Reflect/ownKeys">Reflect.ownKeys(obj)</a> that returns <em>all</em> keys of an object including symbolic ones. So they are not really hidden. But most libraries, built-in functions and syntax constructs don&rsquo;t use these methods.</p>
<h2 id="object-to-primitive-conversion">Object to primitive conversion</h2>
<p>What happens when objects are added <code>obj1 + obj2</code>, subtracted <code>obj1 - obj2</code> or printed using <code>alert(obj)</code>?</p>
<p>In that case, objects are auto-converted to primitives, and then the operation is carried out.</p>
<p>In the chapter <a href="info:type-conversions">info:type-conversions</a> we&rsquo;ve seen the rules for numeric, string and boolean conversions of primitives. But we left a gap for objects. Now, as we know about methods and symbols it becomes possible to fill it.</p>
<ol>
<li>All objects are <code>true</code> in a boolean context. There are only numeric and string conversions.</li>
<li>The numeric conversion happens when we subtract objects or apply mathematical functions. For instance, <code>Date</code> objects (to be covered in the chapter <a href="info:date">info:date</a>) can be subtracted, and the result of <code>date1 - date2</code> is the time difference between two dates.</li>
<li>As for the string conversion &ndash; it usually happens when we output an object like <code>alert(obj)</code> and in similar contexts.</li>
</ol>
<h3 id="toprimitive">ToPrimitive</h3>
<p>We can fine-tune string and numeric conversion, using special object methods.</p>
<p>There are three variants of type conversion, so-called &ldquo;hints&rdquo;, described in the <a href="https://tc39.github.io/ecma262/#sec-toprimitive">specification</a>:</p>
<dl>
<dt><code>&quot;string&quot;</code></dt>
<dd>For an object-to-string conversion, when we&rsquo;re doing an operation on an object that expects a string, like <code>alert</code>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// output
</span><span style="color:#6272a4"></span>alert(obj);

<span style="color:#6272a4">// using object as a property key
</span><span style="color:#6272a4"></span>anotherObj[obj] <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">123</span>;
</code></pre></div></dd>
<dt><code>&quot;number&quot;</code></dt>
<dd>For an object-to-number conversion, like when we&rsquo;re doing maths:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// explicit conversion
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> num <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Number</span>(obj);

<span style="color:#6272a4">// maths (except binary plus)
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> n <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">+</span>obj; <span style="color:#6272a4">// unary plus
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> delta <span style="color:#ff79c6">=</span> date1 <span style="color:#ff79c6">-</span> date2;

<span style="color:#6272a4">// less/greater comparison
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> greater <span style="color:#ff79c6">=</span> user1 <span style="color:#ff79c6">&gt;</span> user2;
</code></pre></div></dd>
<dt><code>&quot;default&quot;</code></dt>
<dd>Occurs in rare cases when the operator is &ldquo;not sure&rdquo; what type to expect.
<p>For instance, binary plus <code>+</code> can work both with strings (concatenates them) and numbers (adds them), so both strings and numbers would do. So if a binary plus gets an object as an argument, it uses the <code>&quot;default&quot;</code> hint to convert it.</p>
<p>Also, if an object is compared using <code>==</code> with a string, number or a symbol, it&rsquo;s also unclear which conversion should be done, so the <code>&quot;default&quot;</code> hint is used.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// binary plus uses the &#34;default&#34; hint
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> total <span style="color:#ff79c6">=</span> obj1 <span style="color:#ff79c6">+</span> obj2;

<span style="color:#6272a4">// obj == number uses the &#34;default&#34; hint
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">if</span> (user <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span>) { ... };
</code></pre></div><p>The greater and less comparison operators, such as <code>&lt;</code> <code>&gt;</code>, can work with both strings and numbers too. Still, they use the <code>&quot;number&quot;</code> hint, not <code>&quot;default&quot;</code>. That&rsquo;s for historical reasons.</p>
<p>In practice though, we don&rsquo;t need to remember these peculiar details, because all built-in objects except for one case (<code>Date</code> object, we&rsquo;ll learn it later) implement <code>&quot;default&quot;</code> conversion the same way as <code>&quot;number&quot;</code>. And we can do the same.</p>
</dd>
</dl>
<p>Please note &ndash; there are only three hints. It&rsquo;s that simple.</p>
<p>There is no &ldquo;boolean&rdquo; hint (all objects are <code>true</code> in boolean context) or anything else. And if we treat <code>&quot;default&quot;</code> and <code>&quot;number&quot;</code> the same, like most built-ins do, then there are only two conversions.</p>
<p><strong>To do the conversion, JavaScript tries to find and call three object methods:</strong></p>
<ol>
<li>Call <code>obj[Symbol.toPrimitive](hint)</code> - the method with the symbolic key <code>Symbol.toPrimitive</code> (system symbol), if such method exists,</li>
<li>Otherwise if hint is <code>&quot;string&quot;</code>
<ul>
<li>try <code>obj.toString()</code> and <code>obj.valueOf()</code>, whatever exists.</li>
</ul>
</li>
<li>Otherwise if hint is <code>&quot;number&quot;</code> or <code>&quot;default&quot;</code>
<ul>
<li>try <code>obj.valueOf()</code> and <code>obj.toString()</code>, whatever exists.</li>
</ul>
</li>
</ol>
<h3 id="symboltoprimitive">Symbol.toPrimitive</h3>
<p>Let&rsquo;s start from the first method. There&rsquo;s a built-in symbol named <code>Symbol.toPrimitive</code> that should be used to name the conversion method, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">obj[Symbol.toPrimitive] <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>(hint) {
  <span style="color:#6272a4">// must return a primitive value
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// hint = one of &#34;string&#34;, &#34;number&#34;, &#34;default&#34;
</span><span style="color:#6272a4"></span>};
</code></pre></div><p>For instance, here <code>user</code> object implements it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  money<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1000</span>,

  [Symbol.toPrimitive](hint) {
    alert(<span style="color:#f1fa8c">`hint: </span><span style="color:#f1fa8c">${</span>hint<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>);
    <span style="color:#ff79c6">return</span> hint <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;string&#34;</span> <span style="color:#ff79c6">?</span> <span style="color:#f1fa8c">`{name: &#34;</span><span style="color:#f1fa8c">${</span><span style="color:#ff79c6">this</span>.name<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;}`</span> <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">this</span>.money;
  }
};

<span style="color:#6272a4">// conversions demo:
</span><span style="color:#6272a4"></span>alert(user); <span style="color:#6272a4">// hint: string -&gt; {name: &#34;John&#34;}
</span><span style="color:#6272a4"></span>alert(<span style="color:#ff79c6">+</span>user); <span style="color:#6272a4">// hint: number -&gt; 1000
</span><span style="color:#6272a4"></span>alert(user <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">500</span>); <span style="color:#6272a4">// hint: default -&gt; 1500
</span></code></pre></div><p>As we can see from the code, <code>user</code> becomes a self-descriptive string or a money amount depending on the conversion. The single method <code>user[Symbol.toPrimitive]</code> handles all conversion cases.</p>
<h3 id="tostringvalueof">toString/valueOf</h3>
<p>Methods <code>toString</code> and <code>valueOf</code> come from ancient times. They are not symbols (symbols did not exist that long ago), but rather &ldquo;regular&rdquo; string-named methods. They provide an alternative &ldquo;old-style&rdquo; way to implement the conversion.</p>
<p>If there&rsquo;s no <code>Symbol.toPrimitive</code> then JavaScript tries to find them and try in the order:</p>
<ul>
<li><code>toString -&gt; valueOf</code> for &ldquo;string&rdquo; hint.</li>
<li><code>valueOf -&gt; toString</code> otherwise.</li>
</ul>
<p>These methods must return a primitive value. If <code>toString</code> or <code>valueOf</code> returns an object, then it&rsquo;s ignored (same as if there were no method).</p>
<p>By default, a plain object has following <code>toString</code> and <code>valueOf</code> methods:</p>
<ul>
<li>The <code>toString</code> method returns a string <code>&quot;[object Object]&quot;</code>.</li>
<li>The <code>valueOf</code> method returns the object itself.</li>
</ul>
<p>Here&rsquo;s the demo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>};

alert(user); <span style="color:#6272a4">// [object Object]
</span><span style="color:#6272a4"></span>alert(user.valueOf() <span style="color:#ff79c6">===</span> user); <span style="color:#6272a4">// true
</span></code></pre></div><p>So if we try to use an object as a string, like in an <code>alert</code> or so, then by default we see <code>[object Object]</code>.</p>
<p>And the default <code>valueOf</code> is mentioned here only for the sake of completeness, to avoid any confusion. As you can see, it returns the object itself, and so is ignored. Don&rsquo;t ask me why, that&rsquo;s for historical reasons. So we can assume it doesn&rsquo;t exist.</p>
<p>Let&rsquo;s implement these methods.</p>
<p>For instance, here <code>user</code> does the same as above using a combination of <code>toString</code> and <code>valueOf</code> instead of <code>Symbol.toPrimitive</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,
  money<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1000</span>,

  <span style="color:#6272a4">// for hint=&#34;string&#34;
</span><span style="color:#6272a4"></span>  toString() {
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">`{name: &#34;</span><span style="color:#f1fa8c">${</span><span style="color:#ff79c6">this</span>.name<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;}`</span>;
  },

  <span style="color:#6272a4">// for hint=&#34;number&#34; or &#34;default&#34;
</span><span style="color:#6272a4"></span>  valueOf() {
    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">this</span>.money;
  }

};

alert(user); <span style="color:#6272a4">// toString -&gt; {name: &#34;John&#34;}
</span><span style="color:#6272a4"></span>alert(<span style="color:#ff79c6">+</span>user); <span style="color:#6272a4">// valueOf -&gt; 1000
</span><span style="color:#6272a4"></span>alert(user <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">500</span>); <span style="color:#6272a4">// valueOf -&gt; 1500
</span></code></pre></div><p>As we can see, the behavior is the same as the previous example with <code>Symbol.toPrimitive</code>.</p>
<p>Often we want a single &ldquo;catch-all&rdquo; place to handle all primitive conversions. In this case, we can implement <code>toString</code> only, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> user <span style="color:#ff79c6">=</span> {
  name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;John&#34;</span>,

  toString() {
    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">this</span>.name;
  }
};

alert(user); <span style="color:#6272a4">// toString -&gt; John
</span><span style="color:#6272a4"></span>alert(user <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">500</span>); <span style="color:#6272a4">// toString -&gt; John500
</span></code></pre></div><p>In the absence of <code>Symbol.toPrimitive</code> and <code>valueOf</code>, <code>toString</code> will handle all primitive conversions.</p>
<h3 id="return-types">Return types</h3>
<p>The important thing to know about all primitive-conversion methods is that they do not necessarily return the &ldquo;hinted&rdquo; primitive.</p>
<p>There is no control whether <code>toString</code> returns exactly a string, or whether <code>Symbol.toPrimitive</code> method returns a number for a hint <code>&quot;number&quot;</code>.</p>
<p>The only mandatory thing: these methods must return a primitive, not an object.</p>
<p>For historical reasons, if <code>toString</code> or <code>valueOf</code> returns an object, there&rsquo;s no error, but such value is ignored (like if the method didn&rsquo;t exist). That&rsquo;s because in ancient times there was no good &ldquo;error&rdquo; concept in JavaScript.</p>
<p>In contrast, <code>Symbol.toPrimitive</code> <em>must</em> return a primitive, otherwise there will be an error.</p>
<h3 id="further-conversions">Further conversions</h3>
<p>As we know already, many operators and functions perform type conversions, e.g. multiplication <code>*</code> converts operands to numbers.</p>
<p>If we pass an object as an argument, then there are two stages:</p>
<ol>
<li>The object is converted to a primitive (using the rules described above).</li>
<li>If the resulting primitive isn&rsquo;t of the right type, it&rsquo;s converted.</li>
</ol>
<p>For instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> obj <span style="color:#ff79c6">=</span> {
  <span style="color:#6272a4">// toString handles all conversions in the absence of other methods
</span><span style="color:#6272a4"></span>  toString() {
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;2&#34;</span>;
  }
};

alert(obj <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">2</span>); <span style="color:#6272a4">// 4, object converted to primitive &#34;2&#34;, then multiplication made it a number
</span></code></pre></div><ol>
<li>The multiplication <code>obj * 2</code> first converts the object to primitive (that&rsquo;s a string <code>&quot;2&quot;</code>).</li>
<li>Then <code>&quot;2&quot; * 2</code> becomes <code>2 * 2</code> (the string is converted to number).</li>
</ol>
<p>Binary plus will concatenate strings in the same situation, as it gladly accepts a string:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> obj <span style="color:#ff79c6">=</span> {
  toString() {
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;2&#34;</span>;
  }
};

alert(obj <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span>); <span style="color:#6272a4">// 22 (&#34;2&#34; + 2), conversion to primitive returned a string =&gt; concatenation
</span></code></pre></div><h3 id="summary-17">Summary</h3>
<p>The object-to-primitive conversion is called automatically by many built-in functions and operators that expect a primitive as a value.</p>
<p>There are 3 types (hints) of it:</p>
<ul>
<li><code>&quot;string&quot;</code> (for <code>alert</code> and other operations that need a string)</li>
<li><code>&quot;number&quot;</code> (for maths)</li>
<li><code>&quot;default&quot;</code> (few operators)</li>
</ul>
<p>The specification describes explicitly which operator uses which hint. There are very few operators that &ldquo;don&rsquo;t know what to expect&rdquo; and use the <code>&quot;default&quot;</code> hint. Usually for built-in objects <code>&quot;default&quot;</code> hint is handled the same way as <code>&quot;number&quot;</code>, so in practice the last two are often merged together.</p>
<p>The conversion algorithm is:</p>
<ol>
<li>Call <code>obj[Symbol.toPrimitive](hint)</code> if the method exists,</li>
<li>Otherwise if hint is <code>&quot;string&quot;</code>
<ul>
<li>try <code>obj.toString()</code> and <code>obj.valueOf()</code>, whatever exists.</li>
</ul>
</li>
<li>Otherwise if hint is <code>&quot;number&quot;</code> or <code>&quot;default&quot;</code>
<ul>
<li>try <code>obj.valueOf()</code> and <code>obj.toString()</code>, whatever exists.</li>
</ul>
</li>
</ol>
<p>In practice, it&rsquo;s often enough to implement only <code>obj.toString()</code> as a &ldquo;catch-all&rdquo; method for all conversions that return a &ldquo;human-readable&rdquo; representation of an object, for logging or debugging purposes.</p>
<h2 id="conclusion">Conclusion</h2>
<p>That&rsquo;s Alot! We thank the authors from <a href="https://javascript.info/">https://javascript.info/</a> For supporting this lesson, and without them, I don&rsquo;t think It would be possible to do such a huge work! In the next tutorial, We&rsquo;ll discuss how we can interact With websites in order to make our modern development success.</p>

  </article><div class="bg-blue-100 dark:bg-gray-900">
  <div class="container px-6 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
    <div>
      <div class="text-2xl font-bold mb-2">Follow me</div>
      <p class="opacity-60">I work on everything coding. Check out my blog and other projects.</p>
    </div>
    <ul class="flex justify-center gap-4">
      
      
      
      <li>
        <a
          href="https://github.com/nushankodikara"
          target="_blank"
          rel="noopener"
          aria-label="GitHub"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/github--v1.png"/>
        </a>
      </li>
      
      
      
      <li>
        <a
          href="https://www.instagram.com/____nushan_/"
          target="_blank"
          rel="noopener"
          aria-label="Instagram"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/instagram-new.png"/>
        </a>
      </li>
      
      
      <li>
        <a
          href="https://www.facebook.com/kodikara.nushan"
          target="_blank"
          rel="noopener"
          aria-label="Facebook"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/facebook-new.png"/>
        </a>
      </li>
      
      
      <li>
        <a
          href="https://t.me/nushan_kodikara"
          target="_blank"
          rel="noopener"
          aria-label="telegram"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/telegram-app.png"/>
        </a>
      </li>
      
      
      <li>
        <a
          href="https://www.tiktok.com/@nushan.kodikara"
          target="_blank"
          rel="noopener"
          aria-label="tiktok"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
        <img src="https://img.icons8.com/ios/50/000000/tiktok.png"/>
        </a>
      </li>
      
    </ul>
  </div>
</div>
    </main><footer class="container p-6 mx-auto flex justify-between items-center">
  <span class="text-sm font-light">
    
    Copyright © 2022 - Nushan Kodikara · All rights reserved
    
  </span>
  <span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-1 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 15l-6 -6l-6 6h12" />
    </svg>
  </span>
</footer>

<div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden">
  <div class="container max-w-3xl mx-auto p-12">
    <div class="relative">
      <div class="my-4 text-center text-2xl font-bold">Search</div>

      <span class="p-2 absolute right-0 top-0 cursor-pointer close-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <input type="search" class="py-2 px-3 w-full dark:text-black border rounded-lg dark:border-transparent"
      placeholder="Enter search query" />

    <div class="search-results text-lg font-medium my-4 hidden">Results</div>
    <ul class="search-list my-2">

    </ul>

    <div class="no-results text-center my-8 hidden">
      <div class="text-xl font-semibold mb-2">No results found</div>
      <p class="font-light text-sm">Try adjusting your search query</p>
    </div>
  </div>
</div>





<script src="https://www.nushankodikara.com/js/scripts.min.js"></script>






<script>
  
  const darkmode = document.querySelector('.toggle-dark-mode');
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('darkmode', 'light')
    } else {
      document.documentElement.classList.add('dark')
      localStorage.setItem('darkmode', 'dark')
    }
  }
  if (darkmode) {
    darkmode.addEventListener('click', toggleDarkMode);
  }

  const isDark = localStorage.getItem('darkmode');
  if (isDark && isDark === 'dark') {
    toggleDarkMode();
  }
</script>
</body>
</html>
